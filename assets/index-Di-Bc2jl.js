(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function S2(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var im={exports:{}},Ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function N2(){if(mv)return Ol;mv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:s,type:i,key:d,ref:o!==void 0?o:null,props:c}}return Ol.Fragment=e,Ol.jsx=n,Ol.jsxs=n,Ol}var gv;function R2(){return gv||(gv=1,im.exports=N2()),im.exports}var f=R2(),am={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function I2(){if(pv)return Re;pv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),A=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,j={};function L(O,Z,le){this.props=O,this.context=Z,this.refs=j,this.updater=le||U}L.prototype.isReactComponent={},L.prototype.setState=function(O,Z){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Z,"setState")},L.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Y(){}Y.prototype=L.prototype;function ae(O,Z,le){this.props=O,this.context=Z,this.refs=j,this.updater=le||U}var re=ae.prototype=new Y;re.constructor=ae,P(re,L.prototype),re.isPureReactComponent=!0;var ge=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},Ae=Object.prototype.hasOwnProperty;function V(O,Z,le,X,fe,Te){return le=Te.ref,{$$typeof:s,type:O,key:Z,ref:le!==void 0?le:null,props:Te}}function I(O,Z){return V(O.type,Z,void 0,void 0,void 0,O.props)}function R(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function D(O){var Z={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(le){return Z[le]})}var M=/\/+/g;function S(O,Z){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):Z.toString(36)}function N(){}function Ce(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(N,N):(O.status="pending",O.then(function(Z){O.status==="pending"&&(O.status="fulfilled",O.value=Z)},function(Z){O.status==="pending"&&(O.status="rejected",O.reason=Z)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function oe(O,Z,le,X,fe){var Te=typeof O;(Te==="undefined"||Te==="boolean")&&(O=null);var ve=!1;if(O===null)ve=!0;else switch(Te){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(O.$$typeof){case s:case e:ve=!0;break;case b:return ve=O._init,oe(ve(O._payload),Z,le,X,fe)}}if(ve)return fe=fe(O),ve=X===""?"."+S(O,0):X,ge(fe)?(le="",ve!=null&&(le=ve.replace(M,"$&/")+"/"),oe(fe,Z,le,"",function(Xn){return Xn})):fe!=null&&(R(fe)&&(fe=I(fe,le+(fe.key==null||O&&O.key===fe.key?"":(""+fe.key).replace(M,"$&/")+"/")+ve)),Z.push(fe)),1;ve=0;var jt=X===""?".":X+":";if(ge(O))for(var et=0;et<O.length;et++)X=O[et],Te=jt+S(X,et),ve+=oe(X,Z,le,Te,fe);else if(et=T(O),typeof et=="function")for(O=et.call(O),et=0;!(X=O.next()).done;)X=X.value,Te=jt+S(X,et++),ve+=oe(X,Z,le,Te,fe);else if(Te==="object"){if(typeof O.then=="function")return oe(Ce(O),Z,le,X,fe);throw Z=String(O),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ve}function H(O,Z,le){if(O==null)return O;var X=[],fe=0;return oe(O,X,"","",function(Te){return Z.call(le,Te,fe++)}),X}function ie(O){if(O._status===-1){var Z=O._result;Z=Z(),Z.then(function(le){(O._status===0||O._status===-1)&&(O._status=1,O._result=le)},function(le){(O._status===0||O._status===-1)&&(O._status=2,O._result=le)}),O._status===-1&&(O._status=0,O._result=Z)}if(O._status===1)return O._result.default;throw O._result}var ue=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function je(){}return Re.Children={map:H,forEach:function(O,Z,le){H(O,function(){Z.apply(this,arguments)},le)},count:function(O){var Z=0;return H(O,function(){Z++}),Z},toArray:function(O){return H(O,function(Z){return Z})||[]},only:function(O){if(!R(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Re.Component=L,Re.Fragment=n,Re.Profiler=o,Re.PureComponent=ae,Re.StrictMode=i,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Re.__COMPILER_RUNTIME={__proto__:null,c:function(O){return se.H.useMemoCache(O)}},Re.cache=function(O){return function(){return O.apply(null,arguments)}},Re.cloneElement=function(O,Z,le){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var X=P({},O.props),fe=O.key,Te=void 0;if(Z!=null)for(ve in Z.ref!==void 0&&(Te=void 0),Z.key!==void 0&&(fe=""+Z.key),Z)!Ae.call(Z,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&Z.ref===void 0||(X[ve]=Z[ve]);var ve=arguments.length-2;if(ve===1)X.children=le;else if(1<ve){for(var jt=Array(ve),et=0;et<ve;et++)jt[et]=arguments[et+2];X.children=jt}return V(O.type,fe,void 0,void 0,Te,X)},Re.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Re.createElement=function(O,Z,le){var X,fe={},Te=null;if(Z!=null)for(X in Z.key!==void 0&&(Te=""+Z.key),Z)Ae.call(Z,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(fe[X]=Z[X]);var ve=arguments.length-2;if(ve===1)fe.children=le;else if(1<ve){for(var jt=Array(ve),et=0;et<ve;et++)jt[et]=arguments[et+2];fe.children=jt}if(O&&O.defaultProps)for(X in ve=O.defaultProps,ve)fe[X]===void 0&&(fe[X]=ve[X]);return V(O,Te,void 0,void 0,null,fe)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(O){return{$$typeof:g,render:O}},Re.isValidElement=R,Re.lazy=function(O){return{$$typeof:b,_payload:{_status:-1,_result:O},_init:ie}},Re.memo=function(O,Z){return{$$typeof:y,type:O,compare:Z===void 0?null:Z}},Re.startTransition=function(O){var Z=se.T,le={};se.T=le;try{var X=O(),fe=se.S;fe!==null&&fe(le,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(je,ue)}catch(Te){ue(Te)}finally{se.T=Z}},Re.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Re.use=function(O){return se.H.use(O)},Re.useActionState=function(O,Z,le){return se.H.useActionState(O,Z,le)},Re.useCallback=function(O,Z){return se.H.useCallback(O,Z)},Re.useContext=function(O){return se.H.useContext(O)},Re.useDebugValue=function(){},Re.useDeferredValue=function(O,Z){return se.H.useDeferredValue(O,Z)},Re.useEffect=function(O,Z,le){var X=se.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(O,Z)},Re.useId=function(){return se.H.useId()},Re.useImperativeHandle=function(O,Z,le){return se.H.useImperativeHandle(O,Z,le)},Re.useInsertionEffect=function(O,Z){return se.H.useInsertionEffect(O,Z)},Re.useLayoutEffect=function(O,Z){return se.H.useLayoutEffect(O,Z)},Re.useMemo=function(O,Z){return se.H.useMemo(O,Z)},Re.useOptimistic=function(O,Z){return se.H.useOptimistic(O,Z)},Re.useReducer=function(O,Z,le){return se.H.useReducer(O,Z,le)},Re.useRef=function(O){return se.H.useRef(O)},Re.useState=function(O){return se.H.useState(O)},Re.useSyncExternalStore=function(O,Z,le){return se.H.useSyncExternalStore(O,Z,le)},Re.useTransition=function(){return se.H.useTransition()},Re.version="19.1.0",Re}var yv;function eg(){return yv||(yv=1,am.exports=I2()),am.exports}var q=eg();const C2=S2(q);var om={exports:{}},Ml={},lm={exports:{}},cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function j2(){return vv||(vv=1,function(s){function e(H,ie){var ue=H.length;H.push(ie);e:for(;0<ue;){var je=ue-1>>>1,O=H[je];if(0<o(O,ie))H[je]=ie,H[ue]=O,ue=je;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ie=H[0],ue=H.pop();if(ue!==ie){H[0]=ue;e:for(var je=0,O=H.length,Z=O>>>1;je<Z;){var le=2*(je+1)-1,X=H[le],fe=le+1,Te=H[fe];if(0>o(X,ue))fe<O&&0>o(Te,X)?(H[je]=Te,H[fe]=ue,je=fe):(H[je]=X,H[le]=ue,je=le);else if(fe<O&&0>o(Te,ue))H[je]=Te,H[fe]=ue,je=fe;else break e}}return ie}function o(H,ie){var ue=H.sortIndex-ie.sortIndex;return ue!==0?ue:H.id-ie.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var p=[],y=[],b=1,A=null,T=3,U=!1,P=!1,j=!1,L=!1,Y=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ge(H){for(var ie=n(y);ie!==null;){if(ie.callback===null)i(y);else if(ie.startTime<=H)i(y),ie.sortIndex=ie.expirationTime,e(p,ie);else break;ie=n(y)}}function se(H){if(j=!1,ge(H),!P)if(n(p)!==null)P=!0,Ae||(Ae=!0,S());else{var ie=n(y);ie!==null&&oe(se,ie.startTime-H)}}var Ae=!1,V=-1,I=5,R=-1;function D(){return L?!0:!(s.unstable_now()-R<I)}function M(){if(L=!1,Ae){var H=s.unstable_now();R=H;var ie=!0;try{e:{P=!1,j&&(j=!1,ae(V),V=-1),U=!0;var ue=T;try{t:{for(ge(H),A=n(p);A!==null&&!(A.expirationTime>H&&D());){var je=A.callback;if(typeof je=="function"){A.callback=null,T=A.priorityLevel;var O=je(A.expirationTime<=H);if(H=s.unstable_now(),typeof O=="function"){A.callback=O,ge(H),ie=!0;break t}A===n(p)&&i(p),ge(H)}else i(p);A=n(p)}if(A!==null)ie=!0;else{var Z=n(y);Z!==null&&oe(se,Z.startTime-H),ie=!1}}break e}finally{A=null,T=ue,U=!1}ie=void 0}}finally{ie?S():Ae=!1}}}var S;if(typeof re=="function")S=function(){re(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Ce=N.port2;N.port1.onmessage=M,S=function(){Ce.postMessage(null)}}else S=function(){Y(M,0)};function oe(H,ie){V=Y(function(){H(s.unstable_now())},ie)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(H){switch(T){case 1:case 2:case 3:var ie=3;break;default:ie=T}var ue=T;T=ie;try{return H()}finally{T=ue}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(H,ie){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=T;T=H;try{return ie()}finally{T=ue}},s.unstable_scheduleCallback=function(H,ie,ue){var je=s.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?je+ue:je):ue=je,H){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ue+O,H={id:b++,callback:ie,priorityLevel:H,startTime:ue,expirationTime:O,sortIndex:-1},ue>je?(H.sortIndex=ue,e(y,H),n(p)===null&&H===n(y)&&(j?(ae(V),V=-1):j=!0,oe(se,ue-je))):(H.sortIndex=O,e(p,H),P||U||(P=!0,Ae||(Ae=!0,S()))),H},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(H){var ie=T;return function(){var ue=T;T=ie;try{return H.apply(this,arguments)}finally{T=ue}}}}(cm)),cm}var _v;function D2(){return _v||(_v=1,lm.exports=j2()),lm.exports}var um={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function O2(){if(xv)return Yt;xv=1;var s=eg();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,y,b){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:p,containerInfo:y,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Yt.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,b)},Yt.flushSync=function(p){var y=d.T,b=i.p;try{if(d.T=null,i.p=2,p)return p()}finally{d.T=y,i.p=b,i.d.f()}},Yt.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(p,y))},Yt.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Yt.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,A=g(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,U=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:T,fetchPriority:U}):b==="script"&&i.d.X(p,{crossOrigin:A,integrity:T,fetchPriority:U,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Yt.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=g(y.as,y.crossOrigin);i.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(p)},Yt.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,A=g(b,y.crossOrigin);i.d.L(p,b,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Yt.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=g(y.as,y.crossOrigin);i.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(p)},Yt.requestFormReset=function(p){i.d.r(p)},Yt.unstable_batchedUpdates=function(p,y){return p(y)},Yt.useFormState=function(p,y,b){return d.H.useFormState(p,y,b)},Yt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Yt.version="19.1.0",Yt}var bv;function M2(){if(bv)return um.exports;bv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),um.exports=O2(),um.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function k2(){if(Ev)return Ml;Ev=1;var s=D2(),e=eg(),n=M2();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(i(188))}function p(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return g(h),t;if(m===l)return g(h),r;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=m;else{for(var x=!1,E=h.child;E;){if(E===a){x=!0,a=h,l=m;break}if(E===l){x=!0,l=h,a=m;break}E=E.sibling}if(!x){for(E=m.child;E;){if(E===a){x=!0,a=m,l=h;break}if(E===l){x=!0,l=m,a=h;break}E=E.sibling}if(!x)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function y(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=y(t),r!==null)return r;t=t.sibling}return null}var b=Object.assign,A=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),re=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function S(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Ce(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case L:return"Profiler";case j:return"StrictMode";case se:return"Suspense";case Ae:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case re:return(t.displayName||"Context")+".Provider";case ae:return(t._context.displayName||"Context")+".Consumer";case ge:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return r=t.displayName||null,r!==null?r:Ce(t.type)||"Memo";case I:r=t._payload,t=t._init;try{return Ce(t(r))}catch{}}return null}var oe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},je=[],O=-1;function Z(t){return{current:t}}function le(t){0>O||(t.current=je[O],je[O]=null,O--)}function X(t,r){O++,je[O]=t.current,t.current=r}var fe=Z(null),Te=Z(null),ve=Z(null),jt=Z(null);function et(t,r){switch(X(ve,r),X(Te,t),X(fe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?By(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=By(r),t=Hy(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}le(fe),X(fe,t)}function Xn(){le(fe),le(Te),le(ve)}function is(t){t.memoizedState!==null&&X(jt,t);var r=fe.current,a=Hy(r,t.type);r!==a&&(X(Te,t),X(fe,a))}function br(t){Te.current===t&&(le(fe),le(Te)),jt.current===t&&(le(jt),Rl._currentValue=ue)}var ri=Object.prototype.hasOwnProperty,si=s.unstable_scheduleCallback,ii=s.unstable_cancelCallback,Ao=s.unstable_shouldYield,Tc=s.unstable_requestPaint,bn=s.unstable_now,sd=s.unstable_getCurrentPriorityLevel,So=s.unstable_ImmediatePriority,ea=s.unstable_UserBlockingPriority,ai=s.unstable_NormalPriority,id=s.unstable_LowPriority,ta=s.unstable_IdlePriority,No=s.log,wc=s.unstable_setDisableYieldValue,ct=null,Ge=null;function un(t){if(typeof No=="function"&&wc(t),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(ct,t)}catch{}}var Gt=Math.clz32?Math.clz32:oi,Ac=Math.log,ad=Math.LN2;function oi(t){return t>>>=0,t===0?32:31-(Ac(t)/ad|0)|0}var li=256,ci=4194304;function Vn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function na(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?h=Vn(l):(x&=E,x!==0?h=Vn(x):a||(a=E&~t,a!==0&&(h=Vn(a))))):(E=l&~m,E!==0?h=Vn(E):x!==0?h=Vn(x):a||(a=l&~t,a!==0&&(h=Vn(a)))),h===0?0:r!==0&&r!==h&&(r&m)===0&&(m=h&-h,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:h}function ui(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ro(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Io(){var t=li;return li<<=1,(li&4194048)===0&&(li=256),t}function Co(){var t=ci;return ci<<=1,(ci&62914560)===0&&(ci=4194304),t}function Er(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Tr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function jo(t,r,a,l,h,m){var x=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,C=t.expirationTimes,Q=t.hiddenUpdates;for(a=x&~a;0<a;){var W=31-Gt(a),te=1<<W;E[W]=0,C[W]=-1;var G=Q[W];if(G!==null)for(Q[W]=null,W=0;W<G.length;W++){var K=G[W];K!==null&&(K.lane&=-536870913)}a&=~te}l!==0&&Wn(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~r))}function Wn(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Gt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Do(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Gt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function as(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ra(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function os(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:lv(t.type))}function Sc(t,r){var a=ie.p;try{return ie.p=t,r()}finally{ie.p=a}}var st=Math.random().toString(36).slice(2),At="__reactFiber$"+st,pt="__reactProps$"+st,En="__reactContainer$"+st,Oo="__reactEvents$"+st,od="__reactListeners$"+st,ls="__reactHandles$"+st,Nc="__reactResources$"+st,hi="__reactMarker$"+st;function cs(t){delete t[At],delete t[pt],delete t[Oo],delete t[od],delete t[ls]}function wr(t){var r=t[At];if(r)return r;for(var a=t.parentNode;a;){if(r=a[En]||a[At]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Ky(t);t!==null;){if(a=t[At])return a;t=Ky(t)}return r}t=a,a=t.parentNode}return null}function Zn(t){if(t=t[At]||t[En]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Jn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function Jt(t){var r=t[Nc];return r||(r=t[Nc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function dt(t){t[hi]=!0}var Mo=new Set,sa={};function Pn(t,r){Ar(t,r),Ar(t+"Capture",r)}function Ar(t,r){for(sa[t]=r,t=0;t<r.length;t++)Mo.add(r[t])}var Rc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ic={},di={};function Cc(t){return ri.call(di,t)?!0:ri.call(Ic,t)?!1:Rc.test(t)?di[t]=!0:(Ic[t]=!0,!1)}function us(t,r,a){if(Cc(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function er(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Lt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var fi,jc;function Sr(t){if(fi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);fi=r&&r[1]||"",jc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fi+t+jc}var ia=!1;function aa(t,r){if(!t||ia)return"";ia=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(K){var G=K}Reflect.construct(t,[],te)}else{try{te.call()}catch(K){G=K}t.call(te.prototype)}}else{try{throw Error()}catch(K){G=K}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],E=m[1];if(x&&E){var C=x.split(`
`),Q=E.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<Q.length&&!Q[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===Q.length)for(l=C.length-1,h=Q.length-1;1<=l&&0<=h&&C[l]!==Q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==Q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==Q[h]){var W=`
`+C[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=h);break}}}finally{ia=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Sr(a):""}function ko(t){switch(t.tag){case 26:case 27:case 5:return Sr(t.type);case 16:return Sr("Lazy");case 13:return Sr("Suspense");case 19:return Sr("SuspenseList");case 0:case 15:return aa(t.type,!1);case 11:return aa(t.type.render,!1);case 1:return aa(t.type,!0);case 31:return Sr("Activity");default:return""}}function oa(t){try{var r="";do r+=ko(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ld(t){var r=Vo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,m=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(x){l=""+x,m.call(this,x)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function la(t){t._valueTracker||(t._valueTracker=ld(t))}function Po(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Vo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function mi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var cd=/[\n"\\]/g;function yt(t){return t.replace(cd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function hn(t,r,a,l,h,m,x,E){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),r!=null?x==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+en(r)):t.value!==""+en(r)&&(t.value=""+en(r)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),r!=null?hs(t,x,en(r)):a!=null?hs(t,x,en(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+en(E):t.removeAttribute("name")}function gi(t,r,a,l,h,m,x,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;a=a!=null?""+en(a):"",r=r!=null?""+en(r):a,E||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x)}function hs(t,r,a){r==="number"&&mi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Nr(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+en(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function $e(t,r,a){if(r!=null&&(r=""+en(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+en(a):""}function pi(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(oe(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=en(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Tn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var yi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dc(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||yi.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Lo(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Dc(t,h,l)}else for(var m in r)r.hasOwnProperty(m)&&Dc(t,m,r[m])}function Uo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ud=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ca(t){return hd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Rr=null;function wn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ir=null,Cr=null;function zo(t){var r=Zn(t);if(r&&(t=r.stateNode)){var a=t[pt]||null;e:switch(t=r.stateNode,r.type){case"input":if(hn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[pt]||null;if(!h)throw Error(i(90));hn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Po(l)}break e;case"textarea":$e(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Nr(t,!!a.multiple,r,!1)}}}var tr=!1;function Oc(t,r,a){if(tr)return t(r,a);tr=!0;try{var l=t(r);return l}finally{if(tr=!1,(Ir!==null||Cr!==null)&&(Su(),Ir&&(r=Ir,t=Cr,Cr=Ir=null,zo(r),t)))for(r=0;r<t.length;r++)zo(t[r])}}function vi(t,r){var a=t.stateNode;if(a===null)return null;var l=a[pt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),An=!1;if(Ln)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){An=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{An=!1}var nr=null,ds=null,jr=null;function qo(){if(jr)return jr;var t,r=ds,a=r.length,l,h="value"in nr?nr.value:nr.textContent,m=h.length;for(t=0;t<a&&r[t]===h[t];t++);var x=a-t;for(l=1;l<=x&&r[a-l]===h[m-l];l++);return jr=h.slice(t,1<l?1-l:void 0)}function rr(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function sr(){return!0}function Bo(){return!1}function Dt(t){function r(a,l,h,m,x){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?sr:Bo,this.isPropagationStopped=Bo,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),r}var Fe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Dt(Fe),xi=b({},Fe,{view:0,detail:0}),Mc=Dt(xi),ha,da,ir,bi=b({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ir&&(ir&&t.type==="mousemove"?(ha=t.screenX-ir.screenX,da=t.screenY-ir.screenY):da=ha=0,ir=t),ha)},movementY:function(t){return"movementY"in t?t.movementY:da}}),Sn=Dt(bi),kc=b({},bi,{dataTransfer:0}),dd=Dt(kc),Ei=b({},xi,{relatedTarget:0}),fa=Dt(Ei),Ho=b({},Fe,{animationName:0,elapsedTime:0,pseudoElement:0}),ma=Dt(Ho),Vc=b({},Fe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ga=Dt(Vc),fd=b({},Fe,{data:0}),Fo=Dt(fd),Ti={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qo(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Lc[t])?!!r[t]:!1}function wi(){return Qo}var Uc=b({},xi,{key:function(t){if(t.key){var r=Ti[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=rr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Pc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wi,charCode:function(t){return t.type==="keypress"?rr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pa=Dt(Uc),zc=b({},bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Go=Dt(zc),Dr=b({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wi}),qc=Dt(Dr),Bc=b({},Fe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hc=Dt(Bc),Fc=b({},bi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ya=Dt(Fc),tn=b({},Fe,{newState:0,oldState:0}),Qc=Dt(tn),Gc=[9,13,27,32],ar=Ln&&"CompositionEvent"in window,u=null;Ln&&"documentMode"in document&&(u=document.documentMode);var v=Ln&&"TextEvent"in window&&!u,_=Ln&&(!ar||u&&8<u&&11>=u),w=" ",B=!1;function $(t,r){switch(t){case"keyup":return Gc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Le=!1;function St(t,r){switch(t){case"compositionend":return ce(r);case"keypress":return r.which!==32?null:(B=!0,w);case"textInput":return t=r.data,t===w&&B?null:t;default:return null}}function Ue(t,r){if(Le)return t==="compositionend"||!ar&&$(t,r)?(t=qo(),jr=ds=nr=null,Le=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var Ot={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ot[t.type]:r==="textarea"}function Or(t,r,a,l){Ir?Cr?Cr.push(l):Cr=[l]:Ir=l,r=Du(r,"onChange"),0<r.length&&(a=new ua("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Ut=null,or=null;function Ko(t){Py(t,0)}function Kc(t){var r=Jn(t);if(Po(r))return t}function sp(t,r){if(t==="change")return r}var ip=!1;if(Ln){var md;if(Ln){var gd="oninput"in document;if(!gd){var ap=document.createElement("div");ap.setAttribute("oninput","return;"),gd=typeof ap.oninput=="function"}md=gd}else md=!1;ip=md&&(!document.documentMode||9<document.documentMode)}function op(){Ut&&(Ut.detachEvent("onpropertychange",lp),or=Ut=null)}function lp(t){if(t.propertyName==="value"&&Kc(or)){var r=[];Or(r,or,t,wn(t)),Oc(Ko,r)}}function n1(t,r,a){t==="focusin"?(op(),Ut=r,or=a,Ut.attachEvent("onpropertychange",lp)):t==="focusout"&&op()}function r1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kc(or)}function s1(t,r){if(t==="click")return Kc(r)}function i1(t,r){if(t==="input"||t==="change")return Kc(r)}function a1(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var dn=typeof Object.is=="function"?Object.is:a1;function Yo(t,r){if(dn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ri.call(r,h)||!dn(t[h],r[h]))return!1}return!0}function cp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function up(t,r){var a=cp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=cp(a)}}function hp(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?hp(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function dp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=mi(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=mi(t.document)}return r}function pd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var o1=Ln&&"documentMode"in document&&11>=document.documentMode,va=null,yd=null,$o=null,vd=!1;function fp(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vd||va==null||va!==mi(l)||(l=va,"selectionStart"in l&&pd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),$o&&Yo($o,l)||($o=l,l=Du(yd,"onSelect"),0<l.length&&(r=new ua("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=va)))}function Ai(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var _a={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionrun:Ai("Transition","TransitionRun"),transitionstart:Ai("Transition","TransitionStart"),transitioncancel:Ai("Transition","TransitionCancel"),transitionend:Ai("Transition","TransitionEnd")},_d={},mp={};Ln&&(mp=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function Si(t){if(_d[t])return _d[t];if(!_a[t])return t;var r=_a[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in mp)return _d[t]=r[a];return t}var gp=Si("animationend"),pp=Si("animationiteration"),yp=Si("animationstart"),l1=Si("transitionrun"),c1=Si("transitionstart"),u1=Si("transitioncancel"),vp=Si("transitionend"),_p=new Map,xd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xd.push("scrollEnd");function Un(t,r){_p.set(t,r),Pn(r,[t])}var xp=new WeakMap;function Nn(t,r){if(typeof t=="object"&&t!==null){var a=xp.get(t);return a!==void 0?a:(r={value:t,source:r,stack:oa(r)},xp.set(t,r),r)}return{value:t,source:r,stack:oa(r)}}var Rn=[],xa=0,bd=0;function Yc(){for(var t=xa,r=bd=xa=0;r<t;){var a=Rn[r];Rn[r++]=null;var l=Rn[r];Rn[r++]=null;var h=Rn[r];Rn[r++]=null;var m=Rn[r];if(Rn[r++]=null,l!==null&&h!==null){var x=l.pending;x===null?h.next=h:(h.next=x.next,x.next=h),l.pending=h}m!==0&&bp(a,h,m)}}function $c(t,r,a,l){Rn[xa++]=t,Rn[xa++]=r,Rn[xa++]=a,Rn[xa++]=l,bd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ed(t,r,a,l){return $c(t,r,a,l),Xc(t)}function ba(t,r){return $c(t,null,null,r),Xc(t)}function bp(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&r!==null&&(h=31-Gt(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),m):null}function Xc(t){if(50<xl)throw xl=0,If=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ea={};function h1(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,r,a,l){return new h1(t,r,a,l)}function Td(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mr(t,r){var a=t.alternate;return a===null?(a=fn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ep(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Wc(t,r,a,l,h,m){var x=0;if(l=t,typeof t=="function")Td(t)&&(x=1);else if(typeof t=="string")x=f2(t,a,fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=fn(31,a,r,h),t.elementType=R,t.lanes=m,t;case P:return Ni(a.children,h,m,r);case j:x=8,h|=24;break;case L:return t=fn(12,a,r,h|2),t.elementType=L,t.lanes=m,t;case se:return t=fn(13,a,r,h),t.elementType=se,t.lanes=m,t;case Ae:return t=fn(19,a,r,h),t.elementType=Ae,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case re:x=10;break e;case ae:x=9;break e;case ge:x=11;break e;case V:x=14;break e;case I:x=16,l=null;break e}x=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=fn(x,a,r,h),r.elementType=t,r.type=l,r.lanes=m,r}function Ni(t,r,a,l){return t=fn(7,t,l,r),t.lanes=a,t}function wd(t,r,a){return t=fn(6,t,null,r),t.lanes=a,t}function Ad(t,r,a){return r=fn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ta=[],wa=0,Zc=null,Jc=0,In=[],Cn=0,Ri=null,kr=1,Vr="";function Ii(t,r){Ta[wa++]=Jc,Ta[wa++]=Zc,Zc=t,Jc=r}function Tp(t,r,a){In[Cn++]=kr,In[Cn++]=Vr,In[Cn++]=Ri,Ri=t;var l=kr;t=Vr;var h=32-Gt(l)-1;l&=~(1<<h),a+=1;var m=32-Gt(r)+h;if(30<m){var x=h-h%5;m=(l&(1<<x)-1).toString(32),l>>=x,h-=x,kr=1<<32-Gt(r)+h|a<<h|l,Vr=m+t}else kr=1<<m|a<<h|l,Vr=t}function Sd(t){t.return!==null&&(Ii(t,1),Tp(t,1,0))}function Nd(t){for(;t===Zc;)Zc=Ta[--wa],Ta[wa]=null,Jc=Ta[--wa],Ta[wa]=null;for(;t===Ri;)Ri=In[--Cn],In[Cn]=null,Vr=In[--Cn],In[Cn]=null,kr=In[--Cn],In[Cn]=null}var nn=null,ut=null,He=!1,Ci=null,lr=!1,Rd=Error(i(519));function ji(t){var r=Error(i(418,""));throw Zo(Nn(r,t)),Rd}function wp(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[At]=t,r[pt]=l,a){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(a=0;a<El.length;a++)Me(El[a],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Me("invalid",r),gi(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),la(r);break;case"select":Me("invalid",r);break;case"textarea":Me("invalid",r),pi(r,l.value,l.defaultValue,l.children),la(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||qy(r.textContent,a)?(l.popover!=null&&(Me("beforetoggle",r),Me("toggle",r)),l.onScroll!=null&&Me("scroll",r),l.onScrollEnd!=null&&Me("scrollend",r),l.onClick!=null&&(r.onclick=Ou),r=!0):r=!1,r||ji(t)}function Ap(t){for(nn=t.return;nn;)switch(nn.tag){case 5:case 13:lr=!1;return;case 27:case 3:lr=!0;return;default:nn=nn.return}}function Xo(t){if(t!==nn)return!1;if(!He)return Ap(t),He=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Qf(t.type,t.memoizedProps)),a=!a),a&&ut&&ji(t),Ap(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){ut=qn(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}ut=null}}else r===27?(r=ut,Rs(t.type)?(t=$f,$f=null,ut=t):ut=r):ut=nn?qn(t.stateNode.nextSibling):null;return!0}function Wo(){ut=nn=null,He=!1}function Sp(){var t=Ci;return t!==null&&(an===null?an=t:an.push.apply(an,t),Ci=null),t}function Zo(t){Ci===null?Ci=[t]:Ci.push(t)}var Id=Z(null),Di=null,Pr=null;function fs(t,r,a){X(Id,r._currentValue),r._currentValue=a}function Lr(t){t._currentValue=Id.current,le(Id)}function Cd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function jd(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var x=h.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=h;for(var C=0;C<r.length;C++)if(E.context===r[C]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),Cd(m.return,a,t),l||(x=null);break e}m=E.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(i(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Cd(x,a,t),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===t){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function Jo(t,r,a,l){t=null;for(var h=r,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var E=h.type;dn(h.pendingProps.value,x.value)||(t!==null?t.push(E):t=[E])}}else if(h===jt.current){if(x=h.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Rl):t=[Rl])}h=h.return}t!==null&&jd(r,t,a,l),r.flags|=262144}function eu(t){for(t=t.firstContext;t!==null;){if(!dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Oi(t){Di=t,Pr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kt(t){return Np(Di,t)}function tu(t,r){return Di===null&&Oi(t),Np(t,r)}function Np(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Pr===null){if(t===null)throw Error(i(308));Pr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Pr=Pr.next=r;return a}var d1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},f1=s.unstable_scheduleCallback,m1=s.unstable_NormalPriority,Rt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dd(){return{controller:new d1,data:new Map,refCount:0}}function el(t){t.refCount--,t.refCount===0&&f1(m1,function(){t.controller.abort()})}var tl=null,Od=0,Aa=0,Sa=null;function g1(t,r){if(tl===null){var a=tl=[];Od=0,Aa=Vf(),Sa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Od++,r.then(Rp,Rp),r}function Rp(){if(--Od===0&&tl!==null){Sa!==null&&(Sa.status="fulfilled");var t=tl;tl=null,Aa=0,Sa=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function p1(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Ip=H.S;H.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&g1(t,r),Ip!==null&&Ip(t,r)};var Mi=Z(null);function Md(){var t=Mi.current;return t!==null?t:tt.pooledCache}function nu(t,r){r===null?X(Mi,Mi.current):X(Mi,r.pool)}function Cp(){var t=Md();return t===null?null:{parent:Rt._currentValue,pool:t}}var nl=Error(i(460)),jp=Error(i(474)),ru=Error(i(542)),kd={then:function(){}};function Dp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function su(){}function Op(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(su,su),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,kp(t),t;default:if(typeof r.status=="string")r.then(su,su);else{if(t=tt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,kp(t),t}throw rl=r,nl}}var rl=null;function Mp(){if(rl===null)throw Error(i(459));var t=rl;return rl=null,t}function kp(t){if(t===nl||t===ru)throw Error(i(483))}var ms=!1;function Vd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function gs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ps(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=Xc(t),bp(t,null,a),r}return $c(t,l,r,a),Xc(t)}function sl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Do(t,a)}}function Ld(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?h=m=r:m=m.next=r}else h=m=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Ud=!1;function il(){if(Ud){var t=Sa;if(t!==null)throw t}}function al(t,r,a,l){Ud=!1;var h=t.updateQueue;ms=!1;var m=h.firstBaseUpdate,x=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var C=E,Q=C.next;C.next=null,x===null?m=Q:x.next=Q,x=C;var W=t.alternate;W!==null&&(W=W.updateQueue,E=W.lastBaseUpdate,E!==x&&(E===null?W.firstBaseUpdate=Q:E.next=Q,W.lastBaseUpdate=C))}if(m!==null){var te=h.baseState;x=0,W=Q=C=null,E=m;do{var G=E.lane&-536870913,K=G!==E.lane;if(K?(ze&G)===G:(l&G)===G){G!==0&&G===Aa&&(Ud=!0),W!==null&&(W=W.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var we=t,_e=E;G=r;var Ze=a;switch(_e.tag){case 1:if(we=_e.payload,typeof we=="function"){te=we.call(Ze,te,G);break e}te=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=_e.payload,G=typeof we=="function"?we.call(Ze,te,G):we,G==null)break e;te=b({},te,G);break e;case 2:ms=!0}}G=E.callback,G!==null&&(t.flags|=64,K&&(t.flags|=8192),K=h.callbacks,K===null?h.callbacks=[G]:K.push(G))}else K={lane:G,tag:E.tag,payload:E.payload,callback:E.callback,next:null},W===null?(Q=W=K,C=te):W=W.next=K,x|=G;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;K=E,E=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);W===null&&(C=te),h.baseState=C,h.firstBaseUpdate=Q,h.lastBaseUpdate=W,m===null&&(h.shared.lanes=0),ws|=x,t.lanes=x,t.memoizedState=te}}function Vp(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Pp(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Vp(a[t],r)}var Na=Z(null),iu=Z(0);function Lp(t,r){t=Qr,X(iu,t),X(Na,r),Qr=t|r.baseLanes}function zd(){X(iu,Qr),X(Na,Na.current)}function qd(){Qr=iu.current,le(Na),le(iu)}var ys=0,Ie=null,Xe=null,vt=null,au=!1,Ra=!1,ki=!1,ou=0,ol=0,Ia=null,y1=0;function ft(){throw Error(i(321))}function Bd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!dn(t[a],r[a]))return!1;return!0}function Hd(t,r,a,l,h,m){return ys=m,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,H.H=t===null||t.memoizedState===null?b0:E0,ki=!1,m=a(l,h),ki=!1,Ra&&(m=zp(r,a,l,h)),Up(t),m}function Up(t){H.H=fu;var r=Xe!==null&&Xe.next!==null;if(ys=0,vt=Xe=Ie=null,au=!1,ol=0,Ia=null,r)throw Error(i(300));t===null||Mt||(t=t.dependencies,t!==null&&eu(t)&&(Mt=!0))}function zp(t,r,a,l){Ie=t;var h=0;do{if(Ra&&(Ia=null),ol=0,Ra=!1,25<=h)throw Error(i(301));if(h+=1,vt=Xe=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}H.H=w1,m=r(a,l)}while(Ra);return m}function v1(){var t=H.H,r=t.useState()[0];return r=typeof r.then=="function"?ll(r):r,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(Ie.flags|=1024),r}function Fd(){var t=ou!==0;return ou=0,t}function Qd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Gd(t){if(au){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}au=!1}ys=0,vt=Xe=Ie=null,Ra=!1,ol=ou=0,Ia=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ie.memoizedState=vt=t:vt=vt.next=t,vt}function _t(){if(Xe===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var r=vt===null?Ie.memoizedState:vt.next;if(r!==null)vt=r,Xe=t;else{if(t===null)throw Ie.alternate===null?Error(i(467)):Error(i(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},vt===null?Ie.memoizedState=vt=t:vt=vt.next=t}return vt}function Kd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(t){var r=ol;return ol+=1,Ia===null&&(Ia=[]),t=Op(Ia,t,r),r=Ie,(vt===null?r.memoizedState:vt.next)===null&&(r=r.alternate,H.H=r===null||r.memoizedState===null?b0:E0),t}function lu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ll(t);if(t.$$typeof===re)return Kt(t)}throw Error(i(438,String(t)))}function Yd(t){var r=null,a=Ie.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Kd(),Ie.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=D;return r.index++,a}function Ur(t,r){return typeof r=="function"?r(t):r}function cu(t){var r=_t();return $d(r,Xe,t)}function $d(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var x=h.next;h.next=m.next,m.next=x}r.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{r=h.next;var E=x=null,C=null,Q=r,W=!1;do{var te=Q.lane&-536870913;if(te!==Q.lane?(ze&te)===te:(ys&te)===te){var G=Q.revertLane;if(G===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),te===Aa&&(W=!0);else if((ys&G)===G){Q=Q.next,G===Aa&&(W=!0);continue}else te={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},C===null?(E=C=te,x=m):C=C.next=te,Ie.lanes|=G,ws|=G;te=Q.action,ki&&a(m,te),m=Q.hasEagerState?Q.eagerState:a(m,te)}else G={lane:te,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},C===null?(E=C=G,x=m):C=C.next=G,Ie.lanes|=te,ws|=te;Q=Q.next}while(Q!==null&&Q!==r);if(C===null?x=m:C.next=E,!dn(m,t.memoizedState)&&(Mt=!0,W&&(a=Sa,a!==null)))throw a;t.memoizedState=m,t.baseState=x,t.baseQueue=C,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Xd(t){var r=_t(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=r.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do m=t(m,x.action),x=x.next;while(x!==h);dn(m,r.memoizedState)||(Mt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function qp(t,r,a){var l=Ie,h=_t(),m=He;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=r();var x=!dn((Xe||h).memoizedState,a);x&&(h.memoizedState=a,Mt=!0),h=h.queue;var E=Fp.bind(null,l,h,t);if(cl(2048,8,E,[t]),h.getSnapshot!==r||x||vt!==null&&vt.memoizedState.tag&1){if(l.flags|=2048,Ca(9,uu(),Hp.bind(null,l,h,a,r),null),tt===null)throw Error(i(349));m||(ys&124)!==0||Bp(l,r,a)}return a}function Bp(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ie.updateQueue,r===null?(r=Kd(),Ie.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Hp(t,r,a,l){r.value=a,r.getSnapshot=l,Qp(r)&&Gp(t)}function Fp(t,r,a){return a(function(){Qp(r)&&Gp(t)})}function Qp(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!dn(t,a)}catch{return!0}}function Gp(t){var r=ba(t,2);r!==null&&vn(r,t,2)}function Wd(t){var r=rn();if(typeof t=="function"){var a=t;if(t=a(),ki){un(!0);try{a()}finally{un(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:t},r}function Kp(t,r,a,l){return t.baseState=a,$d(t,Xe,typeof l=="function"?l:Ur)}function _1(t,r,a,l,h){if(du(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};H.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,Yp(r,m)):(m.next=a.next,r.pending=a.next=m)}}function Yp(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var m=H.T,x={};H.T=x;try{var E=a(h,l),C=H.S;C!==null&&C(x,E),$p(t,r,E)}catch(Q){Zd(t,r,Q)}finally{H.T=m}}else try{m=a(h,l),$p(t,r,m)}catch(Q){Zd(t,r,Q)}}function $p(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Xp(t,r,l)},function(l){return Zd(t,r,l)}):Xp(t,r,a)}function Xp(t,r,a){r.status="fulfilled",r.value=a,Wp(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Yp(t,a)))}function Zd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Wp(r),r=r.next;while(r!==l)}t.action=null}function Wp(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Zp(t,r){return r}function Jp(t,r){if(He){var a=tt.formState;if(a!==null){e:{var l=Ie;if(He){if(ut){t:{for(var h=ut,m=lr;h.nodeType!==8;){if(!m){h=null;break t}if(h=qn(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){ut=qn(h.nextSibling),l=h.data==="F!";break e}}ji(l)}l=!1}l&&(r=a[0])}}return a=rn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zp,lastRenderedState:r},a.queue=l,a=v0.bind(null,Ie,l),l.dispatch=a,l=Wd(!1),m=rf.bind(null,Ie,!1,l.queue),l=rn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=_1.bind(null,Ie,h,m,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function e0(t){var r=_t();return t0(r,Xe,t)}function t0(t,r,a){if(r=$d(t,r,Zp)[0],t=cu(Ur)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=ll(r)}catch(x){throw x===nl?ru:x}else l=r;r=_t();var h=r.queue,m=h.dispatch;return a!==r.memoizedState&&(Ie.flags|=2048,Ca(9,uu(),x1.bind(null,h,a),null)),[l,m,t]}function x1(t,r){t.action=r}function n0(t){var r=_t(),a=Xe;if(a!==null)return t0(r,a,t);_t(),r=r.memoizedState,a=_t();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Ca(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ie.updateQueue,r===null&&(r=Kd(),Ie.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function uu(){return{destroy:void 0,resource:void 0}}function r0(){return _t().memoizedState}function hu(t,r,a,l){var h=rn();l=l===void 0?null:l,Ie.flags|=t,h.memoizedState=Ca(1|r,uu(),a,l)}function cl(t,r,a,l){var h=_t();l=l===void 0?null:l;var m=h.memoizedState.inst;Xe!==null&&l!==null&&Bd(l,Xe.memoizedState.deps)?h.memoizedState=Ca(r,m,a,l):(Ie.flags|=t,h.memoizedState=Ca(1|r,m,a,l))}function s0(t,r){hu(8390656,8,t,r)}function i0(t,r){cl(2048,8,t,r)}function a0(t,r){return cl(4,2,t,r)}function o0(t,r){return cl(4,4,t,r)}function l0(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function c0(t,r,a){a=a!=null?a.concat([t]):null,cl(4,4,l0.bind(null,r,t),a)}function Jd(){}function u0(t,r){var a=_t();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Bd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function h0(t,r){var a=_t();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Bd(r,l[1]))return l[0];if(l=t(),ki){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[l,r],l}function ef(t,r,a){return a===void 0||(ys&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=my(),Ie.lanes|=t,ws|=t,a)}function d0(t,r,a,l){return dn(a,r)?a:Na.current!==null?(t=ef(t,a,l),dn(t,r)||(Mt=!0),t):(ys&42)===0?(Mt=!0,t.memoizedState=a):(t=my(),Ie.lanes|=t,ws|=t,r)}function f0(t,r,a,l,h){var m=ie.p;ie.p=m!==0&&8>m?m:8;var x=H.T,E={};H.T=E,rf(t,!1,r,a);try{var C=h(),Q=H.S;if(Q!==null&&Q(E,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var W=p1(C,l);ul(t,r,W,yn(t))}else ul(t,r,l,yn(t))}catch(te){ul(t,r,{then:function(){},status:"rejected",reason:te},yn())}finally{ie.p=m,H.T=x}}function b1(){}function tf(t,r,a,l){if(t.tag!==5)throw Error(i(476));var h=m0(t).queue;f0(t,h,r,ue,a===null?b1:function(){return g0(t),a(l)})}function m0(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:ue},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function g0(t){var r=m0(t).next.queue;ul(t,r,{},yn())}function nf(){return Kt(Rl)}function p0(){return _t().memoizedState}function y0(){return _t().memoizedState}function E1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=yn();t=gs(a);var l=ps(r,t,a);l!==null&&(vn(l,r,a),sl(l,r,a)),r={cache:Dd()},t.payload=r;return}r=r.return}}function T1(t,r,a){var l=yn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},du(t)?_0(r,a):(a=Ed(t,r,a,l),a!==null&&(vn(a,t,l),x0(a,r,l)))}function v0(t,r,a){var l=yn();ul(t,r,a,l)}function ul(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(du(t))_0(r,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var x=r.lastRenderedState,E=m(x,a);if(h.hasEagerState=!0,h.eagerState=E,dn(E,x))return $c(t,r,h,0),tt===null&&Yc(),!1}catch{}finally{}if(a=Ed(t,r,h,l),a!==null)return vn(a,t,l),x0(a,r,l),!0}return!1}function rf(t,r,a,l){if(l={lane:2,revertLane:Vf(),action:l,hasEagerState:!1,eagerState:null,next:null},du(t)){if(r)throw Error(i(479))}else r=Ed(t,a,l,2),r!==null&&vn(r,t,2)}function du(t){var r=t.alternate;return t===Ie||r!==null&&r===Ie}function _0(t,r){Ra=au=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function x0(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Do(t,a)}}var fu={readContext:Kt,use:lu,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft},b0={readContext:Kt,use:lu,useCallback:function(t,r){return rn().memoizedState=[t,r===void 0?null:r],t},useContext:Kt,useEffect:s0,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,hu(4194308,4,l0.bind(null,r,t),a)},useLayoutEffect:function(t,r){return hu(4194308,4,t,r)},useInsertionEffect:function(t,r){hu(4,2,t,r)},useMemo:function(t,r){var a=rn();r=r===void 0?null:r;var l=t();if(ki){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=rn();if(a!==void 0){var h=a(r);if(ki){un(!0);try{a(r)}finally{un(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=T1.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var r=rn();return t={current:t},r.memoizedState=t},useState:function(t){t=Wd(t);var r=t.queue,a=v0.bind(null,Ie,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Jd,useDeferredValue:function(t,r){var a=rn();return ef(a,t,r)},useTransition:function(){var t=Wd(!1);return t=f0.bind(null,Ie,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ie,h=rn();if(He){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),tt===null)throw Error(i(349));(ze&124)!==0||Bp(l,r,a)}h.memoizedState=a;var m={value:a,getSnapshot:r};return h.queue=m,s0(Fp.bind(null,l,m,t),[t]),l.flags|=2048,Ca(9,uu(),Hp.bind(null,l,m,a,r),null),a},useId:function(){var t=rn(),r=tt.identifierPrefix;if(He){var a=Vr,l=kr;a=(l&~(1<<32-Gt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=ou++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=y1++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:nf,useFormState:Jp,useActionState:Jp,useOptimistic:function(t){var r=rn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=rf.bind(null,Ie,!0,a),a.dispatch=r,[t,r]},useMemoCache:Yd,useCacheRefresh:function(){return rn().memoizedState=E1.bind(null,Ie)}},E0={readContext:Kt,use:lu,useCallback:u0,useContext:Kt,useEffect:i0,useImperativeHandle:c0,useInsertionEffect:a0,useLayoutEffect:o0,useMemo:h0,useReducer:cu,useRef:r0,useState:function(){return cu(Ur)},useDebugValue:Jd,useDeferredValue:function(t,r){var a=_t();return d0(a,Xe.memoizedState,t,r)},useTransition:function(){var t=cu(Ur)[0],r=_t().memoizedState;return[typeof t=="boolean"?t:ll(t),r]},useSyncExternalStore:qp,useId:p0,useHostTransitionStatus:nf,useFormState:e0,useActionState:e0,useOptimistic:function(t,r){var a=_t();return Kp(a,Xe,t,r)},useMemoCache:Yd,useCacheRefresh:y0},w1={readContext:Kt,use:lu,useCallback:u0,useContext:Kt,useEffect:i0,useImperativeHandle:c0,useInsertionEffect:a0,useLayoutEffect:o0,useMemo:h0,useReducer:Xd,useRef:r0,useState:function(){return Xd(Ur)},useDebugValue:Jd,useDeferredValue:function(t,r){var a=_t();return Xe===null?ef(a,t,r):d0(a,Xe.memoizedState,t,r)},useTransition:function(){var t=Xd(Ur)[0],r=_t().memoizedState;return[typeof t=="boolean"?t:ll(t),r]},useSyncExternalStore:qp,useId:p0,useHostTransitionStatus:nf,useFormState:n0,useActionState:n0,useOptimistic:function(t,r){var a=_t();return Xe!==null?Kp(a,Xe,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Yd,useCacheRefresh:y0},ja=null,hl=0;function mu(t){var r=hl;return hl+=1,ja===null&&(ja=[]),Op(ja,t,r)}function dl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function gu(t,r){throw r.$$typeof===A?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function T0(t){var r=t._init;return r(t._payload)}function w0(t){function r(z,k){if(t){var F=z.deletions;F===null?(z.deletions=[k],z.flags|=16):F.push(k)}}function a(z,k){if(!t)return null;for(;k!==null;)r(z,k),k=k.sibling;return null}function l(z){for(var k=new Map;z!==null;)z.key!==null?k.set(z.key,z):k.set(z.index,z),z=z.sibling;return k}function h(z,k){return z=Mr(z,k),z.index=0,z.sibling=null,z}function m(z,k,F){return z.index=F,t?(F=z.alternate,F!==null?(F=F.index,F<k?(z.flags|=67108866,k):F):(z.flags|=67108866,k)):(z.flags|=1048576,k)}function x(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function E(z,k,F,J){return k===null||k.tag!==6?(k=wd(F,z.mode,J),k.return=z,k):(k=h(k,F),k.return=z,k)}function C(z,k,F,J){var me=F.type;return me===P?W(z,k,F.props.children,J,F.key):k!==null&&(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===I&&T0(me)===k.type)?(k=h(k,F.props),dl(k,F),k.return=z,k):(k=Wc(F.type,F.key,F.props,null,z.mode,J),dl(k,F),k.return=z,k)}function Q(z,k,F,J){return k===null||k.tag!==4||k.stateNode.containerInfo!==F.containerInfo||k.stateNode.implementation!==F.implementation?(k=Ad(F,z.mode,J),k.return=z,k):(k=h(k,F.children||[]),k.return=z,k)}function W(z,k,F,J,me){return k===null||k.tag!==7?(k=Ni(F,z.mode,J,me),k.return=z,k):(k=h(k,F),k.return=z,k)}function te(z,k,F){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=wd(""+k,z.mode,F),k.return=z,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case T:return F=Wc(k.type,k.key,k.props,null,z.mode,F),dl(F,k),F.return=z,F;case U:return k=Ad(k,z.mode,F),k.return=z,k;case I:var J=k._init;return k=J(k._payload),te(z,k,F)}if(oe(k)||S(k))return k=Ni(k,z.mode,F,null),k.return=z,k;if(typeof k.then=="function")return te(z,mu(k),F);if(k.$$typeof===re)return te(z,tu(z,k),F);gu(z,k)}return null}function G(z,k,F,J){var me=k!==null?k.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return me!==null?null:E(z,k,""+F,J);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case T:return F.key===me?C(z,k,F,J):null;case U:return F.key===me?Q(z,k,F,J):null;case I:return me=F._init,F=me(F._payload),G(z,k,F,J)}if(oe(F)||S(F))return me!==null?null:W(z,k,F,J,null);if(typeof F.then=="function")return G(z,k,mu(F),J);if(F.$$typeof===re)return G(z,k,tu(z,F),J);gu(z,F)}return null}function K(z,k,F,J,me){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(F)||null,E(k,z,""+J,me);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case T:return z=z.get(J.key===null?F:J.key)||null,C(k,z,J,me);case U:return z=z.get(J.key===null?F:J.key)||null,Q(k,z,J,me);case I:var De=J._init;return J=De(J._payload),K(z,k,F,J,me)}if(oe(J)||S(J))return z=z.get(F)||null,W(k,z,J,me,null);if(typeof J.then=="function")return K(z,k,F,mu(J),me);if(J.$$typeof===re)return K(z,k,F,tu(k,J),me);gu(k,J)}return null}function we(z,k,F,J){for(var me=null,De=null,pe=k,xe=k=0,Vt=null;pe!==null&&xe<F.length;xe++){pe.index>xe?(Vt=pe,pe=null):Vt=pe.sibling;var Be=G(z,pe,F[xe],J);if(Be===null){pe===null&&(pe=Vt);break}t&&pe&&Be.alternate===null&&r(z,pe),k=m(Be,k,xe),De===null?me=Be:De.sibling=Be,De=Be,pe=Vt}if(xe===F.length)return a(z,pe),He&&Ii(z,xe),me;if(pe===null){for(;xe<F.length;xe++)pe=te(z,F[xe],J),pe!==null&&(k=m(pe,k,xe),De===null?me=pe:De.sibling=pe,De=pe);return He&&Ii(z,xe),me}for(pe=l(pe);xe<F.length;xe++)Vt=K(pe,z,xe,F[xe],J),Vt!==null&&(t&&Vt.alternate!==null&&pe.delete(Vt.key===null?xe:Vt.key),k=m(Vt,k,xe),De===null?me=Vt:De.sibling=Vt,De=Vt);return t&&pe.forEach(function(Os){return r(z,Os)}),He&&Ii(z,xe),me}function _e(z,k,F,J){if(F==null)throw Error(i(151));for(var me=null,De=null,pe=k,xe=k=0,Vt=null,Be=F.next();pe!==null&&!Be.done;xe++,Be=F.next()){pe.index>xe?(Vt=pe,pe=null):Vt=pe.sibling;var Os=G(z,pe,Be.value,J);if(Os===null){pe===null&&(pe=Vt);break}t&&pe&&Os.alternate===null&&r(z,pe),k=m(Os,k,xe),De===null?me=Os:De.sibling=Os,De=Os,pe=Vt}if(Be.done)return a(z,pe),He&&Ii(z,xe),me;if(pe===null){for(;!Be.done;xe++,Be=F.next())Be=te(z,Be.value,J),Be!==null&&(k=m(Be,k,xe),De===null?me=Be:De.sibling=Be,De=Be);return He&&Ii(z,xe),me}for(pe=l(pe);!Be.done;xe++,Be=F.next())Be=K(pe,z,xe,Be.value,J),Be!==null&&(t&&Be.alternate!==null&&pe.delete(Be.key===null?xe:Be.key),k=m(Be,k,xe),De===null?me=Be:De.sibling=Be,De=Be);return t&&pe.forEach(function(A2){return r(z,A2)}),He&&Ii(z,xe),me}function Ze(z,k,F,J){if(typeof F=="object"&&F!==null&&F.type===P&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case T:e:{for(var me=F.key;k!==null;){if(k.key===me){if(me=F.type,me===P){if(k.tag===7){a(z,k.sibling),J=h(k,F.props.children),J.return=z,z=J;break e}}else if(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===I&&T0(me)===k.type){a(z,k.sibling),J=h(k,F.props),dl(J,F),J.return=z,z=J;break e}a(z,k);break}else r(z,k);k=k.sibling}F.type===P?(J=Ni(F.props.children,z.mode,J,F.key),J.return=z,z=J):(J=Wc(F.type,F.key,F.props,null,z.mode,J),dl(J,F),J.return=z,z=J)}return x(z);case U:e:{for(me=F.key;k!==null;){if(k.key===me)if(k.tag===4&&k.stateNode.containerInfo===F.containerInfo&&k.stateNode.implementation===F.implementation){a(z,k.sibling),J=h(k,F.children||[]),J.return=z,z=J;break e}else{a(z,k);break}else r(z,k);k=k.sibling}J=Ad(F,z.mode,J),J.return=z,z=J}return x(z);case I:return me=F._init,F=me(F._payload),Ze(z,k,F,J)}if(oe(F))return we(z,k,F,J);if(S(F)){if(me=S(F),typeof me!="function")throw Error(i(150));return F=me.call(F),_e(z,k,F,J)}if(typeof F.then=="function")return Ze(z,k,mu(F),J);if(F.$$typeof===re)return Ze(z,k,tu(z,F),J);gu(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,k!==null&&k.tag===6?(a(z,k.sibling),J=h(k,F),J.return=z,z=J):(a(z,k),J=wd(F,z.mode,J),J.return=z,z=J),x(z)):a(z,k)}return function(z,k,F,J){try{hl=0;var me=Ze(z,k,F,J);return ja=null,me}catch(pe){if(pe===nl||pe===ru)throw pe;var De=fn(29,pe,null,z.mode);return De.lanes=J,De.return=z,De}finally{}}}var Da=w0(!0),A0=w0(!1),jn=Z(null),cr=null;function vs(t){var r=t.alternate;X(It,It.current&1),X(jn,t),cr===null&&(r===null||Na.current!==null||r.memoizedState!==null)&&(cr=t)}function S0(t){if(t.tag===22){if(X(It,It.current),X(jn,t),cr===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(cr=t)}}else _s()}function _s(){X(It,It.current),X(jn,jn.current)}function zr(t){le(jn),cr===t&&(cr=null),le(It)}var It=Z(0);function pu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Yf(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function sf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:b({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var af={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=yn(),h=gs(l);h.payload=r,a!=null&&(h.callback=a),r=ps(t,h,l),r!==null&&(vn(r,t,l),sl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=yn(),h=gs(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=ps(t,h,l),r!==null&&(vn(r,t,l),sl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=yn(),l=gs(a);l.tag=2,r!=null&&(l.callback=r),r=ps(t,l,a),r!==null&&(vn(r,t,a),sl(r,t,a))}};function N0(t,r,a,l,h,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,x):r.prototype&&r.prototype.isPureReactComponent?!Yo(a,l)||!Yo(h,m):!0}function R0(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&af.enqueueReplaceState(r,r.state,null)}function Vi(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=b({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var yu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function I0(t){yu(t)}function C0(t){console.error(t)}function j0(t){yu(t)}function vu(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function D0(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function of(t,r,a){return a=gs(a),a.tag=3,a.payload={element:null},a.callback=function(){vu(t,r)},a}function O0(t){return t=gs(t),t.tag=3,t}function M0(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){D0(r,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){D0(r,a,l),typeof h!="function"&&(As===null?As=new Set([this]):As.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function A1(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&Jo(r,a,h,!0),a=jn.current,a!==null){switch(a.tag){case 13:return cr===null?jf():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===kd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Of(t,l,h)),!1;case 22:return a.flags|=65536,l===kd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Of(t,l,h)),!1}throw Error(i(435,a.tag))}return Of(t,l,h),jf(),!1}if(He)return r=jn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Rd&&(t=Error(i(422),{cause:l}),Zo(Nn(t,a)))):(l!==Rd&&(r=Error(i(423),{cause:l}),Zo(Nn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Nn(l,a),h=of(t.stateNode,l,h),Ld(t,h),ht!==4&&(ht=2)),!1;var m=Error(i(520),{cause:l});if(m=Nn(m,a),_l===null?_l=[m]:_l.push(m),ht!==4&&(ht=2),r===null)return!0;l=Nn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=of(a.stateNode,l,t),Ld(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(As===null||!As.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=O0(h),M0(h,t,a,l),Ld(a,h),!1}a=a.return}while(a!==null);return!1}var k0=Error(i(461)),Mt=!1;function zt(t,r,a,l){r.child=t===null?A0(r,null,a,l):Da(r,t.child,a,l)}function V0(t,r,a,l,h){a=a.render;var m=r.ref;if("ref"in l){var x={};for(var E in l)E!=="ref"&&(x[E]=l[E])}else x=l;return Oi(r),l=Hd(t,r,a,x,m,h),E=Fd(),t!==null&&!Mt?(Qd(t,r,h),qr(t,r,h)):(He&&E&&Sd(r),r.flags|=1,zt(t,r,l,h),r.child)}function P0(t,r,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!Td(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,L0(t,r,m,l,h)):(t=Wc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!gf(t,h)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:Yo,a(x,l)&&t.ref===r.ref)return qr(t,r,h)}return r.flags|=1,t=Mr(m,l),t.ref=r.ref,t.return=r,r.child=t}function L0(t,r,a,l,h){if(t!==null){var m=t.memoizedProps;if(Yo(m,l)&&t.ref===r.ref)if(Mt=!1,r.pendingProps=l=m,gf(t,h))(t.flags&131072)!==0&&(Mt=!0);else return r.lanes=t.lanes,qr(t,r,h)}return lf(t,r,a,l,h)}function U0(t,r,a){var l=r.pendingProps,h=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,t!==null){for(h=r.child=t.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;r.childLanes=m&~l}else r.childLanes=0,r.child=null;return z0(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&nu(r,m!==null?m.cachePool:null),m!==null?Lp(r,m):zd(),S0(r);else return r.lanes=r.childLanes=536870912,z0(t,r,m!==null?m.baseLanes|a:a,a)}else m!==null?(nu(r,m.cachePool),Lp(r,m),_s(),r.memoizedState=null):(t!==null&&nu(r,null),zd(),_s());return zt(t,r,h,a),r.child}function z0(t,r,a,l){var h=Md();return h=h===null?null:{parent:Rt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&nu(r,null),zd(),S0(r),t!==null&&Jo(t,r,l,!0),null}function _u(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function lf(t,r,a,l,h){return Oi(r),a=Hd(t,r,a,l,void 0,h),l=Fd(),t!==null&&!Mt?(Qd(t,r,h),qr(t,r,h)):(He&&l&&Sd(r),r.flags|=1,zt(t,r,a,h),r.child)}function q0(t,r,a,l,h,m){return Oi(r),r.updateQueue=null,a=zp(r,l,a,h),Up(t),l=Fd(),t!==null&&!Mt?(Qd(t,r,m),qr(t,r,m)):(He&&l&&Sd(r),r.flags|=1,zt(t,r,a,m),r.child)}function B0(t,r,a,l,h){if(Oi(r),r.stateNode===null){var m=Ea,x=a.contextType;typeof x=="object"&&x!==null&&(m=Kt(x)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=af,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},Vd(r),x=a.contextType,m.context=typeof x=="object"&&x!==null?Kt(x):Ea,m.state=r.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(sf(r,a,x,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&af.enqueueReplaceState(m,m.state,null),al(r,l,m,h),il(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var E=r.memoizedProps,C=Vi(a,E);m.props=C;var Q=m.context,W=a.contextType;x=Ea,typeof W=="object"&&W!==null&&(x=Kt(W));var te=a.getDerivedStateFromProps;W=typeof te=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||Q!==x)&&R0(r,m,l,x),ms=!1;var G=r.memoizedState;m.state=G,al(r,l,m,h),il(),Q=r.memoizedState,E||G!==Q||ms?(typeof te=="function"&&(sf(r,a,te,l),Q=r.memoizedState),(C=ms||N0(r,a,C,l,G,Q,x))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Q),m.props=l,m.state=Q,m.context=x,l=C):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,Pd(t,r),x=r.memoizedProps,W=Vi(a,x),m.props=W,te=r.pendingProps,G=m.context,Q=a.contextType,C=Ea,typeof Q=="object"&&Q!==null&&(C=Kt(Q)),E=a.getDerivedStateFromProps,(Q=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==te||G!==C)&&R0(r,m,l,C),ms=!1,G=r.memoizedState,m.state=G,al(r,l,m,h),il();var K=r.memoizedState;x!==te||G!==K||ms||t!==null&&t.dependencies!==null&&eu(t.dependencies)?(typeof E=="function"&&(sf(r,a,E,l),K=r.memoizedState),(W=ms||N0(r,a,W,l,G,K,C)||t!==null&&t.dependencies!==null&&eu(t.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,K,C),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,K,C)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=K),m.props=l,m.state=K,m.context=C,l=W):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,_u(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=Da(r,t.child,null,h),r.child=Da(r,null,a,h)):zt(t,r,a,h),r.memoizedState=m.state,t=r.child):t=qr(t,r,h),t}function H0(t,r,a,l){return Wo(),r.flags|=256,zt(t,r,a,l),r.child}var cf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uf(t){return{baseLanes:t,cachePool:Cp()}}function hf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Dn),t}function F0(t,r,a){var l=r.pendingProps,h=!1,m=(r.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(It.current&2)!==0),x&&(h=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,t===null){if(He){if(h?vs(r):_s(),He){var E=ut,C;if(C=E){e:{for(C=E,E=lr;C.nodeType!==8;){if(!E){E=null;break e}if(C=qn(C.nextSibling),C===null){E=null;break e}}E=C}E!==null?(r.memoizedState={dehydrated:E,treeContext:Ri!==null?{id:kr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},C=fn(18,null,null,0),C.stateNode=E,C.return=r,r.child=C,nn=r,ut=null,C=!0):C=!1}C||ji(r)}if(E=r.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Yf(E)?r.lanes=32:r.lanes=536870912,null;zr(r)}return E=l.children,l=l.fallback,h?(_s(),h=r.mode,E=xu({mode:"hidden",children:E},h),l=Ni(l,h,a,null),E.return=r,l.return=r,E.sibling=l,r.child=E,h=r.child,h.memoizedState=uf(a),h.childLanes=hf(t,x,a),r.memoizedState=cf,l):(vs(r),df(r,E))}if(C=t.memoizedState,C!==null&&(E=C.dehydrated,E!==null)){if(m)r.flags&256?(vs(r),r.flags&=-257,r=ff(t,r,a)):r.memoizedState!==null?(_s(),r.child=t.child,r.flags|=128,r=null):(_s(),h=l.fallback,E=r.mode,l=xu({mode:"visible",children:l.children},E),h=Ni(h,E,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Da(r,t.child,null,a),l=r.child,l.memoizedState=uf(a),l.childLanes=hf(t,x,a),r.memoizedState=cf,r=h);else if(vs(r),Yf(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var Q=x.dgst;x=Q,l=Error(i(419)),l.stack="",l.digest=x,Zo({value:l,source:null,stack:null}),r=ff(t,r,a)}else if(Mt||Jo(t,r,a,!1),x=(a&t.childLanes)!==0,Mt||x){if(x=tt,x!==null&&(l=a&-a,l=(l&42)!==0?1:as(l),l=(l&(x.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,ba(t,l),vn(x,t,l),k0;E.data==="$?"||jf(),r=ff(t,r,a)}else E.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=C.treeContext,ut=qn(E.nextSibling),nn=r,He=!0,Ci=null,lr=!1,t!==null&&(In[Cn++]=kr,In[Cn++]=Vr,In[Cn++]=Ri,kr=t.id,Vr=t.overflow,Ri=r),r=df(r,l.children),r.flags|=4096);return r}return h?(_s(),h=l.fallback,E=r.mode,C=t.child,Q=C.sibling,l=Mr(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,Q!==null?h=Mr(Q,h):(h=Ni(h,E,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,E=t.child.memoizedState,E===null?E=uf(a):(C=E.cachePool,C!==null?(Q=Rt._currentValue,C=C.parent!==Q?{parent:Q,pool:Q}:C):C=Cp(),E={baseLanes:E.baseLanes|a,cachePool:C}),h.memoizedState=E,h.childLanes=hf(t,x,a),r.memoizedState=cf,l):(vs(r),a=t.child,t=a.sibling,a=Mr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(x=r.deletions,x===null?(r.deletions=[t],r.flags|=16):x.push(t)),r.child=a,r.memoizedState=null,a)}function df(t,r){return r=xu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function xu(t,r){return t=fn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function ff(t,r,a){return Da(r,t.child,null,a),t=df(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Q0(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Cd(t.return,r,a)}function mf(t,r,a,l,h){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=h)}function G0(t,r,a){var l=r.pendingProps,h=l.revealOrder,m=l.tail;if(zt(t,r,l.children,a),l=It.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Q0(t,a,r);else if(t.tag===19)Q0(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(X(It,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&pu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),mf(r,!1,h,a,m);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&pu(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}mf(r,!0,a,null,m);break;case"together":mf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function qr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),ws|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(Jo(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=Mr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Mr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function gf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&eu(t)))}function S1(t,r,a){switch(r.tag){case 3:et(r,r.stateNode.containerInfo),fs(r,Rt,t.memoizedState.cache),Wo();break;case 27:case 5:is(r);break;case 4:et(r,r.stateNode.containerInfo);break;case 10:fs(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(vs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?F0(t,r,a):(vs(r),t=qr(t,r,a),t!==null?t.sibling:null);vs(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(Jo(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return G0(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),X(It,It.current),l)break;return null;case 22:case 23:return r.lanes=0,U0(t,r,a);case 24:fs(r,Rt,t.memoizedState.cache)}return qr(t,r,a)}function K0(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Mt=!0;else{if(!gf(t,a)&&(r.flags&128)===0)return Mt=!1,S1(t,r,a);Mt=(t.flags&131072)!==0}else Mt=!1,He&&(r.flags&1048576)!==0&&Tp(r,Jc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")Td(l)?(t=Vi(l,t),r.tag=1,r=B0(null,r,l,t,a)):(r.tag=0,r=lf(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===ge){r.tag=11,r=V0(null,r,l,t,a);break e}else if(h===V){r.tag=14,r=P0(null,r,l,t,a);break e}}throw r=Ce(l)||l,Error(i(306,r,""))}}return r;case 0:return lf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Vi(l,r.pendingProps),B0(t,r,l,h,a);case 3:e:{if(et(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var m=r.memoizedState;h=m.element,Pd(t,r),al(r,l,null,a);var x=r.memoizedState;if(l=x.cache,fs(r,Rt,l),l!==m.cache&&jd(r,[Rt],a,!0),il(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=H0(t,r,l,a);break e}else if(l!==h){h=Nn(Error(i(424)),r),Zo(h),r=H0(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ut=qn(t.firstChild),nn=r,He=!0,Ci=null,lr=!0,a=A0(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Wo(),l===h){r=qr(t,r,a);break e}zt(t,r,l,a)}r=r.child}return r;case 26:return _u(t,r),t===null?(a=Wy(r.type,null,r.pendingProps,null))?r.memoizedState=a:He||(a=r.type,t=r.pendingProps,l=Mu(ve.current).createElement(a),l[At]=r,l[pt]=t,Bt(l,a,t),dt(l),r.stateNode=l):r.memoizedState=Wy(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return is(r),t===null&&He&&(l=r.stateNode=Yy(r.type,r.pendingProps,ve.current),nn=r,lr=!0,h=ut,Rs(r.type)?($f=h,ut=qn(l.firstChild)):ut=h),zt(t,r,r.pendingProps.children,a),_u(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&He&&((h=l=ut)&&(l=e2(l,r.type,r.pendingProps,lr),l!==null?(r.stateNode=l,nn=r,ut=qn(l.firstChild),lr=!1,h=!0):h=!1),h||ji(r)),is(r),h=r.type,m=r.pendingProps,x=t!==null?t.memoizedProps:null,l=m.children,Qf(h,m)?l=null:x!==null&&Qf(h,x)&&(r.flags|=32),r.memoizedState!==null&&(h=Hd(t,r,v1,null,null,a),Rl._currentValue=h),_u(t,r),zt(t,r,l,a),r.child;case 6:return t===null&&He&&((t=a=ut)&&(a=t2(a,r.pendingProps,lr),a!==null?(r.stateNode=a,nn=r,ut=null,t=!0):t=!1),t||ji(r)),null;case 13:return F0(t,r,a);case 4:return et(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Da(r,null,l,a):zt(t,r,l,a),r.child;case 11:return V0(t,r,r.type,r.pendingProps,a);case 7:return zt(t,r,r.pendingProps,a),r.child;case 8:return zt(t,r,r.pendingProps.children,a),r.child;case 12:return zt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,fs(r,r.type,l.value),zt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Oi(r),h=Kt(h),l=l(h),r.flags|=1,zt(t,r,l,a),r.child;case 14:return P0(t,r,r.type,r.pendingProps,a);case 15:return L0(t,r,r.type,r.pendingProps,a);case 19:return G0(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=xu(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Mr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return U0(t,r,a);case 24:return Oi(r),l=Kt(Rt),t===null?(h=Md(),h===null&&(h=tt,m=Dd(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),r.memoizedState={parent:l,cache:h},Vd(r),fs(r,Rt,h)):((t.lanes&a)!==0&&(Pd(t,r),al(r,null,null,a),il()),h=t.memoizedState,m=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),fs(r,Rt,l)):(l=m.cache,fs(r,Rt,l),l!==h.cache&&jd(r,[Rt],a,!0))),zt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Br(t){t.flags|=4}function Y0(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!nv(r)){if(r=jn.current,r!==null&&((ze&4194048)===ze?cr!==null:(ze&62914560)!==ze&&(ze&536870912)===0||r!==cr))throw rl=kd,jp;t.flags|=8192}}function bu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Co():536870912,t.lanes|=r,Va|=r)}function fl(t,r){if(!He)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ot(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function N1(t,r,a){var l=r.pendingProps;switch(Nd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(r),null;case 1:return ot(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Lr(Rt),Xn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Xo(r)?Br(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Sp())),ot(r),null;case 26:return a=r.memoizedState,t===null?(Br(r),a!==null?(ot(r),Y0(r,a)):(ot(r),r.flags&=-16777217)):a?a!==t.memoizedState?(Br(r),ot(r),Y0(r,a)):(ot(r),r.flags&=-16777217):(t.memoizedProps!==l&&Br(r),ot(r),r.flags&=-16777217),null;case 27:br(r),a=ve.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Br(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return ot(r),null}t=fe.current,Xo(r)?wp(r):(t=Yy(h,l,a),r.stateNode=t,Br(r))}return ot(r),null;case 5:if(br(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Br(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return ot(r),null}if(t=fe.current,Xo(r))wp(r);else{switch(h=Mu(ve.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[At]=r,t[pt]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Bt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Br(r)}}return ot(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Br(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=ve.current,Xo(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=nn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[At]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||qy(t.nodeValue,a)),t||ji(r)}else t=Mu(t).createTextNode(l),t[At]=r,r.stateNode=t}return ot(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Xo(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[At]=r}else Wo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),h=!1}else h=Sp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(zr(r),r):(zr(r),null)}if(zr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),bu(r,r.updateQueue),ot(r),null;case 4:return Xn(),t===null&&zf(r.stateNode.containerInfo),ot(r),null;case 10:return Lr(r.type),ot(r),null;case 19:if(le(It),h=r.memoizedState,h===null)return ot(r),null;if(l=(r.flags&128)!==0,m=h.rendering,m===null)if(l)fl(h,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=pu(t),m!==null){for(r.flags|=128,fl(h,!1),t=m.updateQueue,r.updateQueue=t,bu(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Ep(a,t),a=a.sibling;return X(It,It.current&1|2),r.child}t=t.sibling}h.tail!==null&&bn()>wu&&(r.flags|=128,l=!0,fl(h,!1),r.lanes=4194304)}else{if(!l)if(t=pu(m),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,bu(r,t),fl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!He)return ot(r),null}else 2*bn()-h.renderingStartTime>wu&&a!==536870912&&(r.flags|=128,l=!0,fl(h,!1),r.lanes=4194304);h.isBackwards?(m.sibling=r.child,r.child=m):(t=h.last,t!==null?t.sibling=m:r.child=m,h.last=m)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=bn(),r.sibling=null,t=It.current,X(It,l?t&1|2:t&1),r):(ot(r),null);case 22:case 23:return zr(r),qd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ot(r),r.subtreeFlags&6&&(r.flags|=8192)):ot(r),a=r.updateQueue,a!==null&&bu(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&le(Mi),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Lr(Rt),ot(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function R1(t,r){switch(Nd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Lr(Rt),Xn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return br(r),null;case 13:if(zr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Wo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return le(It),null;case 4:return Xn(),null;case 10:return Lr(r.type),null;case 22:case 23:return zr(r),qd(),t!==null&&le(Mi),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Lr(Rt),null;case 25:return null;default:return null}}function $0(t,r){switch(Nd(r),r.tag){case 3:Lr(Rt),Xn();break;case 26:case 27:case 5:br(r);break;case 4:Xn();break;case 13:zr(r);break;case 19:le(It);break;case 10:Lr(r.type);break;case 22:case 23:zr(r),qd(),t!==null&&le(Mi);break;case 24:Lr(Rt)}}function ml(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,x=a.inst;l=m(),x.destroy=l}a=a.next}while(a!==h)}}catch(E){Je(r,r.return,E)}}function xs(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var x=l.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,h=r;var C=a,Q=E;try{Q()}catch(W){Je(h,C,W)}}}l=l.next}while(l!==m)}}catch(W){Je(r,r.return,W)}}function X0(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Pp(r,a)}catch(l){Je(t,t.return,l)}}}function W0(t,r,a){a.props=Vi(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Je(t,r,l)}}function gl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Je(t,r,h)}}function ur(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Je(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Je(t,r,h)}else a.current=null}function Z0(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Je(t,t.return,h)}}function pf(t,r,a){try{var l=t.stateNode;$1(l,t.type,a,r),l[pt]=r}catch(h){Je(t,t.return,h)}}function J0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Rs(t.type)||t.tag===4}function yf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||J0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Rs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ou));else if(l!==4&&(l===27&&Rs(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(vf(t,r,a),t=t.sibling;t!==null;)vf(t,r,a),t=t.sibling}function Eu(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Rs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Eu(t,r,a),t=t.sibling;t!==null;)Eu(t,r,a),t=t.sibling}function ey(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Bt(r,l,a),r[At]=t,r[pt]=a}catch(m){Je(t,t.return,m)}}var Hr=!1,mt=!1,_f=!1,ty=typeof WeakSet=="function"?WeakSet:Set,kt=null;function I1(t,r){if(t=t.containerInfo,Hf=zu,t=dp(t),pd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,E=-1,C=-1,Q=0,W=0,te=t,G=null;t:for(;;){for(var K;te!==a||h!==0&&te.nodeType!==3||(E=x+h),te!==m||l!==0&&te.nodeType!==3||(C=x+l),te.nodeType===3&&(x+=te.nodeValue.length),(K=te.firstChild)!==null;)G=te,te=K;for(;;){if(te===t)break t;if(G===a&&++Q===h&&(E=x),G===m&&++W===l&&(C=x),(K=te.nextSibling)!==null)break;te=G,G=te.parentNode}te=K}a=E===-1||C===-1?null:{start:E,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ff={focusedElem:t,selectionRange:a},zu=!1,kt=r;kt!==null;)if(r=kt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,kt=t;else for(;kt!==null;){switch(r=kt,m=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var we=Vi(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(we,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){Je(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Kf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Kf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,kt=t;break}kt=r.return}}function ny(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:bs(t,a),l&4&&ml(5,a);break;case 1:if(bs(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(x){Je(a,a.return,x)}else{var h=Vi(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(x){Je(a,a.return,x)}}l&64&&X0(a),l&512&&gl(a,a.return);break;case 3:if(bs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Pp(t,r)}catch(x){Je(a,a.return,x)}}break;case 27:r===null&&l&4&&ey(a);case 26:case 5:bs(t,a),r===null&&l&4&&Z0(a),l&512&&gl(a,a.return);break;case 12:bs(t,a);break;case 13:bs(t,a),l&4&&iy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=L1.bind(null,a),n2(t,a))));break;case 22:if(l=a.memoizedState!==null||Hr,!l){r=r!==null&&r.memoizedState!==null||mt,h=Hr;var m=mt;Hr=l,(mt=r)&&!m?Es(t,a,(a.subtreeFlags&8772)!==0):bs(t,a),Hr=h,mt=m}break;case 30:break;default:bs(t,a)}}function ry(t){var r=t.alternate;r!==null&&(t.alternate=null,ry(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&cs(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,sn=!1;function Fr(t,r,a){for(a=a.child;a!==null;)sy(t,r,a),a=a.sibling}function sy(t,r,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(ct,a)}catch{}switch(a.tag){case 26:mt||ur(a,r),Fr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:mt||ur(a,r);var l=it,h=sn;Rs(a.type)&&(it=a.stateNode,sn=!1),Fr(t,r,a),wl(a.stateNode),it=l,sn=h;break;case 5:mt||ur(a,r);case 6:if(l=it,h=sn,it=null,Fr(t,r,a),it=l,sn=h,it!==null)if(sn)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(m){Je(a,r,m)}else try{it.removeChild(a.stateNode)}catch(m){Je(a,r,m)}break;case 18:it!==null&&(sn?(t=it,Gy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Dl(t)):Gy(it,a.stateNode));break;case 4:l=it,h=sn,it=a.stateNode.containerInfo,sn=!0,Fr(t,r,a),it=l,sn=h;break;case 0:case 11:case 14:case 15:mt||xs(2,a,r),mt||xs(4,a,r),Fr(t,r,a);break;case 1:mt||(ur(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&W0(a,r,l)),Fr(t,r,a);break;case 21:Fr(t,r,a);break;case 22:mt=(l=mt)||a.memoizedState!==null,Fr(t,r,a),mt=l;break;default:Fr(t,r,a)}}function iy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Dl(t)}catch(a){Je(r,r.return,a)}}function C1(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new ty),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new ty),r;default:throw Error(i(435,t.tag))}}function xf(t,r){var a=C1(t);r.forEach(function(l){var h=U1.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function mn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,x=r,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(Rs(E.type)){it=E.stateNode,sn=!1;break e}break;case 5:it=E.stateNode,sn=!1;break e;case 3:case 4:it=E.stateNode.containerInfo,sn=!0;break e}E=E.return}if(it===null)throw Error(i(160));sy(m,x,h),it=null,sn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)ay(r,t),r=r.sibling}var zn=null;function ay(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(r,t),gn(t),l&4&&(xs(3,t,t.return),ml(3,t),xs(5,t,t.return));break;case 1:mn(r,t),gn(t),l&512&&(mt||a===null||ur(a,a.return)),l&64&&Hr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=zn;if(mn(r,t),gn(t),l&512&&(mt||a===null||ur(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[hi]||m[At]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),Bt(m,l,a),m[At]=t,dt(m),l=m;break e;case"link":var x=ev("link","href",h).get(l+(a.href||""));if(x){for(var E=0;E<x.length;E++)if(m=x[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(E,1);break t}}m=h.createElement(l),Bt(m,l,a),h.head.appendChild(m);break;case"meta":if(x=ev("meta","content",h).get(l+(a.content||""))){for(E=0;E<x.length;E++)if(m=x[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(E,1);break t}}m=h.createElement(l),Bt(m,l,a),h.head.appendChild(m);break;default:throw Error(i(468,l))}m[At]=t,dt(m),l=m}t.stateNode=l}else tv(h,t.type,t.stateNode);else t.stateNode=Jy(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?tv(h,t.type,t.stateNode):Jy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&pf(t,t.memoizedProps,a.memoizedProps)}break;case 27:mn(r,t),gn(t),l&512&&(mt||a===null||ur(a,a.return)),a!==null&&l&4&&pf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(mn(r,t),gn(t),l&512&&(mt||a===null||ur(a,a.return)),t.flags&32){h=t.stateNode;try{Tn(h,"")}catch(K){Je(t,t.return,K)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,pf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(_f=!0);break;case 6:if(mn(r,t),gn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(K){Je(t,t.return,K)}}break;case 3:if(Pu=null,h=zn,zn=ku(r.containerInfo),mn(r,t),zn=h,gn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Dl(r.containerInfo)}catch(K){Je(t,t.return,K)}_f&&(_f=!1,oy(t));break;case 4:l=zn,zn=ku(t.stateNode.containerInfo),mn(r,t),gn(t),zn=l;break;case 12:mn(r,t),gn(t);break;case 13:mn(r,t),gn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Sf=bn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xf(t,l)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,Q=Hr,W=mt;if(Hr=Q||h,mt=W||C,mn(r,t),mt=W,Hr=Q,gn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||C||Hr||mt||Pi(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){C=a=r;try{if(m=C.stateNode,h)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=C.stateNode;var te=C.memoizedProps.style,G=te!=null&&te.hasOwnProperty("display")?te.display:null;E.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(K){Je(C,C.return,K)}}}else if(r.tag===6){if(a===null){C=r;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(K){Je(C,C.return,K)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,xf(t,a))));break;case 19:mn(r,t),gn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xf(t,l)));break;case 30:break;case 21:break;default:mn(r,t),gn(t)}}function gn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(J0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,m=yf(t);Eu(t,m,h);break;case 5:var x=a.stateNode;a.flags&32&&(Tn(x,""),a.flags&=-33);var E=yf(t);Eu(t,E,x);break;case 3:case 4:var C=a.stateNode.containerInfo,Q=yf(t);vf(t,Q,C);break;default:throw Error(i(161))}}catch(W){Je(t,t.return,W)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function oy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;oy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function bs(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)ny(t,r.alternate,r),r=r.sibling}function Pi(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:xs(4,r,r.return),Pi(r);break;case 1:ur(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&W0(r,r.return,a),Pi(r);break;case 27:wl(r.stateNode);case 26:case 5:ur(r,r.return),Pi(r);break;case 22:r.memoizedState===null&&Pi(r);break;case 30:Pi(r);break;default:Pi(r)}t=t.sibling}}function Es(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,m=r,x=m.flags;switch(m.tag){case 0:case 11:case 15:Es(h,m,a),ml(4,m);break;case 1:if(Es(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(Q){Je(l,l.return,Q)}if(l=m,h=l.updateQueue,h!==null){var E=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)Vp(C[h],E)}catch(Q){Je(l,l.return,Q)}}a&&x&64&&X0(m),gl(m,m.return);break;case 27:ey(m);case 26:case 5:Es(h,m,a),a&&l===null&&x&4&&Z0(m),gl(m,m.return);break;case 12:Es(h,m,a);break;case 13:Es(h,m,a),a&&x&4&&iy(h,m);break;case 22:m.memoizedState===null&&Es(h,m,a),gl(m,m.return);break;case 30:break;default:Es(h,m,a)}r=r.sibling}}function bf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&el(a))}function Ef(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&el(t))}function hr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ly(t,r,a,l),r=r.sibling}function ly(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:hr(t,r,a,l),h&2048&&ml(9,r);break;case 1:hr(t,r,a,l);break;case 3:hr(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&el(t)));break;case 12:if(h&2048){hr(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,x=m.id,E=m.onPostCommit;typeof E=="function"&&E(x,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){Je(r,r.return,C)}}else hr(t,r,a,l);break;case 13:hr(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,x=r.alternate,r.memoizedState!==null?m._visibility&2?hr(t,r,a,l):pl(t,r):m._visibility&2?hr(t,r,a,l):(m._visibility|=2,Oa(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&bf(x,r);break;case 24:hr(t,r,a,l),h&2048&&Ef(r.alternate,r);break;default:hr(t,r,a,l)}}function Oa(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=t,x=r,E=a,C=l,Q=x.flags;switch(x.tag){case 0:case 11:case 15:Oa(m,x,E,C,h),ml(8,x);break;case 23:break;case 22:var W=x.stateNode;x.memoizedState!==null?W._visibility&2?Oa(m,x,E,C,h):pl(m,x):(W._visibility|=2,Oa(m,x,E,C,h)),h&&Q&2048&&bf(x.alternate,x);break;case 24:Oa(m,x,E,C,h),h&&Q&2048&&Ef(x.alternate,x);break;default:Oa(m,x,E,C,h)}r=r.sibling}}function pl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:pl(a,l),h&2048&&bf(l.alternate,l);break;case 24:pl(a,l),h&2048&&Ef(l.alternate,l);break;default:pl(a,l)}r=r.sibling}}var yl=8192;function Ma(t){if(t.subtreeFlags&yl)for(t=t.child;t!==null;)cy(t),t=t.sibling}function cy(t){switch(t.tag){case 26:Ma(t),t.flags&yl&&t.memoizedState!==null&&g2(zn,t.memoizedState,t.memoizedProps);break;case 5:Ma(t);break;case 3:case 4:var r=zn;zn=ku(t.stateNode.containerInfo),Ma(t),zn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=yl,yl=16777216,Ma(t),yl=r):Ma(t));break;default:Ma(t)}}function uy(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function vl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];kt=l,dy(l,t)}uy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hy(t),t=t.sibling}function hy(t){switch(t.tag){case 0:case 11:case 15:vl(t),t.flags&2048&&xs(9,t,t.return);break;case 3:vl(t);break;case 12:vl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Tu(t)):vl(t);break;default:vl(t)}}function Tu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];kt=l,dy(l,t)}uy(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:xs(8,r,r.return),Tu(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Tu(r));break;default:Tu(r)}t=t.sibling}}function dy(t,r){for(;kt!==null;){var a=kt;switch(a.tag){case 0:case 11:case 15:xs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:el(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,kt=l;else e:for(a=t;kt!==null;){l=kt;var h=l.sibling,m=l.return;if(ry(l),l===a){kt=null;break e}if(h!==null){h.return=m,kt=h;break e}kt=m}}}var j1={getCacheForType:function(t){var r=Kt(Rt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},D1=typeof WeakMap=="function"?WeakMap:Map,Ke=0,tt=null,Oe=null,ze=0,Ye=0,pn=null,Ts=!1,ka=!1,Tf=!1,Qr=0,ht=0,ws=0,Li=0,wf=0,Dn=0,Va=0,_l=null,an=null,Af=!1,Sf=0,wu=1/0,Au=null,As=null,qt=0,Ss=null,Pa=null,La=0,Nf=0,Rf=null,fy=null,xl=0,If=null;function yn(){if((Ke&2)!==0&&ze!==0)return ze&-ze;if(H.T!==null){var t=Aa;return t!==0?t:Vf()}return os()}function my(){Dn===0&&(Dn=(ze&536870912)===0||He?Io():536870912);var t=jn.current;return t!==null&&(t.flags|=32),Dn}function vn(t,r,a){(t===tt&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&(Ua(t,0),Ns(t,ze,Dn,!1)),Tr(t,a),((Ke&2)===0||t!==tt)&&(t===tt&&((Ke&2)===0&&(Li|=a),ht===4&&Ns(t,ze,Dn,!1)),dr(t))}function gy(t,r,a){if((Ke&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||ui(t,r),h=l?k1(t,r):Df(t,r,!0),m=l;do{if(h===0){ka&&!l&&Ns(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!O1(a)){h=Df(t,r,!1),m=!1;continue}if(h===2){if(m=r,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var E=t;h=_l;var C=E.current.memoizedState.isDehydrated;if(C&&(Ua(E,x).flags|=256),x=Df(E,x,!1),x!==2){if(Tf&&!C){E.errorRecoveryDisabledLanes|=m,Li|=m,h=4;break e}m=an,an=h,m!==null&&(an===null?an=m:an.push.apply(an,m))}h=x}if(m=!1,h!==2)continue}}if(h===1){Ua(t,0),Ns(t,r,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ns(l,r,Dn,!Ts);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(h=Sf+300-bn(),10<h)){if(Ns(l,r,Dn,!Ts),na(l,0,!0)!==0)break e;l.timeoutHandle=Fy(py.bind(null,l,a,an,Au,Af,r,Dn,Li,Va,Ts,m,2,-0,0),h);break e}py(l,a,an,Au,Af,r,Dn,Li,Va,Ts,m,0,-0,0)}}break}while(!0);dr(t)}function py(t,r,a,l,h,m,x,E,C,Q,W,te,G,K){if(t.timeoutHandle=-1,te=r.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Nl={stylesheets:null,count:0,unsuspend:m2},cy(r),te=p2(),te!==null)){t.cancelPendingCommit=te(Ty.bind(null,t,r,m,a,l,h,x,E,C,W,1,G,K)),Ns(t,m,x,!Q);return}Ty(t,r,m,a,l,h,x,E,C)}function O1(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!dn(m(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ns(t,r,a,l){r&=~wf,r&=~Li,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var m=31-Gt(h),x=1<<m;l[m]=-1,h&=~x}a!==0&&Wn(t,a,r)}function Su(){return(Ke&6)===0?(bl(0),!1):!0}function Cf(){if(Oe!==null){if(Ye===0)var t=Oe.return;else t=Oe,Pr=Di=null,Gd(t),ja=null,hl=0,t=Oe;for(;t!==null;)$0(t.alternate,t),t=t.return;Oe=null}}function Ua(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,W1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Cf(),tt=t,Oe=a=Mr(t.current,null),ze=r,Ye=0,pn=null,Ts=!1,ka=ui(t,r),Tf=!1,Va=Dn=wf=Li=ws=ht=0,an=_l=null,Af=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Gt(l),m=1<<h;r|=t[h],l&=~m}return Qr=r,Yc(),a}function yy(t,r){Ie=null,H.H=fu,r===nl||r===ru?(r=Mp(),Ye=3):r===jp?(r=Mp(),Ye=4):Ye=r===k0?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,pn=r,Oe===null&&(ht=1,vu(t,Nn(r,t.current)))}function vy(){var t=H.H;return H.H=fu,t===null?fu:t}function _y(){var t=H.A;return H.A=j1,t}function jf(){ht=4,Ts||(ze&4194048)!==ze&&jn.current!==null||(ka=!0),(ws&134217727)===0&&(Li&134217727)===0||tt===null||Ns(tt,ze,Dn,!1)}function Df(t,r,a){var l=Ke;Ke|=2;var h=vy(),m=_y();(tt!==t||ze!==r)&&(Au=null,Ua(t,r)),r=!1;var x=ht;e:do try{if(Ye!==0&&Oe!==null){var E=Oe,C=pn;switch(Ye){case 8:Cf(),x=6;break e;case 3:case 2:case 9:case 6:jn.current===null&&(r=!0);var Q=Ye;if(Ye=0,pn=null,za(t,E,C,Q),a&&ka){x=0;break e}break;default:Q=Ye,Ye=0,pn=null,za(t,E,C,Q)}}M1(),x=ht;break}catch(W){yy(t,W)}while(!0);return r&&t.shellSuspendCounter++,Pr=Di=null,Ke=l,H.H=h,H.A=m,Oe===null&&(tt=null,ze=0,Yc()),x}function M1(){for(;Oe!==null;)xy(Oe)}function k1(t,r){var a=Ke;Ke|=2;var l=vy(),h=_y();tt!==t||ze!==r?(Au=null,wu=bn()+500,Ua(t,r)):ka=ui(t,r);e:do try{if(Ye!==0&&Oe!==null){r=Oe;var m=pn;t:switch(Ye){case 1:Ye=0,pn=null,za(t,r,m,1);break;case 2:case 9:if(Dp(m)){Ye=0,pn=null,by(r);break}r=function(){Ye!==2&&Ye!==9||tt!==t||(Ye=7),dr(t)},m.then(r,r);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Dp(m)?(Ye=0,pn=null,by(r)):(Ye=0,pn=null,za(t,r,m,7));break;case 5:var x=null;switch(Oe.tag){case 26:x=Oe.memoizedState;case 5:case 27:var E=Oe;if(!x||nv(x)){Ye=0,pn=null;var C=E.sibling;if(C!==null)Oe=C;else{var Q=E.return;Q!==null?(Oe=Q,Nu(Q)):Oe=null}break t}}Ye=0,pn=null,za(t,r,m,5);break;case 6:Ye=0,pn=null,za(t,r,m,6);break;case 8:Cf(),ht=6;break e;default:throw Error(i(462))}}V1();break}catch(W){yy(t,W)}while(!0);return Pr=Di=null,H.H=l,H.A=h,Ke=a,Oe!==null?0:(tt=null,ze=0,Yc(),ht)}function V1(){for(;Oe!==null&&!Ao();)xy(Oe)}function xy(t){var r=K0(t.alternate,t,Qr);t.memoizedProps=t.pendingProps,r===null?Nu(t):Oe=r}function by(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=q0(a,r,r.pendingProps,r.type,void 0,ze);break;case 11:r=q0(a,r,r.pendingProps,r.type.render,r.ref,ze);break;case 5:Gd(r);default:$0(a,r),r=Oe=Ep(r,Qr),r=K0(a,r,Qr)}t.memoizedProps=t.pendingProps,r===null?Nu(t):Oe=r}function za(t,r,a,l){Pr=Di=null,Gd(r),ja=null,hl=0;var h=r.return;try{if(A1(t,h,r,a,ze)){ht=1,vu(t,Nn(a,t.current)),Oe=null;return}}catch(m){if(h!==null)throw Oe=h,m;ht=1,vu(t,Nn(a,t.current)),Oe=null;return}r.flags&32768?(He||l===1?t=!0:ka||(ze&536870912)!==0?t=!1:(Ts=t=!0,(l===2||l===9||l===3||l===6)&&(l=jn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Ey(r,t)):Nu(r)}function Nu(t){var r=t;do{if((r.flags&32768)!==0){Ey(r,Ts);return}t=r.return;var a=N1(r.alternate,r,Qr);if(a!==null){Oe=a;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=t}while(r!==null);ht===0&&(ht=5)}function Ey(t,r){do{var a=R1(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);ht=6,Oe=null}function Ty(t,r,a,l,h,m,x,E,C){t.cancelPendingCommit=null;do Ru();while(qt!==0);if((Ke&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=bd,jo(t,a,m,x,E,C),t===tt&&(Oe=tt=null,ze=0),Pa=r,Ss=t,La=a,Nf=m,Rf=h,fy=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,z1(ai,function(){return Ry(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,h=ie.p,ie.p=2,x=Ke,Ke|=4;try{I1(t,r,a)}finally{Ke=x,ie.p=h,H.T=l}}qt=1,wy(),Ay(),Sy()}}function wy(){if(qt===1){qt=0;var t=Ss,r=Pa,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var l=ie.p;ie.p=2;var h=Ke;Ke|=4;try{ay(r,t);var m=Ff,x=dp(t.containerInfo),E=m.focusedElem,C=m.selectionRange;if(x!==E&&E&&E.ownerDocument&&hp(E.ownerDocument.documentElement,E)){if(C!==null&&pd(E)){var Q=C.start,W=C.end;if(W===void 0&&(W=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(W,E.value.length);else{var te=E.ownerDocument||document,G=te&&te.defaultView||window;if(G.getSelection){var K=G.getSelection(),we=E.textContent.length,_e=Math.min(C.start,we),Ze=C.end===void 0?_e:Math.min(C.end,we);!K.extend&&_e>Ze&&(x=Ze,Ze=_e,_e=x);var z=up(E,_e),k=up(E,Ze);if(z&&k&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==k.node||K.focusOffset!==k.offset)){var F=te.createRange();F.setStart(z.node,z.offset),K.removeAllRanges(),_e>Ze?(K.addRange(F),K.extend(k.node,k.offset)):(F.setEnd(k.node,k.offset),K.addRange(F))}}}}for(te=[],K=E;K=K.parentNode;)K.nodeType===1&&te.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<te.length;E++){var J=te[E];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}zu=!!Hf,Ff=Hf=null}finally{Ke=h,ie.p=l,H.T=a}}t.current=r,qt=2}}function Ay(){if(qt===2){qt=0;var t=Ss,r=Pa,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var l=ie.p;ie.p=2;var h=Ke;Ke|=4;try{ny(t,r.alternate,r)}finally{Ke=h,ie.p=l,H.T=a}}qt=3}}function Sy(){if(qt===4||qt===3){qt=0,Tc();var t=Ss,r=Pa,a=La,l=fy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?qt=5:(qt=0,Pa=Ss=null,Ny(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(As=null),ra(a),r=r.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(ct,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=H.T,h=ie.p,ie.p=2,H.T=null;try{for(var m=t.onRecoverableError,x=0;x<l.length;x++){var E=l[x];m(E.value,{componentStack:E.stack})}}finally{H.T=r,ie.p=h}}(La&3)!==0&&Ru(),dr(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===If?xl++:(xl=0,If=t):xl=0,bl(0)}}function Ny(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,el(r)))}function Ru(t){return wy(),Ay(),Sy(),Ry()}function Ry(){if(qt!==5)return!1;var t=Ss,r=Nf;Nf=0;var a=ra(La),l=H.T,h=ie.p;try{ie.p=32>a?32:a,H.T=null,a=Rf,Rf=null;var m=Ss,x=La;if(qt=0,Pa=Ss=null,La=0,(Ke&6)!==0)throw Error(i(331));var E=Ke;if(Ke|=4,hy(m.current),ly(m,m.current,x,a),Ke=E,bl(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(ct,m)}catch{}return!0}finally{ie.p=h,H.T=l,Ny(t,r)}}function Iy(t,r,a){r=Nn(a,r),r=of(t.stateNode,r,2),t=ps(t,r,2),t!==null&&(Tr(t,2),dr(t))}function Je(t,r,a){if(t.tag===3)Iy(t,t,a);else for(;r!==null;){if(r.tag===3){Iy(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(As===null||!As.has(l))){t=Nn(a,t),a=O0(2),l=ps(r,a,2),l!==null&&(M0(a,l,r,t),Tr(l,2),dr(l));break}}r=r.return}}function Of(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new D1;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Tf=!0,h.add(a),t=P1.bind(null,t,r,a),r.then(t,t))}function P1(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,tt===t&&(ze&a)===a&&(ht===4||ht===3&&(ze&62914560)===ze&&300>bn()-Sf?(Ke&2)===0&&Ua(t,0):wf|=a,Va===ze&&(Va=0)),dr(t)}function Cy(t,r){r===0&&(r=Co()),t=ba(t,r),t!==null&&(Tr(t,r),dr(t))}function L1(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Cy(t,a)}function U1(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),Cy(t,a)}function z1(t,r){return si(t,r)}var Iu=null,qa=null,Mf=!1,Cu=!1,kf=!1,Ui=0;function dr(t){t!==qa&&t.next===null&&(qa===null?Iu=qa=t:qa=qa.next=t),Cu=!0,Mf||(Mf=!0,B1())}function bl(t,r){if(!kf&&Cu){kf=!0;do for(var a=!1,l=Iu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var x=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-Gt(42|t)+1)-1,m&=h&~(x&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,My(l,m))}else m=ze,m=na(l,l===tt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ui(l,m)||(a=!0,My(l,m));l=l.next}while(a);kf=!1}}function q1(){jy()}function jy(){Cu=Mf=!1;var t=0;Ui!==0&&(X1()&&(t=Ui),Ui=0);for(var r=bn(),a=null,l=Iu;l!==null;){var h=l.next,m=Dy(l,r);m===0?(l.next=null,a===null?Iu=h:a.next=h,h===null&&(qa=a)):(a=l,(t!==0||(m&3)!==0)&&(Cu=!0)),l=h}bl(t)}function Dy(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-Gt(m),E=1<<x,C=h[x];C===-1?((E&a)===0||(E&l)!==0)&&(h[x]=Ro(E,r)):C<=r&&(t.expiredLanes|=E),m&=~E}if(r=tt,a=ze,a=na(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ii(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ui(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&ii(l),ra(a)){case 2:case 8:a=ea;break;case 32:a=ai;break;case 268435456:a=ta;break;default:a=ai}return l=Oy.bind(null,t),a=si(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&ii(l),t.callbackPriority=2,t.callbackNode=null,2}function Oy(t,r){if(qt!==0&&qt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ru()&&t.callbackNode!==a)return null;var l=ze;return l=na(t,t===tt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(gy(t,l,r),Dy(t,bn()),t.callbackNode!=null&&t.callbackNode===a?Oy.bind(null,t):null)}function My(t,r){if(Ru())return null;gy(t,r,!0)}function B1(){Z1(function(){(Ke&6)!==0?si(So,q1):jy()})}function Vf(){return Ui===0&&(Ui=Io()),Ui}function ky(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ca(""+t)}function Vy(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function H1(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var m=ky((h[pt]||null).action),x=l.submitter;x&&(r=(r=x[pt]||null)?ky(r.formAction):x.getAttribute("formAction"),r!==null&&(m=r,x=null));var E=new ua("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ui!==0){var C=x?Vy(h,x):new FormData(h);tf(a,{pending:!0,data:C,method:h.method,action:m},null,C)}}else typeof m=="function"&&(E.preventDefault(),C=x?Vy(h,x):new FormData(h),tf(a,{pending:!0,data:C,method:h.method,action:m},m,C))},currentTarget:h}]})}}for(var Pf=0;Pf<xd.length;Pf++){var Lf=xd[Pf],F1=Lf.toLowerCase(),Q1=Lf[0].toUpperCase()+Lf.slice(1);Un(F1,"on"+Q1)}Un(gp,"onAnimationEnd"),Un(pp,"onAnimationIteration"),Un(yp,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(l1,"onTransitionRun"),Un(c1,"onTransitionStart"),Un(u1,"onTransitionCancel"),Un(vp,"onTransitionEnd"),Ar("onMouseEnter",["mouseout","mouseover"]),Ar("onMouseLeave",["mouseout","mouseover"]),Ar("onPointerEnter",["pointerout","pointerover"]),Ar("onPointerLeave",["pointerout","pointerover"]),Pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function Py(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var x=l.length-1;0<=x;x--){var E=l[x],C=E.instance,Q=E.currentTarget;if(E=E.listener,C!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=Q;try{m(h)}catch(W){yu(W)}h.currentTarget=null,m=C}else for(x=0;x<l.length;x++){if(E=l[x],C=E.instance,Q=E.currentTarget,E=E.listener,C!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=Q;try{m(h)}catch(W){yu(W)}h.currentTarget=null,m=C}}}}function Me(t,r){var a=r[Oo];a===void 0&&(a=r[Oo]=new Set);var l=t+"__bubble";a.has(l)||(Ly(r,t,2,!1),a.add(l))}function Uf(t,r,a){var l=0;r&&(l|=4),Ly(a,t,l,r)}var ju="_reactListening"+Math.random().toString(36).slice(2);function zf(t){if(!t[ju]){t[ju]=!0,Mo.forEach(function(a){a!=="selectionchange"&&(G1.has(a)||Uf(a,!1,t),Uf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[ju]||(r[ju]=!0,Uf("selectionchange",!1,r))}}function Ly(t,r,a,l){switch(lv(r)){case 2:var h=_2;break;case 8:h=x2;break;default:h=em}a=h.bind(null,r,a,t),h=void 0,!An||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function qf(t,r,a,l,h){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var E=l.stateNode.containerInfo;if(E===h)break;if(x===4)for(x=l.return;x!==null;){var C=x.tag;if((C===3||C===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;E!==null;){if(x=wr(E),x===null)return;if(C=x.tag,C===5||C===6||C===26||C===27){l=m=x;continue e}E=E.parentNode}}l=l.return}Oc(function(){var Q=m,W=wn(a),te=[];e:{var G=_p.get(t);if(G!==void 0){var K=ua,we=t;switch(t){case"keypress":if(rr(a)===0)break e;case"keydown":case"keyup":K=pa;break;case"focusin":we="focus",K=fa;break;case"focusout":we="blur",K=fa;break;case"beforeblur":case"afterblur":K=fa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=qc;break;case gp:case pp:case yp:K=ma;break;case vp:K=Hc;break;case"scroll":case"scrollend":K=Mc;break;case"wheel":K=ya;break;case"copy":case"cut":case"paste":K=ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Go;break;case"toggle":case"beforetoggle":K=Qc}var _e=(r&4)!==0,Ze=!_e&&(t==="scroll"||t==="scrollend"),z=_e?G!==null?G+"Capture":null:G;_e=[];for(var k=Q,F;k!==null;){var J=k;if(F=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||F===null||z===null||(J=vi(k,z),J!=null&&_e.push(Tl(k,J,F))),Ze)break;k=k.return}0<_e.length&&(G=new K(G,we,null,a,W),te.push({event:G,listeners:_e}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",G&&a!==Rr&&(we=a.relatedTarget||a.fromElement)&&(wr(we)||we[En]))break e;if((K||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,K?(we=a.relatedTarget||a.toElement,K=Q,we=we?wr(we):null,we!==null&&(Ze=c(we),_e=we.tag,we!==Ze||_e!==5&&_e!==27&&_e!==6)&&(we=null)):(K=null,we=Q),K!==we)){if(_e=Sn,J="onMouseLeave",z="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(_e=Go,J="onPointerLeave",z="onPointerEnter",k="pointer"),Ze=K==null?G:Jn(K),F=we==null?G:Jn(we),G=new _e(J,k+"leave",K,a,W),G.target=Ze,G.relatedTarget=F,J=null,wr(W)===Q&&(_e=new _e(z,k+"enter",we,a,W),_e.target=F,_e.relatedTarget=Ze,J=_e),Ze=J,K&&we)t:{for(_e=K,z=we,k=0,F=_e;F;F=Ba(F))k++;for(F=0,J=z;J;J=Ba(J))F++;for(;0<k-F;)_e=Ba(_e),k--;for(;0<F-k;)z=Ba(z),F--;for(;k--;){if(_e===z||z!==null&&_e===z.alternate)break t;_e=Ba(_e),z=Ba(z)}_e=null}else _e=null;K!==null&&Uy(te,G,K,_e,!1),we!==null&&Ze!==null&&Uy(te,Ze,we,_e,!0)}}e:{if(G=Q?Jn(Q):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var me=sp;else if(Nt(G))if(ip)me=i1;else{me=r1;var De=n1}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?Q&&Uo(Q.elementType)&&(me=sp):me=s1;if(me&&(me=me(t,Q))){Or(te,me,a,W);break e}De&&De(t,G,Q),t==="focusout"&&Q&&G.type==="number"&&Q.memoizedProps.value!=null&&hs(G,"number",G.value)}switch(De=Q?Jn(Q):window,t){case"focusin":(Nt(De)||De.contentEditable==="true")&&(va=De,yd=Q,$o=null);break;case"focusout":$o=yd=va=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,fp(te,a,W);break;case"selectionchange":if(o1)break;case"keydown":case"keyup":fp(te,a,W)}var pe;if(ar)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Le?$(t,a)&&(xe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(_&&a.locale!=="ko"&&(Le||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Le&&(pe=qo()):(nr=W,ds="value"in nr?nr.value:nr.textContent,Le=!0)),De=Du(Q,xe),0<De.length&&(xe=new Fo(xe,t,null,a,W),te.push({event:xe,listeners:De}),pe?xe.data=pe:(pe=ce(a),pe!==null&&(xe.data=pe)))),(pe=v?St(t,a):Ue(t,a))&&(xe=Du(Q,"onBeforeInput"),0<xe.length&&(De=new Fo("onBeforeInput","beforeinput",null,a,W),te.push({event:De,listeners:xe}),De.data=pe)),H1(te,t,Q,a,W)}Py(te,r)})}function Tl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Du(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=vi(t,a),h!=null&&l.unshift(Tl(t,h,m)),h=vi(t,r),h!=null&&l.push(Tl(t,h,m))),t.tag===3)return l;t=t.return}return[]}function Ba(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Uy(t,r,a,l,h){for(var m=r._reactName,x=[];a!==null&&a!==l;){var E=a,C=E.alternate,Q=E.stateNode;if(E=E.tag,C!==null&&C===l)break;E!==5&&E!==26&&E!==27||Q===null||(C=Q,h?(Q=vi(a,m),Q!=null&&x.unshift(Tl(a,Q,C))):h||(Q=vi(a,m),Q!=null&&x.push(Tl(a,Q,C)))),a=a.return}x.length!==0&&t.push({event:r,listeners:x})}var K1=/\r\n?/g,Y1=/\u0000|\uFFFD/g;function zy(t){return(typeof t=="string"?t:""+t).replace(K1,`
`).replace(Y1,"")}function qy(t,r){return r=zy(r),zy(t)===r}function Ou(){}function We(t,r,a,l,h,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Tn(t,""+l);break;case"className":er(t,"class",l);break;case"tabIndex":er(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":er(t,a,l);break;case"style":Lo(t,l,m);break;case"data":if(r!=="object"){er(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ca(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&We(t,r,"name",h.name,h,null),We(t,r,"formEncType",h.formEncType,h,null),We(t,r,"formMethod",h.formMethod,h,null),We(t,r,"formTarget",h.formTarget,h,null)):(We(t,r,"encType",h.encType,h,null),We(t,r,"method",h.method,h,null),We(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ca(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ou);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ca(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Me("beforetoggle",t),Me("toggle",t),us(t,"popover",l);break;case"xlinkActuate":Lt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Lt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Lt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Lt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Lt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Lt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":us(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ud.get(a)||a,us(t,a,l))}}function Bf(t,r,a,l,h,m){switch(a){case"style":Lo(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&Tn(t,""+l);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ou);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),m=t[pt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):us(t,a,l)}}}function Bt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:We(t,r,m,x,a,null)}}h&&We(t,r,"srcSet",a.srcSet,a,null),l&&We(t,r,"src",a.src,a,null);return;case"input":Me("invalid",t);var E=m=x=h=null,C=null,Q=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":h=W;break;case"type":x=W;break;case"checked":C=W;break;case"defaultChecked":Q=W;break;case"value":m=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:We(t,r,l,W,a,null)}}gi(t,m,E,C,Q,x,h,!1),la(t);return;case"select":Me("invalid",t),l=x=m=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":m=E;break;case"defaultValue":x=E;break;case"multiple":l=E;default:We(t,r,h,E,a,null)}r=m,a=x,t.multiple=!!l,r!=null?Nr(t,!!l,r,!1):a!=null&&Nr(t,!!l,a,!0);return;case"textarea":Me("invalid",t),m=h=l=null;for(x in a)if(a.hasOwnProperty(x)&&(E=a[x],E!=null))switch(x){case"value":l=E;break;case"defaultValue":h=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:We(t,r,x,E,a,null)}pi(t,l,h,m),la(t);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:We(t,r,C,l,a,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(l=0;l<El.length;l++)Me(El[l],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(l=a[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:We(t,r,Q,l,a,null)}return;default:if(Uo(r)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Bf(t,r,W,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&We(t,r,E,l,a,null))}function $1(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,x=null,E=null,C=null,Q=null,W=null;for(K in a){var te=a[K];if(a.hasOwnProperty(K)&&te!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":C=te;default:l.hasOwnProperty(K)||We(t,r,K,null,l,te)}}for(var G in l){var K=l[G];if(te=a[G],l.hasOwnProperty(G)&&(K!=null||te!=null))switch(G){case"type":m=K;break;case"name":h=K;break;case"checked":Q=K;break;case"defaultChecked":W=K;break;case"value":x=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:K!==te&&We(t,r,G,K,l,te)}}hn(t,x,E,C,Q,W,m,h);return;case"select":K=x=E=G=null;for(m in a)if(C=a[m],a.hasOwnProperty(m)&&C!=null)switch(m){case"value":break;case"multiple":K=C;default:l.hasOwnProperty(m)||We(t,r,m,null,l,C)}for(h in l)if(m=l[h],C=a[h],l.hasOwnProperty(h)&&(m!=null||C!=null))switch(h){case"value":G=m;break;case"defaultValue":E=m;break;case"multiple":x=m;default:m!==C&&We(t,r,h,m,l,C)}r=E,a=x,l=K,G!=null?Nr(t,!!a,G,!1):!!l!=!!a&&(r!=null?Nr(t,!!a,r,!0):Nr(t,!!a,a?[]:"",!1));return;case"textarea":K=G=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:We(t,r,E,null,l,h)}for(x in l)if(h=l[x],m=a[x],l.hasOwnProperty(x)&&(h!=null||m!=null))switch(x){case"value":G=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&We(t,r,x,h,l,m)}$e(t,G,K);return;case"option":for(var we in a)if(G=a[we],a.hasOwnProperty(we)&&G!=null&&!l.hasOwnProperty(we))switch(we){case"selected":t.selected=!1;break;default:We(t,r,we,null,l,G)}for(C in l)if(G=l[C],K=a[C],l.hasOwnProperty(C)&&G!==K&&(G!=null||K!=null))switch(C){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:We(t,r,C,G,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)G=a[_e],a.hasOwnProperty(_e)&&G!=null&&!l.hasOwnProperty(_e)&&We(t,r,_e,null,l,G);for(Q in l)if(G=l[Q],K=a[Q],l.hasOwnProperty(Q)&&G!==K&&(G!=null||K!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,r));break;default:We(t,r,Q,G,l,K)}return;default:if(Uo(r)){for(var Ze in a)G=a[Ze],a.hasOwnProperty(Ze)&&G!==void 0&&!l.hasOwnProperty(Ze)&&Bf(t,r,Ze,void 0,l,G);for(W in l)G=l[W],K=a[W],!l.hasOwnProperty(W)||G===K||G===void 0&&K===void 0||Bf(t,r,W,G,l,K);return}}for(var z in a)G=a[z],a.hasOwnProperty(z)&&G!=null&&!l.hasOwnProperty(z)&&We(t,r,z,null,l,G);for(te in l)G=l[te],K=a[te],!l.hasOwnProperty(te)||G===K||G==null&&K==null||We(t,r,te,G,l,K)}var Hf=null,Ff=null;function Mu(t){return t.nodeType===9?t:t.ownerDocument}function By(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hy(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Qf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Gf=null;function X1(){var t=window.event;return t&&t.type==="popstate"?t===Gf?!1:(Gf=t,!0):(Gf=null,!1)}var Fy=typeof setTimeout=="function"?setTimeout:void 0,W1=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,Z1=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(t){return Qy.resolve(null).then(t).catch(J1)}:Fy;function J1(t){setTimeout(function(){throw t})}function Rs(t){return t==="head"}function Gy(t,r){var a=r,l=0,h=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var x=t.ownerDocument;if(a&1&&wl(x.documentElement),a&2&&wl(x.body),a&4)for(a=x.head,wl(a),x=a.firstChild;x;){var E=x.nextSibling,C=x.nodeName;x[hi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&x.rel.toLowerCase()==="stylesheet"||a.removeChild(x),x=E}}if(h===0){t.removeChild(m),Dl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);Dl(r)}function Kf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Kf(a),cs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function e2(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[hi])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=qn(t.nextSibling),t===null)break}return null}function t2(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=qn(t.nextSibling),t===null))return null;return t}function Yf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function n2(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function qn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var $f=null;function Ky(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function Yy(t,r,a){switch(r=Mu(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function wl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);cs(t)}var On=new Map,$y=new Set;function ku(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Gr=ie.d;ie.d={f:r2,r:s2,D:i2,C:a2,L:o2,m:l2,X:u2,S:c2,M:h2};function r2(){var t=Gr.f(),r=Su();return t||r}function s2(t){var r=Zn(t);r!==null&&r.tag===5&&r.type==="form"?g0(r):Gr.r(t)}var Ha=typeof document>"u"?null:document;function Xy(t,r,a){var l=Ha;if(l&&typeof r=="string"&&r){var h=yt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),$y.has(h)||($y.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Bt(r,"link",t),dt(r),l.head.appendChild(r)))}}function i2(t){Gr.D(t),Xy("dns-prefetch",t,null)}function a2(t,r){Gr.C(t,r),Xy("preconnect",t,r)}function o2(t,r,a){Gr.L(t,r,a);var l=Ha;if(l&&t&&r){var h='link[rel="preload"][as="'+yt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+yt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+yt(a.imageSizes)+'"]')):h+='[href="'+yt(t)+'"]';var m=h;switch(r){case"style":m=Fa(t);break;case"script":m=Qa(t)}On.has(m)||(t=b({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),On.set(m,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Al(m))||r==="script"&&l.querySelector(Sl(m))||(r=l.createElement("link"),Bt(r,"link",t),dt(r),l.head.appendChild(r)))}}function l2(t,r){Gr.m(t,r);var a=Ha;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+yt(l)+'"][href="'+yt(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Qa(t)}if(!On.has(m)&&(t=b({rel:"modulepreload",href:t},r),On.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sl(m)))return}l=a.createElement("link"),Bt(l,"link",t),dt(l),a.head.appendChild(l)}}}function c2(t,r,a){Gr.S(t,r,a);var l=Ha;if(l&&t){var h=Jt(l).hoistableStyles,m=Fa(t);r=r||"default";var x=h.get(m);if(!x){var E={loading:0,preload:null};if(x=l.querySelector(Al(m)))E.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":r},a),(a=On.get(m))&&Xf(t,a);var C=x=l.createElement("link");dt(C),Bt(C,"link",t),C._p=new Promise(function(Q,W){C.onload=Q,C.onerror=W}),C.addEventListener("load",function(){E.loading|=1}),C.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Vu(x,r,l)}x={type:"stylesheet",instance:x,count:1,state:E},h.set(m,x)}}}function u2(t,r){Gr.X(t,r);var a=Ha;if(a&&t){var l=Jt(a).hoistableScripts,h=Qa(t),m=l.get(h);m||(m=a.querySelector(Sl(h)),m||(t=b({src:t,async:!0},r),(r=On.get(h))&&Wf(t,r),m=a.createElement("script"),dt(m),Bt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function h2(t,r){Gr.M(t,r);var a=Ha;if(a&&t){var l=Jt(a).hoistableScripts,h=Qa(t),m=l.get(h);m||(m=a.querySelector(Sl(h)),m||(t=b({src:t,async:!0,type:"module"},r),(r=On.get(h))&&Wf(t,r),m=a.createElement("script"),dt(m),Bt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Wy(t,r,a,l){var h=(h=ve.current)?ku(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Fa(a.href),a=Jt(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Fa(a.href);var m=Jt(h).hoistableStyles,x=m.get(t);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=h.querySelector(Al(t)))&&!m._p&&(x.instance=m,x.state.loading=5),On.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},On.set(t,a),m||d2(h,t,a,x.state))),r&&l===null)throw Error(i(528,""));return x}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Qa(a),a=Jt(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Fa(t){return'href="'+yt(t)+'"'}function Al(t){return'link[rel="stylesheet"]['+t+"]"}function Zy(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function d2(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Bt(r,"link",a),dt(r),t.head.appendChild(r))}function Qa(t){return'[src="'+yt(t)+'"]'}function Sl(t){return"script[async]"+t}function Jy(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+yt(a.href)+'"]');if(l)return r.instance=l,dt(l),l;var h=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),dt(l),Bt(l,"style",h),Vu(l,a.precedence,t),r.instance=l;case"stylesheet":h=Fa(a.href);var m=t.querySelector(Al(h));if(m)return r.state.loading|=4,r.instance=m,dt(m),m;l=Zy(a),(h=On.get(h))&&Xf(l,h),m=(t.ownerDocument||t).createElement("link"),dt(m);var x=m;return x._p=new Promise(function(E,C){x.onload=E,x.onerror=C}),Bt(m,"link",l),r.state.loading|=4,Vu(m,a.precedence,t),r.instance=m;case"script":return m=Qa(a.src),(h=t.querySelector(Sl(m)))?(r.instance=h,dt(h),h):(l=a,(h=On.get(m))&&(l=b({},a),Wf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),dt(h),Bt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Vu(l,a.precedence,t));return r.instance}function Vu(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,x=0;x<l.length;x++){var E=l[x];if(E.dataset.precedence===r)m=E;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Xf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Wf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Pu=null;function ev(t,r,a){if(Pu===null){var l=new Map,h=Pu=new Map;h.set(a,l)}else h=Pu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[hi]||m[At]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(r)||"";x=t+x;var E=l.get(x);E?E.push(m):l.set(x,[m])}}return l}function tv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function f2(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function nv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Nl=null;function m2(){}function g2(t,r,a){if(Nl===null)throw Error(i(475));var l=Nl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=Fa(a.href),m=t.querySelector(Al(h));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Lu.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=m,dt(m);return}m=t.ownerDocument||t,a=Zy(a),(h=On.get(h))&&Xf(a,h),m=m.createElement("link"),dt(m);var x=m;x._p=new Promise(function(E,C){x.onload=E,x.onerror=C}),Bt(m,"link",a),r.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Lu.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function p2(){if(Nl===null)throw Error(i(475));var t=Nl;return t.stylesheets&&t.count===0&&Zf(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&Zf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Lu(){if(this.count--,this.count===0){if(this.stylesheets)Zf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Uu=null;function Zf(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Uu=new Map,r.forEach(y2,t),Uu=null,Lu.call(t))}function y2(t,r){if(!(r.state.loading&4)){var a=Uu.get(t);if(a)var l=a.get(null);else{a=new Map,Uu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var x=h[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}h=r.instance,x=h.getAttribute("data-precedence"),m=a.get(x)||l,m===l&&a.set(null,h),a.set(x,h),this.count++,l=Lu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Rl={$$typeof:re,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function v2(t,r,a,l,h,m,x,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Er(0),this.hiddenUpdates=Er(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function rv(t,r,a,l,h,m,x,E,C,Q,W,te){return t=new v2(t,r,a,x,E,C,Q,te),r=1,m===!0&&(r|=24),m=fn(3,null,null,r),t.current=m,m.stateNode=t,r=Dd(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},Vd(m),t}function sv(t){return t?(t=Ea,t):Ea}function iv(t,r,a,l,h,m){h=sv(h),l.context===null?l.context=h:l.pendingContext=h,l=gs(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=ps(t,l,r),a!==null&&(vn(a,t,r),sl(a,t,r))}function av(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Jf(t,r){av(t,r),(t=t.alternate)&&av(t,r)}function ov(t){if(t.tag===13){var r=ba(t,67108864);r!==null&&vn(r,t,67108864),Jf(t,67108864)}}var zu=!0;function _2(t,r,a,l){var h=H.T;H.T=null;var m=ie.p;try{ie.p=2,em(t,r,a,l)}finally{ie.p=m,H.T=h}}function x2(t,r,a,l){var h=H.T;H.T=null;var m=ie.p;try{ie.p=8,em(t,r,a,l)}finally{ie.p=m,H.T=h}}function em(t,r,a,l){if(zu){var h=tm(l);if(h===null)qf(t,r,l,qu,a),cv(t,l);else if(E2(h,t,r,a,l))l.stopPropagation();else if(cv(t,l),r&4&&-1<b2.indexOf(t)){for(;h!==null;){var m=Zn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Vn(m.pendingLanes);if(x!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var C=1<<31-Gt(x);E.entanglements[1]|=C,x&=~C}dr(m),(Ke&6)===0&&(wu=bn()+500,bl(0))}}break;case 13:E=ba(m,2),E!==null&&vn(E,m,2),Su(),Jf(m,2)}if(m=tm(l),m===null&&qf(t,r,l,qu,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else qf(t,r,l,null,a)}}function tm(t){return t=wn(t),nm(t)}var qu=null;function nm(t){if(qu=null,t=wr(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return qu=t,null}function lv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sd()){case So:return 2;case ea:return 8;case ai:case id:return 32;case ta:return 268435456;default:return 32}default:return 32}}var rm=!1,Is=null,Cs=null,js=null,Il=new Map,Cl=new Map,Ds=[],b2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cv(t,r){switch(t){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":Il.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(r.pointerId)}}function jl(t,r,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},r!==null&&(r=Zn(r),r!==null&&ov(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function E2(t,r,a,l,h){switch(r){case"focusin":return Is=jl(Is,t,r,a,l,h),!0;case"dragenter":return Cs=jl(Cs,t,r,a,l,h),!0;case"mouseover":return js=jl(js,t,r,a,l,h),!0;case"pointerover":var m=h.pointerId;return Il.set(m,jl(Il.get(m)||null,t,r,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Cl.set(m,jl(Cl.get(m)||null,t,r,a,l,h)),!0}return!1}function uv(t){var r=wr(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,Sc(t.priority,function(){if(a.tag===13){var l=yn();l=as(l);var h=ba(a,l);h!==null&&vn(h,a,l),Jf(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=tm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Rr=l,a.target.dispatchEvent(l),Rr=null}else return r=Zn(a),r!==null&&ov(r),t.blockedOn=a,!1;r.shift()}return!0}function hv(t,r,a){Bu(t)&&a.delete(r)}function T2(){rm=!1,Is!==null&&Bu(Is)&&(Is=null),Cs!==null&&Bu(Cs)&&(Cs=null),js!==null&&Bu(js)&&(js=null),Il.forEach(hv),Cl.forEach(hv)}function Hu(t,r){t.blockedOn===r&&(t.blockedOn=null,rm||(rm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,T2)))}var Fu=null;function dv(t){Fu!==t&&(Fu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Fu===t&&(Fu=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(nm(l||a)===null)continue;break}var m=Zn(a);m!==null&&(t.splice(r,3),r-=3,tf(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Dl(t){function r(C){return Hu(C,t)}Is!==null&&Hu(Is,t),Cs!==null&&Hu(Cs,t),js!==null&&Hu(js,t),Il.forEach(r),Cl.forEach(r);for(var a=0;a<Ds.length;a++){var l=Ds[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ds.length&&(a=Ds[0],a.blockedOn===null);)uv(a),a.blockedOn===null&&Ds.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],x=h[pt]||null;if(typeof m=="function")x||dv(a);else if(x){var E=null;if(m&&m.hasAttribute("formAction")){if(h=m,x=m[pt]||null)E=x.formAction;else if(nm(h)!==null)continue}else E=x.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),dv(a)}}}function sm(t){this._internalRoot=t}Qu.prototype.render=sm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=yn();iv(a,l,t,r,null,null)},Qu.prototype.unmount=sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;iv(t.current,2,null,t,null,null),Su(),r[En]=null}};function Qu(t){this._internalRoot=t}Qu.prototype.unstable_scheduleHydration=function(t){if(t){var r=os();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Ds.length&&r!==0&&r<Ds[a].priority;a++);Ds.splice(a,0,t),a===0&&uv(t)}};var fv=e.version;if(fv!=="19.1.0")throw Error(i(527,fv,"19.1.0"));ie.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(r),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var w2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gu.isDisabled&&Gu.supportsFiber)try{ct=Gu.inject(w2),Ge=Gu}catch{}}return Ml.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",h=I0,m=C0,x=j0,E=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(E=r.unstable_transitionCallbacks)),r=rv(t,1,!1,null,null,a,l,h,m,x,E,null),t[En]=r.current,zf(t),new sm(r)},Ml.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,h="",m=I0,x=C0,E=j0,C=null,Q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(Q=a.formState)),r=rv(t,1,!0,r,a??null,l,h,m,x,E,C,Q),r.context=sv(null),a=r.current,l=yn(),l=as(l),h=gs(l),h.callback=null,ps(a,h,l),a=l,r.current.lanes=a,Tr(r,a),dr(r),t[En]=r.current,zf(t),new Qu(r)},Ml.version="19.1.0",Ml}var Tv;function V2(){if(Tv)return om.exports;Tv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),om.exports=k2(),om.exports}var P2=V2();/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wv="popstate";function L2(s={}){function e(i,o){let{pathname:c,search:d,hash:g}=i.location;return Sm("",{pathname:c,search:d,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:Yl(o)}return z2(e,n,null,s)}function at(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Qn(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function U2(){return Math.random().toString(36).substring(2,10)}function Av(s,e){return{usr:s.state,key:s.key,idx:e}}function Sm(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?uo(e):e,state:n,key:e&&e.key||i||U2()}}function Yl({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function uo(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function z2(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,d=o.history,g="POP",p=null,y=b();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function b(){return(d.state||{idx:null}).idx}function A(){g="POP";let L=b(),Y=L==null?null:L-y;y=L,p&&p({action:g,location:j.location,delta:Y})}function T(L,Y){g="PUSH";let ae=Sm(j.location,L,Y);y=b()+1;let re=Av(ae,y),ge=j.createHref(ae);try{d.pushState(re,"",ge)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;o.location.assign(ge)}c&&p&&p({action:g,location:j.location,delta:1})}function U(L,Y){g="REPLACE";let ae=Sm(j.location,L,Y);y=b();let re=Av(ae,y),ge=j.createHref(ae);d.replaceState(re,"",ge),c&&p&&p({action:g,location:j.location,delta:0})}function P(L){return q2(L)}let j={get action(){return g},get location(){return s(o,d)},listen(L){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(wv,A),p=L,()=>{o.removeEventListener(wv,A),p=null}},createHref(L){return e(o,L)},createURL:P,encodeLocation(L){let Y=P(L);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:T,replace:U,go(L){return d.go(L)}};return j}function q2(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),at(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Yl(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function ox(s,e,n="/"){return B2(s,e,n,!1)}function B2(s,e,n,i){let o=typeof e=="string"?uo(e):e,c=Wr(o.pathname||"/",n);if(c==null)return null;let d=lx(s);H2(d);let g=null;for(let p=0;g==null&&p<d.length;++p){let y=eT(c);g=Z2(d[p],y,i)}return g}function lx(s,e=[],n=[],i=""){let o=(c,d,g)=>{let p={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};p.relativePath.startsWith("/")&&(at(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let y=$r([i,p.relativePath]),b=n.concat(p);c.children&&c.children.length>0&&(at(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),lx(c.children,e,b,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:X2(y,c.index),routesMeta:b})};return s.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let g of cx(c.path))o(c,d,g)}),e}function cx(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let d=cx(i.join("/")),g=[];return g.push(...d.map(p=>p===""?c:[c,p].join("/"))),o&&g.push(...d),g.map(p=>s.startsWith("/")&&p===""?"/":p)}function H2(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:W2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var F2=/^:[\w-]+$/,Q2=3,G2=2,K2=1,Y2=10,$2=-2,Sv=s=>s==="*";function X2(s,e){let n=s.split("/"),i=n.length;return n.some(Sv)&&(i+=$2),e&&(i+=G2),n.filter(o=>!Sv(o)).reduce((o,c)=>o+(F2.test(c)?Q2:c===""?K2:Y2),i)}function W2(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function Z2(s,e,n=!1){let{routesMeta:i}=s,o={},c="/",d=[];for(let g=0;g<i.length;++g){let p=i[g],y=g===i.length-1,b=c==="/"?e:e.slice(c.length)||"/",A=dh({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},b),T=p.route;if(!A&&y&&n&&!i[i.length-1].route.index&&(A=dh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},b)),!A)return null;Object.assign(o,A.params),d.push({params:o,pathname:$r([c,A.pathname]),pathnameBase:sT($r([c,A.pathnameBase])),route:T}),A.pathnameBase!=="/"&&(c=$r([c,A.pathnameBase]))}return d}function dh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=J2(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:A},T)=>{if(b==="*"){let P=g[T]||"";d=c.slice(0,c.length-P.length).replace(/(.)\/+$/,"$1")}const U=g[T];return A&&!U?y[b]=void 0:y[b]=(U||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:s}}function J2(s,e=!1,n=!0){Qn(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,p)=>(i.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function eT(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qn(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Wr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}function tT(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?uo(s):s;return{pathname:n?n.startsWith("/")?n:nT(n,e):e,search:iT(i),hash:aT(o)}}function nT(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function hm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rT(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function tg(s){let e=rT(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function ng(s,e,n,i=!1){let o;typeof s=="string"?o=uo(s):(o={...s},at(!o.pathname||!o.pathname.includes("?"),hm("?","pathname","search",o)),at(!o.pathname||!o.pathname.includes("#"),hm("#","pathname","hash",o)),at(!o.search||!o.search.includes("#"),hm("#","search","hash",o)));let c=s===""||o.pathname==="",d=c?"/":o.pathname,g;if(d==null)g=n;else{let A=e.length-1;if(!i&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),A-=1;o.pathname=T.join("/")}g=A>=0?e[A]:"/"}let p=tT(o,g),y=d&&d!=="/"&&d.endsWith("/"),b=(c||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||b)&&(p.pathname+="/"),p}var $r=s=>s.join("/").replace(/\/\/+/g,"/"),sT=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),iT=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,aT=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function oT(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var ux=["POST","PUT","PATCH","DELETE"];new Set(ux);var lT=["GET",...ux];new Set(lT);var ho=q.createContext(null);ho.displayName="DataRouter";var Dh=q.createContext(null);Dh.displayName="DataRouterState";q.createContext(!1);var hx=q.createContext({isTransitioning:!1});hx.displayName="ViewTransition";var cT=q.createContext(new Map);cT.displayName="Fetchers";var uT=q.createContext(null);uT.displayName="Await";var Yn=q.createContext(null);Yn.displayName="Navigation";var ac=q.createContext(null);ac.displayName="Location";var $n=q.createContext({outlet:null,matches:[],isDataRoute:!1});$n.displayName="Route";var rg=q.createContext(null);rg.displayName="RouteError";function hT(s,{relative:e}={}){at(fo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=q.useContext(Yn),{hash:o,pathname:c,search:d}=oc(s,{relative:e}),g=c;return n!=="/"&&(g=c==="/"?n:$r([n,c])),i.createHref({pathname:g,search:d,hash:o})}function fo(){return q.useContext(ac)!=null}function rs(){return at(fo(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(ac).location}var dx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fx(s){q.useContext(Yn).static||q.useLayoutEffect(s)}function mo(){let{isDataRoute:s}=q.useContext($n);return s?wT():dT()}function dT(){at(fo(),"useNavigate() may be used only in the context of a <Router> component.");let s=q.useContext(ho),{basename:e,navigator:n}=q.useContext(Yn),{matches:i}=q.useContext($n),{pathname:o}=rs(),c=JSON.stringify(tg(i)),d=q.useRef(!1);return fx(()=>{d.current=!0}),q.useCallback((p,y={})=>{if(Qn(d.current,dx),!d.current)return;if(typeof p=="number"){n.go(p);return}let b=ng(p,JSON.parse(c),o,y.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:$r([e,b.pathname])),(y.replace?n.replace:n.push)(b,y.state,y)},[e,n,c,o,s])}q.createContext(null);function mx(){let{matches:s}=q.useContext($n),e=s[s.length-1];return e?e.params:{}}function oc(s,{relative:e}={}){let{matches:n}=q.useContext($n),{pathname:i}=rs(),o=JSON.stringify(tg(n));return q.useMemo(()=>ng(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function fT(s,e){return gx(s,e)}function gx(s,e,n,i){at(fo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=q.useContext(Yn),{matches:c}=q.useContext($n),d=c[c.length-1],g=d?d.params:{},p=d?d.pathname:"/",y=d?d.pathnameBase:"/",b=d&&d.route;{let Y=b&&b.path||"";px(p,!b||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let A=rs(),T;if(e){let Y=typeof e=="string"?uo(e):e;at(y==="/"||Y.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),T=Y}else T=A;let U=T.pathname||"/",P=U;if(y!=="/"){let Y=y.replace(/^\//,"").split("/");P="/"+U.replace(/^\//,"").split("/").slice(Y.length).join("/")}let j=ox(s,{pathname:P});Qn(b||j!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Qn(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=vT(j&&j.map(Y=>Object.assign({},Y,{params:Object.assign({},g,Y.params),pathname:$r([y,o.encodeLocation?o.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?y:$r([y,o.encodeLocation?o.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),c,n,i);return e&&L?q.createElement(ac.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},L):L}function mT(){let s=TT(),e=oT(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:c},"ErrorBoundary")," or"," ",q.createElement("code",{style:c},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:o},n):null,d)}var gT=q.createElement(mT,null),pT=class extends q.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?q.createElement($n.Provider,{value:this.props.routeContext},q.createElement(rg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yT({routeContext:s,match:e,children:n}){let i=q.useContext(ho);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement($n.Provider,{value:s},n)}function vT(s,e=[],n=null,i=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let o=s,c=n?.errors;if(c!=null){let p=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);at(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,g=-1;if(n)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(g=p),y.route.id){let{loaderData:b,errors:A}=n,T=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||T){d=!0,g>=0?o=o.slice(0,g+1):o=[o[0]];break}}}return o.reduceRight((p,y,b)=>{let A,T=!1,U=null,P=null;n&&(A=c&&y.route.id?c[y.route.id]:void 0,U=y.route.errorElement||gT,d&&(g<0&&b===0?(px("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,P=null):g===b&&(T=!0,P=y.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,b+1)),L=()=>{let Y;return A?Y=U:T?Y=P:y.route.Component?Y=q.createElement(y.route.Component,null):y.route.element?Y=y.route.element:Y=p,q.createElement(yT,{match:y,routeContext:{outlet:p,matches:j,isDataRoute:n!=null},children:Y})};return n&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?q.createElement(pT,{location:n.location,revalidation:n.revalidation,component:U,error:A,children:L(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):L()},null)}function sg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _T(s){let e=q.useContext(ho);return at(e,sg(s)),e}function xT(s){let e=q.useContext(Dh);return at(e,sg(s)),e}function bT(s){let e=q.useContext($n);return at(e,sg(s)),e}function ig(s){let e=bT(s),n=e.matches[e.matches.length-1];return at(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function ET(){return ig("useRouteId")}function TT(){let s=q.useContext(rg),e=xT("useRouteError"),n=ig("useRouteError");return s!==void 0?s:e.errors?.[n]}function wT(){let{router:s}=_T("useNavigate"),e=ig("useNavigate"),n=q.useRef(!1);return fx(()=>{n.current=!0}),q.useCallback(async(o,c={})=>{Qn(n.current,dx),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...c}))},[s,e])}var Nv={};function px(s,e,n){!e&&!Nv[s]&&(Nv[s]=!0,Qn(!1,n))}q.memo(AT);function AT({routes:s,future:e,state:n}){return gx(s,void 0,n,e)}function $l({to:s,replace:e,state:n,relative:i}){at(fo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=q.useContext(Yn);Qn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=q.useContext($n),{pathname:d}=rs(),g=mo(),p=ng(s,tg(c),d,i==="path"),y=JSON.stringify(p);return q.useEffect(()=>{g(JSON.parse(y),{replace:e,state:n,relative:i})},[g,y,i,e,n]),null}function Bn(s){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ST({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:c=!1}){at(!fo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),g=q.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof n=="string"&&(n=uo(n));let{pathname:p="/",search:y="",hash:b="",state:A=null,key:T="default"}=n,U=q.useMemo(()=>{let P=Wr(p,d);return P==null?null:{location:{pathname:P,search:y,hash:b,state:A,key:T},navigationType:i}},[d,p,y,b,A,T,i]);return Qn(U!=null,`<Router basename="${d}"> is not able to match the URL "${p}${y}${b}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:q.createElement(Yn.Provider,{value:g},q.createElement(ac.Provider,{children:e,value:U}))}function NT({children:s,location:e}){return fT(Nm(s),e)}function Nm(s,e=[]){let n=[];return q.Children.forEach(s,(i,o)=>{if(!q.isValidElement(i))return;let c=[...e,o];if(i.type===q.Fragment){n.push.apply(n,Nm(i.props.children,c));return}at(i.type===Bn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Nm(i.props.children,c)),n.push(d)}),n}var eh="get",th="application/x-www-form-urlencoded";function Oh(s){return s!=null&&typeof s.tagName=="string"}function RT(s){return Oh(s)&&s.tagName.toLowerCase()==="button"}function IT(s){return Oh(s)&&s.tagName.toLowerCase()==="form"}function CT(s){return Oh(s)&&s.tagName.toLowerCase()==="input"}function jT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function DT(s,e){return s.button===0&&(!e||e==="_self")&&!jT(s)}var Ku=null;function OT(){if(Ku===null)try{new FormData(document.createElement("form"),0),Ku=!1}catch{Ku=!0}return Ku}var MT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dm(s){return s!=null&&!MT.has(s)?(Qn(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${th}"`),null):s}function kT(s,e){let n,i,o,c,d;if(IT(s)){let g=s.getAttribute("action");i=g?Wr(g,e):null,n=s.getAttribute("method")||eh,o=dm(s.getAttribute("enctype"))||th,c=new FormData(s)}else if(RT(s)||CT(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||g.getAttribute("action");if(i=p?Wr(p,e):null,n=s.getAttribute("formmethod")||g.getAttribute("method")||eh,o=dm(s.getAttribute("formenctype"))||dm(g.getAttribute("enctype"))||th,c=new FormData(g,s),!OT()){let{name:y,type:b,value:A}=s;if(b==="image"){let T=y?`${y}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else y&&c.append(y,A)}}else{if(Oh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=eh,i=null,o=th,d=s}return c&&o==="text/plain"&&(d=c,c=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ag(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function VT(s,e,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Wr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function PT(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function UT(s,e,n){let i=await Promise.all(s.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await PT(c,n);return d.links?d.links():[]}return[]}));return HT(i.flat(1).filter(LT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Rv(s,e,n,i,o,c){let d=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,g=(p,y)=>n[y].pathname!==p.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==p.params["*"];return c==="assets"?e.filter((p,y)=>d(p,y)||g(p,y)):c==="data"?e.filter((p,y)=>{let b=i.routes[p.route.id];if(!b||!b.hasLoader)return!1;if(d(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let A=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function zT(s,e,{includeHydrateFallback:n}={}){return qT(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function qT(s){return[...new Set(s)]}function BT(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function HT(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let c=JSON.stringify(BT(o));return n.has(c)||(n.add(c),i.push({key:c,link:o})),i},[])}function yx(){let s=q.useContext(ho);return ag(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function FT(){let s=q.useContext(Dh);return ag(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var og=q.createContext(void 0);og.displayName="FrameworkContext";function vx(){let s=q.useContext(og);return ag(s,"You must render this element inside a <HydratedRouter> element"),s}function QT(s,e){let n=q.useContext(og),[i,o]=q.useState(!1),[c,d]=q.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:b,onTouchStart:A}=e,T=q.useRef(null);q.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let j=Y=>{Y.forEach(ae=>{d(ae.isIntersecting)})},L=new IntersectionObserver(j,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[s]),q.useEffect(()=>{if(i){let j=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(j)}}},[i]);let U=()=>{o(!0)},P=()=>{o(!1),d(!1)};return n?s!=="intent"?[c,T,{}]:[c,T,{onFocus:kl(g,U),onBlur:kl(p,P),onMouseEnter:kl(y,U),onMouseLeave:kl(b,P),onTouchStart:kl(A,U)}]:[!1,T,{}]}function kl(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function GT({page:s,...e}){let{router:n}=yx(),i=q.useMemo(()=>ox(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?q.createElement(YT,{page:s,matches:i,...e}):null}function KT(s){let{manifest:e,routeModules:n}=vx(),[i,o]=q.useState([]);return q.useEffect(()=>{let c=!1;return UT(s,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[s,e,n]),i}function YT({page:s,matches:e,...n}){let i=rs(),{manifest:o,routeModules:c}=vx(),{basename:d}=yx(),{loaderData:g,matches:p}=FT(),y=q.useMemo(()=>Rv(s,e,p,o,i,"data"),[s,e,p,o,i]),b=q.useMemo(()=>Rv(s,e,p,o,i,"assets"),[s,e,p,o,i]),A=q.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let P=new Set,j=!1;if(e.forEach(Y=>{let ae=o.routes[Y.route.id];!ae||!ae.hasLoader||(!y.some(re=>re.route.id===Y.route.id)&&Y.route.id in g&&c[Y.route.id]?.shouldRevalidate||ae.hasClientLoader?j=!0:P.add(Y.route.id))}),P.size===0)return[];let L=VT(s,d,"data");return j&&P.size>0&&L.searchParams.set("_routes",e.filter(Y=>P.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[L.pathname+L.search]},[d,g,i,o,y,e,s,c]),T=q.useMemo(()=>zT(b,o),[b,o]),U=KT(b);return q.createElement(q.Fragment,null,A.map(P=>q.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...n})),T.map(P=>q.createElement("link",{key:P,rel:"modulepreload",href:P,...n})),U.map(({key:P,link:j})=>q.createElement("link",{key:P,...j})))}function $T(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var _x=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_x&&(window.__reactRouterVersion="7.7.0")}catch{}function XT({basename:s,children:e,window:n}){let i=q.useRef();i.current==null&&(i.current=L2({window:n,v5Compat:!0}));let o=i.current,[c,d]=q.useState({action:o.action,location:o.location}),g=q.useCallback(p=>{q.startTransition(()=>d(p))},[d]);return q.useLayoutEffect(()=>o.listen(g),[o,g]),q.createElement(ST,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:o})}var xx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mn=q.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:c,replace:d,state:g,target:p,to:y,preventScrollReset:b,viewTransition:A,...T},U){let{basename:P}=q.useContext(Yn),j=typeof y=="string"&&xx.test(y),L,Y=!1;if(typeof y=="string"&&j&&(L=y,_x))try{let R=new URL(window.location.href),D=y.startsWith("//")?new URL(R.protocol+y):new URL(y),M=Wr(D.pathname,P);D.origin===R.origin&&M!=null?y=M+D.search+D.hash:Y=!0}catch{Qn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ae=hT(y,{relative:o}),[re,ge,se]=QT(i,T),Ae=ew(y,{replace:d,state:g,target:p,preventScrollReset:b,relative:o,viewTransition:A});function V(R){e&&e(R),R.defaultPrevented||Ae(R)}let I=q.createElement("a",{...T,...se,href:L||ae,onClick:Y||c?e:V,ref:$T(U,ge),target:p,"data-discover":!j&&n==="render"?"true":void 0});return re&&!j?q.createElement(q.Fragment,null,I,q.createElement(GT,{page:ae})):I});Mn.displayName="Link";var WT=q.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:c,to:d,viewTransition:g,children:p,...y},b){let A=oc(d,{relative:y.relative}),T=rs(),U=q.useContext(Dh),{navigator:P,basename:j}=q.useContext(Yn),L=U!=null&&iw(A)&&g===!0,Y=P.encodeLocation?P.encodeLocation(A).pathname:A.pathname,ae=T.pathname,re=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;n||(ae=ae.toLowerCase(),re=re?re.toLowerCase():null,Y=Y.toLowerCase()),re&&j&&(re=Wr(re,j)||re);const ge=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let se=ae===Y||!o&&ae.startsWith(Y)&&ae.charAt(ge)==="/",Ae=re!=null&&(re===Y||!o&&re.startsWith(Y)&&re.charAt(Y.length)==="/"),V={isActive:se,isPending:Ae,isTransitioning:L},I=se?e:void 0,R;typeof i=="function"?R=i(V):R=[i,se?"active":null,Ae?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let D=typeof c=="function"?c(V):c;return q.createElement(Mn,{...y,"aria-current":I,className:R,ref:b,style:D,to:d,viewTransition:g},typeof p=="function"?p(V):p)});WT.displayName="NavLink";var ZT=q.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:c,method:d=eh,action:g,onSubmit:p,relative:y,preventScrollReset:b,viewTransition:A,...T},U)=>{let P=rw(),j=sw(g,{relative:y}),L=d.toLowerCase()==="get"?"get":"post",Y=typeof g=="string"&&xx.test(g),ae=re=>{if(p&&p(re),re.defaultPrevented)return;re.preventDefault();let ge=re.nativeEvent.submitter,se=ge?.getAttribute("formmethod")||d;P(ge||re.currentTarget,{fetcherKey:e,method:se,navigate:n,replace:o,state:c,relative:y,preventScrollReset:b,viewTransition:A})};return q.createElement("form",{ref:U,method:L,action:j,onSubmit:i?p:ae,...T,"data-discover":!Y&&s==="render"?"true":void 0})});ZT.displayName="Form";function JT(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bx(s){let e=q.useContext(ho);return at(e,JT(s)),e}function ew(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:c,viewTransition:d}={}){let g=mo(),p=rs(),y=oc(s,{relative:c});return q.useCallback(b=>{if(DT(b,e)){b.preventDefault();let A=n!==void 0?n:Yl(p)===Yl(y);g(s,{replace:A,state:i,preventScrollReset:o,relative:c,viewTransition:d})}},[p,g,y,n,i,e,s,o,c,d])}var tw=0,nw=()=>`__${String(++tw)}__`;function rw(){let{router:s}=bx("useSubmit"),{basename:e}=q.useContext(Yn),n=ET();return q.useCallback(async(i,o={})=>{let{action:c,method:d,encType:g,formData:p,body:y}=kT(i,e);if(o.navigate===!1){let b=o.fetcherKey||nw();await s.fetch(b,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function sw(s,{relative:e}={}){let{basename:n}=q.useContext(Yn),i=q.useContext($n);at(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...oc(s||".",{relative:e})},d=rs();if(s==null){c.search=d.search;let g=new URLSearchParams(c.search),p=g.getAll("index");if(p.some(b=>b==="")){g.delete("index"),p.filter(A=>A).forEach(A=>g.append("index",A));let b=g.toString();c.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:$r([n,c.pathname])),Yl(c)}function iw(s,e={}){let n=q.useContext(hx);at(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=bx("useViewTransitionState"),o=oc(s,{relative:e.relative});if(!n.isTransitioning)return!1;let c=Wr(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=Wr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return dh(o.pathname,d)!=null||dh(o.pathname,c)!=null}const aw=()=>{};var Iv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},ow=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],d=s[n++],g=s[n++],p=((o&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const c=s[n++],d=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Tx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const c=s[o],d=o+1<s.length,g=d?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,b=c>>2,A=(c&3)<<4|g>>4;let T=(g&15)<<2|y>>6,U=y&63;p||(U=64,d||(T=64)),i.push(n[b],n[A],n[T],n[U])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Ex(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):ow(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const A=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||g==null||y==null||A==null)throw new lw;const T=c<<2|g>>4;if(i.push(T),y!==64){const U=g<<4&240|y>>2;if(i.push(U),A!==64){const P=y<<6&192|A;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class lw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cw=function(s){const e=Ex(s);return Tx.encodeByteArray(e,!0)},fh=function(s){return cw(s).replace(/\./g,"")},wx=function(s){try{return Tx.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=()=>uw().__FIREBASE_DEFAULTS__,dw=()=>{if(typeof process>"u"||typeof Iv>"u")return;const s=Iv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},fw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&wx(s[1]);return e&&JSON.parse(e)},Mh=()=>{try{return aw()||hw()||dw()||fw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Ax=s=>Mh()?.emulatorHosts?.[s],mw=s=>{const e=Ax(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Sx=()=>Mh()?.config,Nx=s=>Mh()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Rx(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[fh(JSON.stringify(n)),fh(JSON.stringify(d)),""].join(".")}const Bl={};function yw(){const s={prod:[],emulator:[]};for(const e of Object.keys(Bl))Bl[e]?s.emulator.push(e):s.prod.push(e);return s}function vw(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Cv=!1;function Ix(s,e){if(typeof window>"u"||typeof document>"u"||!go(window.location.host)||Bl[s]===e||Bl[s]||Cv)return;Bl[s]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",c=yw().prod.length>0;function d(){const T=document.getElementById(i);T&&T.remove()}function g(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,U){T.setAttribute("width","24"),T.setAttribute("id",U),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Cv=!0,d()},T}function b(T,U){T.setAttribute("id",U),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function A(){const T=vw(i),U=n("text"),P=document.getElementById(U)||document.createElement("span"),j=n("learnmore"),L=document.getElementById(j)||document.createElement("a"),Y=n("preprendIcon"),ae=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const re=T.element;g(re),b(L,j);const ge=y();p(ae,Y),re.append(ae,P,L,ge),document.body.appendChild(re)}c?(P.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _w(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function xw(){const s=Mh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ew(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Tw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ww(){const s=Zt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Aw(){return!xw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sw(){try{return typeof indexedDB=="object"}catch{return!1}}function Nw(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="FirebaseError";class ss extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Rw,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lc.prototype.create)}}class lc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?Iw(c,i):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new ss(o,g,i)}}function Iw(s,e){return s.replace(Cw,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Cw=/\{\$([^}]+)}/g;function jw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Qi(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=s[o],d=e[o];if(jv(c)&&jv(d)){if(!Qi(c,d))return!1}else if(c!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function jv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Vl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Pl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function Dw(s,e){const n=new Ow(s,e);return n.subscribe.bind(n)}class Ow{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Mw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=fm),o.error===void 0&&(o.error=fm),o.complete===void 0&&(o.complete=fm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mw(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function fm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(s){return s&&s._delegate?s._delegate:s}class Gi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new gw;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Pw(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);i===g&&d.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Vw(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vw(s){return s===qi?void 0:s}function Pw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ke||(ke={}));const Uw={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},zw=ke.INFO,qw={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Bw=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=qw[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lg{constructor(e){this.name=e,this._logLevel=zw,this._logHandler=Bw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Uw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const Hw=(s,e)=>e.some(n=>s instanceof n);let Dv,Ov;function Fw(){return Dv||(Dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qw(){return Ov||(Ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cx=new WeakMap,Rm=new WeakMap,jx=new WeakMap,mm=new WeakMap,cg=new WeakMap;function Gw(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(zs(s.result)),o()},d=()=>{i(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Cx.set(n,s)}).catch(()=>{}),cg.set(e,s),e}function Kw(s){if(Rm.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});Rm.set(s,e)}let Im={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Rm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||jx.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zs(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Yw(s){Im=s(Im)}function $w(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(gm(this),e,...n);return jx.set(i,e.sort?e.sort():[e]),zs(i)}:Qw().includes(s)?function(...e){return s.apply(gm(this),e),zs(Cx.get(this))}:function(...e){return zs(s.apply(gm(this),e))}}function Xw(s){return typeof s=="function"?$w(s):(s instanceof IDBTransaction&&Kw(s),Hw(s,Fw())?new Proxy(s,Im):s)}function zs(s){if(s instanceof IDBRequest)return Gw(s);if(mm.has(s))return mm.get(s);const e=Xw(s);return e!==s&&(mm.set(s,e),cg.set(e,s)),e}const gm=s=>cg.get(s);function Ww(s,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const d=indexedDB.open(s,e),g=zs(d);return i&&d.addEventListener("upgradeneeded",p=>{i(zs(d.result),p.oldVersion,p.newVersion,zs(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const Zw=["get","getKey","getAll","getAllKeys","count"],Jw=["put","add","delete","clear"],pm=new Map;function Mv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(pm.get(e))return pm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=Jw.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Zw.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return pm.set(e,c),c}Yw(s=>({...s,get:(e,n,i)=>Mv(e,n)||s.get(e,n,i),has:(e,n)=>!!Mv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function tA(s){return s.getComponent()?.type==="VERSION"}const Cm="@firebase/app",kv="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new lg("@firebase/app"),nA="@firebase/app-compat",rA="@firebase/analytics-compat",sA="@firebase/analytics",iA="@firebase/app-check-compat",aA="@firebase/app-check",oA="@firebase/auth",lA="@firebase/auth-compat",cA="@firebase/database",uA="@firebase/data-connect",hA="@firebase/database-compat",dA="@firebase/functions",fA="@firebase/functions-compat",mA="@firebase/installations",gA="@firebase/installations-compat",pA="@firebase/messaging",yA="@firebase/messaging-compat",vA="@firebase/performance",_A="@firebase/performance-compat",xA="@firebase/remote-config",bA="@firebase/remote-config-compat",EA="@firebase/storage",TA="@firebase/storage-compat",wA="@firebase/firestore",AA="@firebase/ai",SA="@firebase/firestore-compat",NA="firebase",RA="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]",IA={[Cm]:"fire-core",[nA]:"fire-core-compat",[sA]:"fire-analytics",[rA]:"fire-analytics-compat",[aA]:"fire-app-check",[iA]:"fire-app-check-compat",[oA]:"fire-auth",[lA]:"fire-auth-compat",[cA]:"fire-rtdb",[uA]:"fire-data-connect",[hA]:"fire-rtdb-compat",[dA]:"fire-fn",[fA]:"fire-fn-compat",[mA]:"fire-iid",[gA]:"fire-iid-compat",[pA]:"fire-fcm",[yA]:"fire-fcm-compat",[vA]:"fire-perf",[_A]:"fire-perf-compat",[xA]:"fire-rc",[bA]:"fire-rc-compat",[EA]:"fire-gcs",[TA]:"fire-gcs-compat",[wA]:"fire-fst",[SA]:"fire-fst-compat",[AA]:"fire-vertex","fire-js":"fire-js",[NA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map,CA=new Map,Dm=new Map;function Vv(s,e){try{s.container.addComponent(e)}catch(n){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function no(s){const e=s.name;if(Dm.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;Dm.set(e,s);for(const n of mh.values())Vv(n,s);for(const n of CA.values())Vv(n,s);return!0}function ug(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Hn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qs=new lc("app","Firebase",jA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=RA;function Dx(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:jm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw qs.create("bad-app-name",{appName:String(o)});if(n||(n=Sx()),!n)throw qs.create("no-options");const c=mh.get(o);if(c){if(Qi(n,c.options)&&Qi(i,c.config))return c;throw qs.create("duplicate-app",{appName:o})}const d=new Lw(o);for(const p of Dm.values())d.addComponent(p);const g=new DA(n,i,d);return mh.set(o,g),g}function Ox(s=jm){const e=mh.get(s);if(!e&&s===jm&&Sx())return Dx();if(!e)throw qs.create("no-app",{appName:s});return e}function Bs(s,e,n){let i=IA[s]??s;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(d.join(" "));return}no(new Gi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firebase-heartbeat-database",MA=1,Xl="firebase-heartbeat-store";let ym=null;function Mx(){return ym||(ym=Ww(OA,MA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Xl)}catch(n){console.warn(n)}}}}).catch(s=>{throw qs.create("idb-open",{originalErrorMessage:s.message})})),ym}async function kA(s){try{const n=(await Mx()).transaction(Xl),i=await n.objectStore(Xl).get(kx(s));return await n.done,i}catch(e){if(e instanceof ss)Zr.warn(e.message);else{const n=qs.create("idb-get",{originalErrorMessage:e?.message});Zr.warn(n.message)}}}async function Pv(s,e){try{const i=(await Mx()).transaction(Xl,"readwrite");await i.objectStore(Xl).put(e,kx(s)),await i.done}catch(n){if(n instanceof ss)Zr.warn(n.message);else{const i=qs.create("idb-set",{originalErrorMessage:n?.message});Zr.warn(i.message)}}}function kx(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=1024,PA=30;class LA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Lv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>PA){const o=qA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Lv(),{heartbeatsToSend:n,unsentEntries:i}=UA(this._heartbeatsCache.heartbeats),o=fh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Zr.warn(e),""}}}function Lv(){return new Date().toISOString().substring(0,10)}function UA(s,e=VA){const n=[];let i=s.slice();for(const o of s){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),Uv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Uv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class zA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sw()?Nw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Uv(s){return fh(JSON.stringify({version:2,heartbeats:s})).length}function qA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(s){no(new Gi("platform-logger",e=>new eA(e),"PRIVATE")),no(new Gi("heartbeat",e=>new LA(e),"PRIVATE")),Bs(Cm,kv,s),Bs(Cm,kv,"esm2020"),Bs("fire-js","")}BA("");function Vx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HA=Vx,Px=new lc("auth","Firebase",Vx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new lg("@firebase/auth");function FA(s,...e){gh.logLevel<=ke.WARN&&gh.warn(`Auth (${po}): ${s}`,...e)}function nh(s,...e){gh.logLevel<=ke.ERROR&&gh.error(`Auth (${po}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(s,...e){throw hg(s,...e)}function mr(s,...e){return hg(s,...e)}function Lx(s,e,n){const i={...HA(),[e]:n};return new lc("auth","Firebase",i).create(e,{appName:s.name})}function Hs(s){return Lx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hg(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return Px.create(s,...e)}function be(s,e,...n){if(!s)throw hg(e,...n)}function Kr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw nh(e),new Error(e)}function Jr(s,e){s||Kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(){return typeof self<"u"&&self.location?.href||""}function QA(){return zv()==="http:"||zv()==="https:"}function zv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QA()||Ew()||"connection"in navigator)?navigator.onLine:!0}function KA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jr(n>e,"Short delay should be less than long delay!"),this.isMobile=_w()||Tw()}get(){return GA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(s,e){Jr(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XA=new uc(3e4,6e4);function Xi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Js(s,e,n,i,o={}){return zx(s,o,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const g=cc({key:s.config.apiKey,...d}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:p,...c};return bw()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&go(s.emulatorConfig.host)&&(y.credentials="include"),Ux.fetch()(await qx(s,s.config.apiHost,n,g),y)})}async function zx(s,e,n){s._canInitEmulator=!1;const i={...YA,...e};try{const o=new ZA(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Yu(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yu(s,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Yu(s,"email-already-in-use",d);if(p==="USER_DISABLED")throw Yu(s,"user-disabled",d);const b=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Lx(s,b,y);Gn(s,b)}}catch(o){if(o instanceof ss)throw o;Gn(s,"network-request-failed",{message:String(o)})}}async function kh(s,e,n,i,o={}){const c=await Js(s,e,n,i,o);return"mfaPendingCredential"in c&&Gn(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function qx(s,e,n,i){const o=`${e}${n}?${i}`,c=s,d=c.config.emulator?dg(s.config,o):`${s.config.apiScheme}://${o}`;return $A.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function WA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(mr(this.auth,"network-request-failed")),XA.get())})}}function Yu(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=mr(s,e,i);return o.customData._tokenResponse=n,o}function qv(s){return s!==void 0&&s.enterprise!==void 0}class JA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eS(s,e){return Js(s,"GET","/v2/recaptchaConfig",Xi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(s,e){return Js(s,"POST","/v1/accounts:delete",e)}async function ph(s,e){return Js(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nS(s,e=!1){const n=wt(s),i=await n.getIdToken(e),o=fg(i);be(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:i,authTime:Hl(vm(o.auth_time)),issuedAtTime:Hl(vm(o.iat)),expirationTime:Hl(vm(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function vm(s){return Number(s)*1e3}function fg(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const o=wx(n);return o?JSON.parse(o):(nh("Failed to decode base64 JWT payload"),null)}catch(o){return nh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Bv(s){const e=fg(s);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ss&&rS(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function rS({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hl(this.lastLoginAt),this.creationTime=Hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(s){const e=s.auth,n=await s.getIdToken(),i=await Wl(s,ph(e,{idToken:n}));be(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const c=o.providerUserInfo?.length?Bx(o.providerUserInfo):[],d=aS(s.providerData,c),g=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!d?.length,y=g?p:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Mm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function iS(s){const e=wt(s);await yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aS(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Bx(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(s,e){const n=await zx(s,{},async()=>{const i=cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,d=await qx(s,o,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:i};return s.emulatorConfig&&go(s.emulatorConfig.host)&&(p.credentials="include"),Ux.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lS(s,e){return Js(s,"POST","/v2/accounts:revokeToken",Xi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=Bv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:c}=await oS(e,n);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:c}=n,d=new Wa;return i&&(be(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(be(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(be(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(s,e){be(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Fn{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new sS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Mm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nS(this,e)}reload(){return iS(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await yh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Hs(this.auth));const e=await this.getIdToken();return await Wl(this,tS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:A,emailVerified:T,isAnonymous:U,providerData:P,stsTokenManager:j}=n;be(A&&j,e,"internal-error");const L=Wa.fromJSON(this.name,j);be(typeof A=="string",e,"internal-error"),Ms(i,e.name),Ms(o,e.name),be(typeof T=="boolean",e,"internal-error"),be(typeof U=="boolean",e,"internal-error"),Ms(c,e.name),Ms(d,e.name),Ms(g,e.name),Ms(p,e.name),Ms(y,e.name),Ms(b,e.name);const Y=new Fn({uid:A,auth:e,email:o,emailVerified:T,displayName:i,isAnonymous:U,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:L,createdAt:y,lastLoginAt:b});return P&&Array.isArray(P)&&(Y.providerData=P.map(ae=>({...ae}))),p&&(Y._redirectEventId=p),Y}static async _fromIdTokenResponse(e,n,i=!1){const o=new Wa;o.updateFromServerResponse(n);const c=new Fn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await yh(c),c}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];be(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Bx(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,g=new Wa;g.updateFromIdToken(i);const p=new Fn({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Mm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new Map;function Yr(s){Jr(s instanceof Function,"Expected a class definition");let e=Hv.get(s);return e?(Jr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Hv.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Hx.type="NONE";const Fv=Hx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(s,e,n){return`firebase:${s}:${e}:${n}`}class Za{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=rh(this.userKey,o.apiKey,c),this.fullPersistenceKey=rh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ph(this.auth,{idToken:e}).catch(()=>{});return n?Fn._fromGetAccountInfoResponse(this.auth,n,e):null}return Fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Za(Yr(Fv),e,i);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Yr(Fv);const d=rh(i,e.config.apiKey,e.name);let g=null;for(const y of n)try{const b=await y._get(d);if(b){let A;if(typeof b=="string"){const T=await ph(e,{idToken:b}).catch(()=>{});if(!T)break;A=await Fn._fromGetAccountInfoResponse(e,T,b)}else A=Fn._fromJSON(e,b);y!==c&&(g=A),c=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Za(c,e,i):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Za(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Fx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($x(e))return"Blackberry";if(Xx(e))return"Webos";if(Qx(e))return"Safari";if((e.includes("chrome/")||Gx(e))&&!e.includes("edge/"))return"Chrome";if(Yx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Fx(s=Zt()){return/firefox\//i.test(s)}function Qx(s=Zt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gx(s=Zt()){return/crios\//i.test(s)}function Kx(s=Zt()){return/iemobile/i.test(s)}function Yx(s=Zt()){return/android/i.test(s)}function $x(s=Zt()){return/blackberry/i.test(s)}function Xx(s=Zt()){return/webos/i.test(s)}function mg(s=Zt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function cS(s=Zt()){return mg(s)&&!!window.navigator?.standalone}function uS(){return ww()&&document.documentMode===10}function Wx(s=Zt()){return mg(s)||Yx(s)||Xx(s)||$x(s)||/windows phone/i.test(s)||Kx(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(s,e=[]){let n;switch(s){case"Browser":n=Qv(Zt());break;case"Worker":n=`${Qv(Zt())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${po}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((d,g)=>{try{const p=e(c);d(p)}catch(p){g(p)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(s,e={}){return Js(s,"GET","/v2/passwordPolicy",Xi(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=6;class mS{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??fS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gv(this),this.idTokenSubscription=new Gv(this),this.beforeStateQueue=new hS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Px,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ph(this,{idToken:e}),i=await Fn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Hn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=i?._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===d)&&g?.user&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(Hs(this));const n=e?wt(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(Hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dS(this),n=new mS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await lS(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yr(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[Yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&FA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function yo(s){return wt(s)}class Gv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Dw(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pS(s){Vh=s}function Jx(s){return Vh.loadJS(s)}function yS(){return Vh.recaptchaEnterpriseScript}function vS(){return Vh.gapiScript}function _S(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class xS{constructor(){this.enterprise=new bS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ES="recaptcha-enterprise",eb="NO_RECAPTCHA";class TS{constructor(e){this.type=ES,this.auth=yo(e)}async verify(e="verify",n=!1){async function i(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,g)=>{eS(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new JA(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(p=>{g(p)})})}function o(c,d,g){const p=window.grecaptcha;qv(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(eb)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xS().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{i(this.auth).then(g=>{if(!n&&qv(window.grecaptcha))o(g,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=yS();p.length!==0&&(p+=g),Jx(p).then(()=>{o(g,c,d)}).catch(y=>{d(y)})}}).catch(g=>{d(g)})})}}async function Kv(s,e,n,i=!1,o=!1){const c=new TS(s);let d;if(o)d=eb;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return i?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Yv(s,e,n,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Kv(s,e,n,n==="getOobCode");return i(s,c)}else return i(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Kv(s,e,n,n==="getOobCode");return i(s,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(s,e){const n=ug(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Qi(c,e??{}))return o;Gn(o,"already-initialized")}return n.initialize({options:e})}function AS(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Yr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function SS(s,e,n){const i=yo(s);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=tb(e),{host:d,port:g}=NS(e),p=g===null?"":`:${g}`,y={url:`${c}//${d}${p}/`},b=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(Qi(y,i.config.emulator)&&Qi(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,go(d)?(Rx(`${c}//${d}${p}`),Ix("Auth",!0)):RS()}function tb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function NS(s){const e=tb(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:$v(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:$v(d)}}}function $v(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function RS(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,n){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}async function IS(s,e){return Js(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(s,e){return kh(s,"POST","/v1/accounts:signInWithPassword",Xi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(s,e){return kh(s,"POST","/v1/accounts:signInWithEmailLink",Xi(s,e))}async function DS(s,e){return kh(s,"POST","/v1/accounts:signInWithEmailLink",Xi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends gg{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Zl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Zl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yv(e,n,"signInWithPassword",CS);case"emailLink":return jS(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yv(e,i,"signUpPassword",IS);case"emailLink":return DS(e,{idToken:n,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(s,e){return kh(s,"POST","/v1/accounts:signInWithIdp",Xi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="http://localhost";class Ki extends gg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=n;if(!i||!o)return null;const d=new Ki(i,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Ja(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ja(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ja(e,n)}buildRequest(){const e={requestUri:OS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kS(s){const e=Vl(Pl(s)).link,n=e?Vl(Pl(e)).deep_link_id:null,i=Vl(Pl(s)).deep_link_id;return(i?Vl(Pl(i)).link:null)||i||n||e||s}class pg{constructor(e){const n=Vl(Pl(e)),i=n.apiKey??null,o=n.oobCode??null,c=MS(n.mode??null);be(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=kS(e);try{return new pg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.providerId=vo.PROVIDER_ID}static credential(e,n){return Zl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=pg.parseLink(n);return be(i,"argument-error"),Zl._fromEmailAndCode(e,i.code,i.tenantId)}}vo.PROVIDER_ID="password";vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends nb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends hc{constructor(){super("facebook.com")}static credential(e){return Ki._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ki._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Vs.credential(n,i)}catch{return null}}}Vs.GOOGLE_SIGN_IN_METHOD="google.com";Vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends hc{constructor(){super("github.com")}static credential(e){return Ki._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends hc{constructor(){super("twitter.com")}static credential(e,n){return Ki._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ls.credential(n,i)}catch{return null}}}Ls.TWITTER_SIGN_IN_METHOD="twitter.com";Ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const c=await Fn._fromIdTokenResponse(e,i,o),d=Xv(i);return new ro({user:c,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=Xv(i);return new ro({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function Xv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends ss{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new vh(e,n,i,o)}}function rb(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?vh._fromErrorAndOperation(s,c,e,i):c})}async function VS(s,e,n=!1){const i=await Wl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return ro._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(s,e,n=!1){const{auth:i}=s;if(Hn(i.app))return Promise.reject(Hs(i));const o="reauthenticate";try{const c=await Wl(s,rb(i,o,e,s),n);be(c.idToken,i,"internal-error");const d=fg(c.idToken);be(d,i,"internal-error");const{sub:g}=d;return be(s.uid===g,i,"user-mismatch"),ro._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Gn(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sb(s,e,n=!1){if(Hn(s.app))return Promise.reject(Hs(s));const i="signIn",o=await rb(s,i,e),c=await ro._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(c.user),c}async function LS(s,e){return sb(yo(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(s){const e=yo(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function zS(s,e,n){return Hn(s.app)?Promise.reject(Hs(s)):LS(wt(s),vo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&US(s),i})}function qS(s,e,n,i){return wt(s).onIdTokenChanged(e,n,i)}function BS(s,e,n){return wt(s).beforeAuthStateChanged(e,n)}function HS(s,e,n,i){return wt(s).onAuthStateChanged(e,n,i)}function FS(s){return wt(s).signOut()}const _h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_h,"1"),this.storage.removeItem(_h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=1e3,GS=10;class ab extends ib{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);uS()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,GS):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},QS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ab.type="LOCAL";const KS=ab;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob extends ib{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ob.type="SESSION";const lb=ob;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Ph(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const g=Array.from(d).map(async y=>y(n.origin,c)),p=await YS(g);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const y=yg("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(A){const T=A;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(T.data.response);break;default:clearTimeout(b),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return window}function XS(s){gr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(){return typeof gr().WorkerGlobalScope<"u"&&typeof gr().importScripts=="function"}async function WS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZS(){return navigator?.serviceWorker?.controller||null}function JS(){return cb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="firebaseLocalStorageDb",eN=1,xh="firebaseLocalStorage",hb="fbase_key";class dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lh(s,e){return s.transaction([xh],e?"readwrite":"readonly").objectStore(xh)}function tN(){const s=indexedDB.deleteDatabase(ub);return new dc(s).toPromise()}function km(){const s=indexedDB.open(ub,eN);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(xh,{keyPath:hb})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(xh)?e(i):(i.close(),await tN(),e(await km()))})})}async function Wv(s,e,n){const i=Lh(s,!0).put({[hb]:e,value:n});return new dc(i).toPromise()}async function nN(s,e){const n=Lh(s,!1).get(e),i=await new dc(n).toPromise();return i===void 0?null:i.value}function Zv(s,e){const n=Lh(s,!0).delete(e);return new dc(n).toPromise()}const rN=800,sN=3;class db{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>sN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ph._getInstance(JS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await WS(),!this.activeServiceWorker)return;this.sender=new $S(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await Wv(e,_h,"1"),await Zv(e,_h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Wv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>nN(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Lh(o,!1).getAll();return new dc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}db.type="LOCAL";const iN=db;new uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(s,e){return e?Yr(e):(be(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends gg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ja(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ja(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oN(s){return sb(s.auth,new vg(s),s.bypassAuthState)}function lN(s){const{auth:e,user:n}=s;return be(n,e,"internal-error"),PS(n,new vg(s),s.bypassAuthState)}async function cN(s){const{auth:e,user:n}=s;return be(n,e,"internal-error"),VS(n,new vg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:c,error:d,type:g}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oN;case"linkViaPopup":case"linkViaRedirect":return cN;case"reauthViaPopup":case"reauthViaRedirect":return lN;default:Gn(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=new uc(2e3,1e4);class Xa extends fb{constructor(e,n,i,o,c){super(e,n,o,c),this.provider=i,this.authWindow=null,this.pollId=null,Xa.currentPopupAction&&Xa.currentPopupAction.cancel(),Xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Jr(this.filter.length===1,"Popup operations only handle one event");const e=yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uN.get())};e()}}Xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="pendingRedirect",sh=new Map;class dN extends fb{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=sh.get(this.auth._key());if(!e){try{const i=await fN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fN(s,e){const n=pN(e),i=gN(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function mN(s,e){sh.set(s._key(),e)}function gN(s){return Yr(s._redirectPersistence)}function pN(s){return rh(hN,s.config.apiKey,s.name)}async function yN(s,e,n=!1){if(Hn(s.app))return Promise.reject(Hs(s));const i=yo(s),o=aN(i,e),d=await new dN(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=600*1e3;class _N{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!mb(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(mr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jv(e))}saveEventToCache(e){this.cachedEventUids.add(Jv(e)),this.lastProcessedEventTime=Date.now()}}function Jv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function mb({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function xN(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(s,e={}){return Js(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TN=/^https?/;async function wN(s){if(s.config.emulator)return;const{authorizedDomains:e}=await bN(s);for(const n of e)try{if(AN(n))return}catch{}Gn(s,"unauthorized-domain")}function AN(s){const e=Om(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!TN.test(n))return!1;if(EN.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new uc(3e4,6e4);function e_(){const s=gr().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function NN(s){return new Promise((e,n)=>{function i(){e_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e_(),n(mr(s,"network-request-failed"))},timeout:SN.get()})}if(gr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gr().gapi?.load)i();else{const o=_S("iframefcb");return gr()[o]=()=>{gapi.load?i():n(mr(s,"network-request-failed"))},Jx(`${vS()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw ih=null,e})}let ih=null;function RN(s){return ih=ih||NN(s),ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=new uc(5e3,15e3),CN="__/auth/iframe",jN="emulator/auth/iframe",DN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ON=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MN(s){const e=s.config;be(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?dg(e,jN):`https://${s.config.authDomain}/${CN}`,i={apiKey:e.apiKey,appName:s.name,v:po},o=ON.get(s.config.apiHost);o&&(i.eid=o);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${cc(i).slice(1)}`}async function kN(s){const e=await RN(s),n=gr().gapi;return be(n,s,"internal-error"),e.open({where:document.body,url:MN(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DN,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const d=mr(s,"network-request-failed"),g=gr().setTimeout(()=>{c(d)},IN.get());function p(){gr().clearTimeout(g),o(i)}i.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PN=500,LN=600,UN="_blank",zN="http://localhost";class t_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qN(s,e,n,i=PN,o=LN){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let g="";const p={...VN,width:i.toString(),height:o.toString(),top:c,left:d},y=Zt().toLowerCase();n&&(g=Gx(y)?UN:n),Fx(y)&&(e=e||zN,p.scrollbars="yes");const b=Object.entries(p).reduce((T,[U,P])=>`${T}${U}=${P},`,"");if(cS(y)&&g!=="_self")return BN(e||"",g),new t_(null);const A=window.open(e||"",g,b);be(A,s,"popup-blocked");try{A.focus()}catch{}return new t_(A)}function BN(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="__/auth/handler",FN="emulator/auth/handler",QN=encodeURIComponent("fac");async function n_(s,e,n,i,o,c){be(s.config.authDomain,s,"auth-domain-config-required"),be(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:po,eventId:o};if(e instanceof nb){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",jw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,A]of Object.entries({}))d[b]=A}if(e instanceof hc){const b=e.getScopes().filter(A=>A!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const p=await s._getAppCheckToken(),y=p?`#${QN}=${encodeURIComponent(p)}`:"";return`${GN(s)}?${cc(g).slice(1)}${y}`}function GN({config:s}){return s.emulator?dg(s,FN):`https://${s.authDomain}/${HN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="webStorageSupport";class KN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lb,this._completeRedirectFn=yN,this._overrideRedirectResult=mN}async _openPopup(e,n,i,o){Jr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await n_(e,n,i,Om(),o);return qN(e,c,yg())}async _openRedirect(e,n,i,o){await this._originValidation(e);const c=await n_(e,n,i,Om(),o);return XS(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Jr(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await kN(e),i=new _N(e);return n.register("authEvent",o=>(be(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_m,{type:_m},o=>{const c=o?.[0]?.[_m];c!==void 0&&n(!!c),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Wx()||Qx()||mg()}}const YN=KN;var r_="@firebase/auth",s_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WN(s){no(new Gi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=i.options;be(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zx(s)},y=new gS(i,o,c,p);return AS(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),no(new Gi("auth-internal",e=>{const n=yo(e.getProvider("auth").getImmediate());return(i=>new $N(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bs(r_,s_,XN(s)),Bs(r_,s_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=300,JN=Nx("authIdTokenMaxAge")||ZN;let i_=null;const eR=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>JN)return;const o=n?.token;i_!==o&&(i_=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function tR(s=Ox()){const e=ug(s,"auth");if(e.isInitialized())return e.getImmediate();const n=wS(s,{popupRedirectResolver:YN,persistence:[iN,KS,lb]}),i=Nx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=eR(c.toString());BS(n,d,()=>d(n.currentUser)),qS(n,g=>d(g))}}const o=Ax("auth");return o&&SS(n,`http://${o}`),n}function nR(){return document.getElementsByTagName("head")?.[0]??document}pS({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const c=mr("internal-error");c.customData=o,n(c)},i.type="text/javascript",i.charset="UTF-8",nR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WN("Browser");var rR="firebase",sR="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bs(rR,sR,"app");var a_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fs,gb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,I){function R(){}R.prototype=I.prototype,V.D=I.prototype,V.prototype=new R,V.prototype.constructor=V,V.C=function(D,M,S){for(var N=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)N[Ce-2]=arguments[Ce];return I.prototype[M].apply(D,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,I,R){R||(R=0);var D=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)D[M]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(M=0;16>M;++M)D[M]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=V.g[0],R=V.g[1],M=V.g[2];var S=V.g[3],N=I+(S^R&(M^S))+D[0]+3614090360&4294967295;I=R+(N<<7&4294967295|N>>>25),N=S+(M^I&(R^M))+D[1]+3905402710&4294967295,S=I+(N<<12&4294967295|N>>>20),N=M+(R^S&(I^R))+D[2]+606105819&4294967295,M=S+(N<<17&4294967295|N>>>15),N=R+(I^M&(S^I))+D[3]+3250441966&4294967295,R=M+(N<<22&4294967295|N>>>10),N=I+(S^R&(M^S))+D[4]+4118548399&4294967295,I=R+(N<<7&4294967295|N>>>25),N=S+(M^I&(R^M))+D[5]+1200080426&4294967295,S=I+(N<<12&4294967295|N>>>20),N=M+(R^S&(I^R))+D[6]+2821735955&4294967295,M=S+(N<<17&4294967295|N>>>15),N=R+(I^M&(S^I))+D[7]+4249261313&4294967295,R=M+(N<<22&4294967295|N>>>10),N=I+(S^R&(M^S))+D[8]+1770035416&4294967295,I=R+(N<<7&4294967295|N>>>25),N=S+(M^I&(R^M))+D[9]+2336552879&4294967295,S=I+(N<<12&4294967295|N>>>20),N=M+(R^S&(I^R))+D[10]+4294925233&4294967295,M=S+(N<<17&4294967295|N>>>15),N=R+(I^M&(S^I))+D[11]+2304563134&4294967295,R=M+(N<<22&4294967295|N>>>10),N=I+(S^R&(M^S))+D[12]+1804603682&4294967295,I=R+(N<<7&4294967295|N>>>25),N=S+(M^I&(R^M))+D[13]+4254626195&4294967295,S=I+(N<<12&4294967295|N>>>20),N=M+(R^S&(I^R))+D[14]+2792965006&4294967295,M=S+(N<<17&4294967295|N>>>15),N=R+(I^M&(S^I))+D[15]+1236535329&4294967295,R=M+(N<<22&4294967295|N>>>10),N=I+(M^S&(R^M))+D[1]+4129170786&4294967295,I=R+(N<<5&4294967295|N>>>27),N=S+(R^M&(I^R))+D[6]+3225465664&4294967295,S=I+(N<<9&4294967295|N>>>23),N=M+(I^R&(S^I))+D[11]+643717713&4294967295,M=S+(N<<14&4294967295|N>>>18),N=R+(S^I&(M^S))+D[0]+3921069994&4294967295,R=M+(N<<20&4294967295|N>>>12),N=I+(M^S&(R^M))+D[5]+3593408605&4294967295,I=R+(N<<5&4294967295|N>>>27),N=S+(R^M&(I^R))+D[10]+38016083&4294967295,S=I+(N<<9&4294967295|N>>>23),N=M+(I^R&(S^I))+D[15]+3634488961&4294967295,M=S+(N<<14&4294967295|N>>>18),N=R+(S^I&(M^S))+D[4]+3889429448&4294967295,R=M+(N<<20&4294967295|N>>>12),N=I+(M^S&(R^M))+D[9]+568446438&4294967295,I=R+(N<<5&4294967295|N>>>27),N=S+(R^M&(I^R))+D[14]+3275163606&4294967295,S=I+(N<<9&4294967295|N>>>23),N=M+(I^R&(S^I))+D[3]+4107603335&4294967295,M=S+(N<<14&4294967295|N>>>18),N=R+(S^I&(M^S))+D[8]+1163531501&4294967295,R=M+(N<<20&4294967295|N>>>12),N=I+(M^S&(R^M))+D[13]+2850285829&4294967295,I=R+(N<<5&4294967295|N>>>27),N=S+(R^M&(I^R))+D[2]+4243563512&4294967295,S=I+(N<<9&4294967295|N>>>23),N=M+(I^R&(S^I))+D[7]+1735328473&4294967295,M=S+(N<<14&4294967295|N>>>18),N=R+(S^I&(M^S))+D[12]+2368359562&4294967295,R=M+(N<<20&4294967295|N>>>12),N=I+(R^M^S)+D[5]+4294588738&4294967295,I=R+(N<<4&4294967295|N>>>28),N=S+(I^R^M)+D[8]+2272392833&4294967295,S=I+(N<<11&4294967295|N>>>21),N=M+(S^I^R)+D[11]+1839030562&4294967295,M=S+(N<<16&4294967295|N>>>16),N=R+(M^S^I)+D[14]+4259657740&4294967295,R=M+(N<<23&4294967295|N>>>9),N=I+(R^M^S)+D[1]+2763975236&4294967295,I=R+(N<<4&4294967295|N>>>28),N=S+(I^R^M)+D[4]+1272893353&4294967295,S=I+(N<<11&4294967295|N>>>21),N=M+(S^I^R)+D[7]+4139469664&4294967295,M=S+(N<<16&4294967295|N>>>16),N=R+(M^S^I)+D[10]+3200236656&4294967295,R=M+(N<<23&4294967295|N>>>9),N=I+(R^M^S)+D[13]+681279174&4294967295,I=R+(N<<4&4294967295|N>>>28),N=S+(I^R^M)+D[0]+3936430074&4294967295,S=I+(N<<11&4294967295|N>>>21),N=M+(S^I^R)+D[3]+3572445317&4294967295,M=S+(N<<16&4294967295|N>>>16),N=R+(M^S^I)+D[6]+76029189&4294967295,R=M+(N<<23&4294967295|N>>>9),N=I+(R^M^S)+D[9]+3654602809&4294967295,I=R+(N<<4&4294967295|N>>>28),N=S+(I^R^M)+D[12]+3873151461&4294967295,S=I+(N<<11&4294967295|N>>>21),N=M+(S^I^R)+D[15]+530742520&4294967295,M=S+(N<<16&4294967295|N>>>16),N=R+(M^S^I)+D[2]+3299628645&4294967295,R=M+(N<<23&4294967295|N>>>9),N=I+(M^(R|~S))+D[0]+4096336452&4294967295,I=R+(N<<6&4294967295|N>>>26),N=S+(R^(I|~M))+D[7]+1126891415&4294967295,S=I+(N<<10&4294967295|N>>>22),N=M+(I^(S|~R))+D[14]+2878612391&4294967295,M=S+(N<<15&4294967295|N>>>17),N=R+(S^(M|~I))+D[5]+4237533241&4294967295,R=M+(N<<21&4294967295|N>>>11),N=I+(M^(R|~S))+D[12]+1700485571&4294967295,I=R+(N<<6&4294967295|N>>>26),N=S+(R^(I|~M))+D[3]+2399980690&4294967295,S=I+(N<<10&4294967295|N>>>22),N=M+(I^(S|~R))+D[10]+4293915773&4294967295,M=S+(N<<15&4294967295|N>>>17),N=R+(S^(M|~I))+D[1]+2240044497&4294967295,R=M+(N<<21&4294967295|N>>>11),N=I+(M^(R|~S))+D[8]+1873313359&4294967295,I=R+(N<<6&4294967295|N>>>26),N=S+(R^(I|~M))+D[15]+4264355552&4294967295,S=I+(N<<10&4294967295|N>>>22),N=M+(I^(S|~R))+D[6]+2734768916&4294967295,M=S+(N<<15&4294967295|N>>>17),N=R+(S^(M|~I))+D[13]+1309151649&4294967295,R=M+(N<<21&4294967295|N>>>11),N=I+(M^(R|~S))+D[4]+4149444226&4294967295,I=R+(N<<6&4294967295|N>>>26),N=S+(R^(I|~M))+D[11]+3174756917&4294967295,S=I+(N<<10&4294967295|N>>>22),N=M+(I^(S|~R))+D[2]+718787259&4294967295,M=S+(N<<15&4294967295|N>>>17),N=R+(S^(M|~I))+D[9]+3951481745&4294967295,V.g[0]=V.g[0]+I&4294967295,V.g[1]=V.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+M&4294967295,V.g[3]=V.g[3]+S&4294967295}i.prototype.u=function(V,I){I===void 0&&(I=V.length);for(var R=I-this.blockSize,D=this.B,M=this.h,S=0;S<I;){if(M==0)for(;S<=R;)o(this,V,S),S+=this.blockSize;if(typeof V=="string"){for(;S<I;)if(D[M++]=V.charCodeAt(S++),M==this.blockSize){o(this,D),M=0;break}}else for(;S<I;)if(D[M++]=V[S++],M==this.blockSize){o(this,D),M=0;break}}this.h=M,this.o+=I},i.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var I=1;I<V.length-8;++I)V[I]=0;var R=8*this.o;for(I=V.length-8;I<V.length;++I)V[I]=R&255,R/=256;for(this.u(V),V=Array(16),I=R=0;4>I;++I)for(var D=0;32>D;D+=8)V[R++]=this.g[I]>>>D&255;return V};function c(V,I){var R=g;return Object.prototype.hasOwnProperty.call(R,V)?R[V]:R[V]=I(V)}function d(V,I){this.h=I;for(var R=[],D=!0,M=V.length-1;0<=M;M--){var S=V[M]|0;D&&S==I||(R[M]=S,D=!1)}this.g=R}var g={};function p(V){return-128<=V&&128>V?c(V,function(I){return new d([I|0],0>I?-1:0)}):new d([V|0],0>V?-1:0)}function y(V){if(isNaN(V)||!isFinite(V))return A;if(0>V)return L(y(-V));for(var I=[],R=1,D=0;V>=R;D++)I[D]=V/R|0,R*=4294967296;return new d(I,0)}function b(V,I){if(V.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V.charAt(0)=="-")return L(b(V.substring(1),I));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(I,8)),D=A,M=0;M<V.length;M+=8){var S=Math.min(8,V.length-M),N=parseInt(V.substring(M,M+S),I);8>S?(S=y(Math.pow(I,S)),D=D.j(S).add(y(N))):(D=D.j(R),D=D.add(y(N)))}return D}var A=p(0),T=p(1),U=p(16777216);s=d.prototype,s.m=function(){if(j(this))return-L(this).m();for(var V=0,I=1,R=0;R<this.g.length;R++){var D=this.i(R);V+=(0<=D?D:4294967296+D)*I,I*=4294967296}return V},s.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(P(this))return"0";if(j(this))return"-"+L(this).toString(V);for(var I=y(Math.pow(V,6)),R=this,D="";;){var M=ge(R,I).g;R=Y(R,M.j(I));var S=((0<R.g.length?R.g[0]:R.h)>>>0).toString(V);if(R=M,P(R))return S+D;for(;6>S.length;)S="0"+S;D=S+D}},s.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function P(V){if(V.h!=0)return!1;for(var I=0;I<V.g.length;I++)if(V.g[I]!=0)return!1;return!0}function j(V){return V.h==-1}s.l=function(V){return V=Y(this,V),j(V)?-1:P(V)?0:1};function L(V){for(var I=V.g.length,R=[],D=0;D<I;D++)R[D]=~V.g[D];return new d(R,~V.h).add(T)}s.abs=function(){return j(this)?L(this):this},s.add=function(V){for(var I=Math.max(this.g.length,V.g.length),R=[],D=0,M=0;M<=I;M++){var S=D+(this.i(M)&65535)+(V.i(M)&65535),N=(S>>>16)+(this.i(M)>>>16)+(V.i(M)>>>16);D=N>>>16,S&=65535,N&=65535,R[M]=N<<16|S}return new d(R,R[R.length-1]&-2147483648?-1:0)};function Y(V,I){return V.add(L(I))}s.j=function(V){if(P(this)||P(V))return A;if(j(this))return j(V)?L(this).j(L(V)):L(L(this).j(V));if(j(V))return L(this.j(L(V)));if(0>this.l(U)&&0>V.l(U))return y(this.m()*V.m());for(var I=this.g.length+V.g.length,R=[],D=0;D<2*I;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<V.g.length;M++){var S=this.i(D)>>>16,N=this.i(D)&65535,Ce=V.i(M)>>>16,oe=V.i(M)&65535;R[2*D+2*M]+=N*oe,ae(R,2*D+2*M),R[2*D+2*M+1]+=S*oe,ae(R,2*D+2*M+1),R[2*D+2*M+1]+=N*Ce,ae(R,2*D+2*M+1),R[2*D+2*M+2]+=S*Ce,ae(R,2*D+2*M+2)}for(D=0;D<I;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=I;D<2*I;D++)R[D]=0;return new d(R,0)};function ae(V,I){for(;(V[I]&65535)!=V[I];)V[I+1]+=V[I]>>>16,V[I]&=65535,I++}function re(V,I){this.g=V,this.h=I}function ge(V,I){if(P(I))throw Error("division by zero");if(P(V))return new re(A,A);if(j(V))return I=ge(L(V),I),new re(L(I.g),L(I.h));if(j(I))return I=ge(V,L(I)),new re(L(I.g),I.h);if(30<V.g.length){if(j(V)||j(I))throw Error("slowDivide_ only works with positive integers.");for(var R=T,D=I;0>=D.l(V);)R=se(R),D=se(D);var M=Ae(R,1),S=Ae(D,1);for(D=Ae(D,2),R=Ae(R,2);!P(D);){var N=S.add(D);0>=N.l(V)&&(M=M.add(R),S=N),D=Ae(D,1),R=Ae(R,1)}return I=Y(V,M.j(I)),new re(M,I)}for(M=A;0<=V.l(I);){for(R=Math.max(1,Math.floor(V.m()/I.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),S=y(R),N=S.j(I);j(N)||0<N.l(V);)R-=D,S=y(R),N=S.j(I);P(S)&&(S=T),M=M.add(S),V=Y(V,N)}return new re(M,V)}s.A=function(V){return ge(this,V).h},s.and=function(V){for(var I=Math.max(this.g.length,V.g.length),R=[],D=0;D<I;D++)R[D]=this.i(D)&V.i(D);return new d(R,this.h&V.h)},s.or=function(V){for(var I=Math.max(this.g.length,V.g.length),R=[],D=0;D<I;D++)R[D]=this.i(D)|V.i(D);return new d(R,this.h|V.h)},s.xor=function(V){for(var I=Math.max(this.g.length,V.g.length),R=[],D=0;D<I;D++)R[D]=this.i(D)^V.i(D);return new d(R,this.h^V.h)};function se(V){for(var I=V.g.length+1,R=[],D=0;D<I;D++)R[D]=V.i(D)<<1|V.i(D-1)>>>31;return new d(R,V.h)}function Ae(V,I){var R=I>>5;I%=32;for(var D=V.g.length-R,M=[],S=0;S<D;S++)M[S]=0<I?V.i(S+R)>>>I|V.i(S+R+1)<<32-I:V.i(S+R);return new d(M,V.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,gb=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,Fs=d}).apply(typeof a_<"u"?a_:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pb,Ll,yb,ah,Vm,vb,_b,xb;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,_){return u==Array.prototype||u==Object.prototype||(u[v]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var v=0;v<u.length;++v){var _=u[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function o(u,v){if(v)e:{var _=i;u=u.split(".");for(var w=0;w<u.length-1;w++){var B=u[w];if(!(B in _))break e;_=_[B]}u=u[u.length-1],w=_[u],v=v(w),v!=w&&v!=null&&e(_,u,{configurable:!0,writable:!0,value:v})}}function c(u,v){u instanceof String&&(u+="");var _=0,w=!1,B={next:function(){if(!w&&_<u.length){var $=_++;return{value:v($,u[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(u){return u||function(){return c(this,function(v,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function p(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function y(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function b(u,v,_){return u.call.apply(u.bind,arguments)}function A(u,v,_){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,w),u.apply(v,B)}}return function(){return u.apply(v,arguments)}}function T(u,v,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:A,T.apply(null,arguments)}function U(u,v){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function P(u,v){function _(){}_.prototype=v.prototype,u.aa=v.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(w,B,$){for(var ce=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ce[Le-2]=arguments[Le];return v.prototype[B].apply(w,ce)}}function j(u){const v=u.length;if(0<v){const _=Array(v);for(let w=0;w<v;w++)_[w]=u[w];return _}return[]}function L(u,v){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const B=u.length||0,$=w.length||0;u.length=B+$;for(let ce=0;ce<$;ce++)u[B+ce]=w[ce]}else u.push(w)}}class Y{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function ae(u){return/^[\s\xa0]*$/.test(u)}function re(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function ge(u){return ge[" "](u),u}ge[" "]=function(){};var se=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function Ae(u,v,_){for(const w in u)v.call(_,u[w],w,u)}function V(u,v){for(const _ in u)v.call(void 0,u[_],_,u)}function I(u){const v={};for(const _ in u)v[_]=u[_];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,v){let _,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(_ in w)u[_]=w[_];for(let $=0;$<R.length;$++)_=R[$],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function M(u){var v=1;u=u.split(":");const _=[];for(;0<v&&u.length;)_.push(u.shift()),v--;return u.length&&_.push(u.join(":")),_}function S(u){g.setTimeout(()=>{throw u},0)}function N(){var u=je;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class Ce{constructor(){this.h=this.g=null}add(v,_){const w=oe.get();w.set(v,_),this.h?this.h.next=w:this.g=w,this.h=w}}var oe=new Y(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ue=!1,je=new Ce,O=()=>{const u=g.Promise.resolve(void 0);ie=()=>{u.then(Z)}};var Z=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(_){S(_)}var v=oe;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}ue=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};g.addEventListener("test",_,v),g.removeEventListener("test",_,v)}catch{}return u}();function Te(u,v){if(X.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(se){e:{try{ge(v.nodeName);var B=!0;break e}catch{}B=!1}B||(v=null)}}else _=="mouseover"?v=u.fromElement:_=="mouseout"&&(v=u.toElement);this.relatedTarget=v,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Te.aa.h.call(this)}}P(Te,X);var ve={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var jt="closure_listenable_"+(1e6*Math.random()|0),et=0;function Xn(u,v,_,w,B){this.listener=u,this.proxy=null,this.src=v,this.type=_,this.capture=!!w,this.ha=B,this.key=++et,this.da=this.fa=!1}function is(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function br(u){this.src=u,this.g={},this.h=0}br.prototype.add=function(u,v,_,w,B){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var ce=si(u,v,w,B);return-1<ce?(v=u[ce],_||(v.fa=!1)):(v=new Xn(v,this.src,$,!!w,B),v.fa=_,u.push(v)),v};function ri(u,v){var _=v.type;if(_ in u.g){var w=u.g[_],B=Array.prototype.indexOf.call(w,v,void 0),$;($=0<=B)&&Array.prototype.splice.call(w,B,1),$&&(is(v),u.g[_].length==0&&(delete u.g[_],u.h--))}}function si(u,v,_,w){for(var B=0;B<u.length;++B){var $=u[B];if(!$.da&&$.listener==v&&$.capture==!!_&&$.ha==w)return B}return-1}var ii="closure_lm_"+(1e6*Math.random()|0),Ao={};function Tc(u,v,_,w,B){if(Array.isArray(v)){for(var $=0;$<v.length;$++)Tc(u,v[$],_,w,B);return null}return _=wc(_),u&&u[jt]?u.K(v,_,y(w)?!!w.capture:!1,B):bn(u,v,_,!1,w,B)}function bn(u,v,_,w,B,$){if(!v)throw Error("Invalid event type");var ce=y(B)?!!B.capture:!!B,Le=ta(u);if(Le||(u[ii]=Le=new br(u)),_=Le.add(v,_,w,ce,$),_.proxy)return _;if(w=sd(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)fe||(B=ce),B===void 0&&(B=!1),u.addEventListener(v.toString(),w,B);else if(u.attachEvent)u.attachEvent(ai(v.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function sd(){function u(_){return v.call(u.src,u.listener,_)}const v=id;return u}function So(u,v,_,w,B){if(Array.isArray(v))for(var $=0;$<v.length;$++)So(u,v[$],_,w,B);else w=y(w)?!!w.capture:!!w,_=wc(_),u&&u[jt]?(u=u.i,v=String(v).toString(),v in u.g&&($=u.g[v],_=si($,_,w,B),-1<_&&(is($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete u.g[v],u.h--)))):u&&(u=ta(u))&&(v=u.g[v.toString()],u=-1,v&&(u=si(v,_,w,B)),(_=-1<u?v[u]:null)&&ea(_))}function ea(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[jt])ri(v.i,u);else{var _=u.type,w=u.proxy;v.removeEventListener?v.removeEventListener(_,w,u.capture):v.detachEvent?v.detachEvent(ai(_),w):v.addListener&&v.removeListener&&v.removeListener(w),(_=ta(v))?(ri(_,u),_.h==0&&(_.src=null,v[ii]=null)):is(u)}}}function ai(u){return u in Ao?Ao[u]:Ao[u]="on"+u}function id(u,v){if(u.da)u=!0;else{v=new Te(v,this);var _=u.listener,w=u.ha||u.src;u.fa&&ea(u),u=_.call(w,v)}return u}function ta(u){return u=u[ii],u instanceof br?u:null}var No="__closure_events_fn_"+(1e9*Math.random()>>>0);function wc(u){return typeof u=="function"?u:(u[No]||(u[No]=function(v){return u.handleEvent(v)}),u[No])}function ct(){le.call(this),this.i=new br(this),this.M=this,this.F=null}P(ct,le),ct.prototype[jt]=!0,ct.prototype.removeEventListener=function(u,v,_,w){So(this,u,v,_,w)};function Ge(u,v){var _,w=u.F;if(w)for(_=[];w;w=w.F)_.push(w);if(u=u.M,w=v.type||v,typeof v=="string")v=new X(v,u);else if(v instanceof X)v.target=v.target||u;else{var B=v;v=new X(w,u),D(v,B)}if(B=!0,_)for(var $=_.length-1;0<=$;$--){var ce=v.g=_[$];B=un(ce,w,!0,v)&&B}if(ce=v.g=u,B=un(ce,w,!0,v)&&B,B=un(ce,w,!1,v)&&B,_)for($=0;$<_.length;$++)ce=v.g=_[$],B=un(ce,w,!1,v)&&B}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var _=u.g[v],w=0;w<_.length;w++)is(_[w]);delete u.g[v],u.h--}}this.F=null},ct.prototype.K=function(u,v,_,w){return this.i.add(String(u),v,!1,_,w)},ct.prototype.L=function(u,v,_,w){return this.i.add(String(u),v,!0,_,w)};function un(u,v,_,w){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var B=!0,$=0;$<v.length;++$){var ce=v[$];if(ce&&!ce.da&&ce.capture==_){var Le=ce.listener,St=ce.ha||ce.src;ce.fa&&ri(u.i,ce),B=Le.call(St,w)!==!1&&B}}return B&&!w.defaultPrevented}function Gt(u,v,_){if(typeof u=="function")_&&(u=T(u,_));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:g.setTimeout(u,v||0)}function Ac(u){u.g=Gt(()=>{u.g=null,u.i&&(u.i=!1,Ac(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class ad extends le{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ac(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oi(u){le.call(this),this.h=u,this.g={}}P(oi,le);var li=[];function ci(u){Ae(u.g,function(v,_){this.g.hasOwnProperty(_)&&ea(v)},u),u.g={}}oi.prototype.N=function(){oi.aa.N.call(this),ci(this)},oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=g.JSON.stringify,na=g.JSON.parse,ui=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function Ro(){}Ro.prototype.h=null;function Io(u){return u.h||(u.h=u.i())}function Co(){}var Er={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tr(){X.call(this,"d")}P(Tr,X);function jo(){X.call(this,"c")}P(jo,X);var Wn={},Do=null;function as(){return Do=Do||new ct}Wn.La="serverreachability";function ra(u){X.call(this,Wn.La,u)}P(ra,X);function os(u){const v=as();Ge(v,new ra(v))}Wn.STAT_EVENT="statevent";function Sc(u,v){X.call(this,Wn.STAT_EVENT,u),this.stat=v}P(Sc,X);function st(u){const v=as();Ge(v,new Sc(v,u))}Wn.Ma="timingevent";function At(u,v){X.call(this,Wn.Ma,u),this.size=v}P(At,X);function pt(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},v)}function En(){this.g=!0}En.prototype.xa=function(){this.g=!1};function Oo(u,v,_,w,B,$){u.info(function(){if(u.g)if($)for(var ce="",Le=$.split("&"),St=0;St<Le.length;St++){var Ue=Le[St].split("=");if(1<Ue.length){var Ot=Ue[0];Ue=Ue[1];var Nt=Ot.split("_");ce=2<=Nt.length&&Nt[1]=="type"?ce+(Ot+"="+Ue+"&"):ce+(Ot+"=redacted&")}}else ce=null;else ce=$;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+v+`
`+_+`
`+ce})}function od(u,v,_,w,B,$,ce){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+v+`
`+_+`
`+$+" "+ce})}function ls(u,v,_,w){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+hi(u,_)+(w?" "+w:"")})}function Nc(u,v){u.info(function(){return"TIMEOUT: "+v})}En.prototype.info=function(){};function hi(u,v){if(!u.g)return v;if(!v)return null;try{var _=JSON.parse(v);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var w=_[u];if(!(2>w.length)){var B=w[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var ce=1;ce<B.length;ce++)B[ce]=""}}}}return Vn(_)}catch{return v}}var cs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zn;function Jn(){}P(Jn,Ro),Jn.prototype.g=function(){return new XMLHttpRequest},Jn.prototype.i=function(){return{}},Zn=new Jn;function Jt(u,v,_,w){this.j=u,this.i=v,this.l=_,this.R=w||1,this.U=new oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dt}function dt(){this.i=null,this.g="",this.h=!1}var Mo={},sa={};function Pn(u,v,_){u.L=1,u.v=pi(hn(v)),u.m=_,u.P=!0,Ar(u,null)}function Ar(u,v){u.F=Date.now(),di(u),u.A=hn(u.v);var _=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),zo(_.i,"t",w),u.C=0,_=u.j.J,u.h=new dt,u.g=Hc(u.j,_?v:null,!u.m),0<u.O&&(u.M=new ad(T(u.Y,u,u.g),u.O)),v=u.U,_=u.g,w=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(li[0]=B.toString()),B=li);for(var $=0;$<B.length;$++){var ce=Tc(_,B[$],w||v.handleEvent,!1,v.h||v);if(!ce)break;v.g[ce.key]=ce}v=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),os(),Oo(u.i,u.u,u.A,u.l,u.R,u.m)}Jt.prototype.ca=function(u){u=u.target;const v=this.M;v&&Sn(u)==3?v.j():this.Y(u)},Jt.prototype.Y=function(u){try{if(u==this.g)e:{const Nt=Sn(this.g);var v=this.g.Ba();const Or=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||kc(this.g)))){this.J||Nt!=4||v==7||(v==8||0>=Or?os(3):os(2)),us(this);var _=this.g.Z();this.X=_;t:if(Rc(this)){var w=kc(this.g);u="";var B=w.length,$=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lt(this),er(this);var ce="";break t}this.h.i=new g.TextDecoder}for(v=0;v<B;v++)this.h.h=!0,u+=this.h.i.decode(w[v],{stream:!($&&v==B-1)});w.length=0,this.h.g+=u,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=_==200,od(this.i,this.u,this.A,this.l,this.R,Nt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,St=this.g;if((Le=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(Le)){var Ue=Le;break t}}Ue=null}if(_=Ue)ls(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fi(this,_);else{this.o=!1,this.s=3,st(12),Lt(this),er(this);break e}}if(this.P){_=!0;let Ut;for(;!this.J&&this.C<ce.length;)if(Ut=Ic(this,ce),Ut==sa){Nt==4&&(this.s=4,st(14),_=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Mo){this.s=4,st(15),ls(this.i,this.l,ce,"[Invalid Chunk]"),_=!1;break}else ls(this.i,this.l,Ut,null),fi(this,Ut);if(Rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||ce.length!=0||this.h.h||(this.s=1,st(16),_=!1),this.o=this.o&&_,!_)ls(this.i,this.l,ce,"[Invalid Chunked Response]"),Lt(this),er(this);else if(0<ce.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),wi(Ot),Ot.M=!0,st(11))}}else ls(this.i,this.l,ce,null),fi(this,ce);Nt==4&&Lt(this),this.o&&!this.J&&(Nt==4?zc(this.j,this):(this.o=!1,di(this)))}else dd(this.g),_==400&&0<ce.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),Lt(this),er(this)}}}catch{}finally{}};function Rc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ic(u,v){var _=u.C,w=v.indexOf(`
`,_);return w==-1?sa:(_=Number(v.substring(_,w)),isNaN(_)?Mo:(w+=1,w+_>v.length?sa:(v=v.slice(w,w+_),u.C=w+_,v)))}Jt.prototype.cancel=function(){this.J=!0,Lt(this)};function di(u){u.S=Date.now()+u.I,Cc(u,u.I)}function Cc(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pt(T(u.ba,u),v)}function us(u){u.B&&(g.clearTimeout(u.B),u.B=null)}Jt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Nc(this.i,this.A),this.L!=2&&(os(),st(17)),Lt(this),this.s=2,er(this)):Cc(this,this.S-u)};function er(u){u.j.G==0||u.J||zc(u.j,u)}function Lt(u){us(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,ci(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function fi(u,v){try{var _=u.j;if(_.G!=0&&(_.g==u||ko(_.h,u))){if(!u.K&&ko(_.h,u)&&_.G==3){try{var w=_.Da.g.parse(v)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)pa(_),ma(_);else break e;Qo(_),st(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=pt(T(_.Za,_),6e3));if(1>=aa(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Dr(_,11)}else if((u.K||_.g==u)&&pa(_),!ae(v))for(B=_.Da.g.parse(v),v=0;v<B.length;v++){let Ue=B[v];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const Ot=Ue[3];Ot!=null&&(_.la=Ot,_.j.info("VER="+_.la));const Nt=Ue[4];Nt!=null&&(_.Aa=Nt,_.j.info("SVER="+_.Aa));const Or=Ue[5];Or!=null&&typeof Or=="number"&&0<Or&&(w=1.5*Or,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const Ut=u.g;if(Ut){const or=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(or){var $=w.h;$.g||or.indexOf("spdy")==-1&&or.indexOf("quic")==-1&&or.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(oa($,$.h),$.h=null))}if(w.D){const Ko=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Ko&&(w.ya=Ko,$e(w.I,w.D,Ko))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var ce=u;if(w.qa=Bc(w,w.J?w.ia:null,w.W),ce.K){en(w.h,ce);var Le=ce,St=w.L;St&&(Le.I=St),Le.B&&(us(Le),di(Le)),w.g=ce}else Lc(w);0<_.i.length&&ga(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Dr(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Dr(_,7):Ho(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}os(4)}catch{}}var jc=class{constructor(u,v){this.g=u,this.map=v}};function Sr(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ia(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function aa(u){return u.h?1:u.g?u.g.size:0}function ko(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function oa(u,v){u.g?u.g.add(v):u.h=v}function en(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}Sr.prototype.cancel=function(){if(this.i=Vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Vo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const _ of u.g.values())v=v.concat(_.D);return v}return j(u.i)}function ld(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var v=[],_=u.length,w=0;w<_;w++)v.push(u[w]);return v}v=[],_=0;for(w in u)v[_++]=u[w];return v}function la(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var v=[];u=u.length;for(var _=0;_<u;_++)v.push(_);return v}v=[],_=0;for(const w in u)v[_++]=w;return v}}}function Po(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var _=la(u),w=ld(u),B=w.length,$=0;$<B;$++)v.call(void 0,w[$],_&&_[$],u)}var mi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cd(u,v){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var w=u[_].indexOf("="),B=null;if(0<=w){var $=u[_].substring(0,w);B=u[_].substring(w+1)}else $=u[_];v($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function yt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof yt){this.h=u.h,gi(this,u.j),this.o=u.o,this.g=u.g,hs(this,u.s),this.l=u.l;var v=u.i,_=new Rr;_.i=v.i,v.g&&(_.g=new Map(v.g),_.h=v.h),Nr(this,_),this.m=u.m}else u&&(v=String(u).match(mi))?(this.h=!1,gi(this,v[1]||"",!0),this.o=Tn(v[2]||""),this.g=Tn(v[3]||"",!0),hs(this,v[4]),this.l=Tn(v[5]||"",!0),Nr(this,v[6]||"",!0),this.m=Tn(v[7]||"")):(this.h=!1,this.i=new Rr(null,this.h))}yt.prototype.toString=function(){var u=[],v=this.j;v&&u.push(yi(v,Lo,!0),":");var _=this.g;return(_||v=="file")&&(u.push("//"),(v=this.o)&&u.push(yi(v,Lo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(yi(_,_.charAt(0)=="/"?ud:Uo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",yi(_,ca)),u.join("")};function hn(u){return new yt(u)}function gi(u,v,_){u.j=_?Tn(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function hs(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function Nr(u,v,_){v instanceof Rr?(u.i=v,Oc(u.i,u.h)):(_||(v=yi(v,hd)),u.i=new Rr(v,u.h))}function $e(u,v,_){u.i.set(v,_)}function pi(u){return $e(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Tn(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function yi(u,v,_){return typeof u=="string"?(u=encodeURI(u).replace(v,Dc),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Dc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Lo=/[#\/\?@]/g,Uo=/[#\?:]/g,ud=/[#\?]/g,hd=/[#\?@]/g,ca=/#/g;function Rr(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function wn(u){u.g||(u.g=new Map,u.h=0,u.i&&cd(u.i,function(v,_){u.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}s=Rr.prototype,s.add=function(u,v){wn(this),this.i=null,u=tr(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(v),this.h+=1,this};function Ir(u,v){wn(u),v=tr(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function Cr(u,v){return wn(u),v=tr(u,v),u.g.has(v)}s.forEach=function(u,v){wn(this),this.g.forEach(function(_,w){_.forEach(function(B){u.call(v,B,w,this)},this)},this)},s.na=function(){wn(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),_=[];for(let w=0;w<v.length;w++){const B=u[w];for(let $=0;$<B.length;$++)_.push(v[w])}return _},s.V=function(u){wn(this);let v=[];if(typeof u=="string")Cr(this,u)&&(v=v.concat(this.g.get(tr(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)v=v.concat(u[_])}return v},s.set=function(u,v){return wn(this),this.i=null,u=tr(this,u),Cr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},s.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function zo(u,v,_){Ir(u,v),0<_.length&&(u.i=null,u.g.set(tr(u,v),j(_)),u.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var _=0;_<v.length;_++){var w=v[_];const $=encodeURIComponent(String(w)),ce=this.V(w);for(w=0;w<ce.length;w++){var B=$;ce[w]!==""&&(B+="="+encodeURIComponent(String(ce[w]))),u.push(B)}}return this.i=u.join("&")};function tr(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function Oc(u,v){v&&!u.j&&(wn(u),u.i=null,u.g.forEach(function(_,w){var B=w.toLowerCase();w!=B&&(Ir(this,w),zo(this,B,_))},u)),u.j=v}function vi(u,v){const _=new En;if(g.Image){const w=new Image;w.onload=U(An,_,"TestLoadImage: loaded",!0,v,w),w.onerror=U(An,_,"TestLoadImage: error",!1,v,w),w.onabort=U(An,_,"TestLoadImage: abort",!1,v,w),w.ontimeout=U(An,_,"TestLoadImage: timeout",!1,v,w),g.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else v(!1)}function Ln(u,v){const _=new En,w=new AbortController,B=setTimeout(()=>{w.abort(),An(_,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:w.signal}).then($=>{clearTimeout(B),$.ok?An(_,"TestPingServer: ok",!0,v):An(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),An(_,"TestPingServer: error",!1,v)})}function An(u,v,_,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(_)}catch{}}function _i(){this.g=new ui}function nr(u,v,_){const w=_||"";try{Po(u,function(B,$){let ce=B;y(B)&&(ce=Vn(B)),v.push(w+$+"="+encodeURIComponent(ce))})}catch(B){throw v.push(w+"type="+encodeURIComponent("_badmap")),B}}function ds(u){this.l=u.Ub||null,this.j=u.eb||!1}P(ds,Ro),ds.prototype.g=function(){return new jr(this.l,this.j)},ds.prototype.i=function(u){return function(){return u}}({});function jr(u,v){ct.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(jr,ct),s=jr.prototype,s.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,sr(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||g).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,rr(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,sr(this)),this.g&&(this.readyState=3,sr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function qo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?rr(this):sr(this),this.readyState==3&&qo(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,rr(this))},s.Qa=function(u){this.g&&(this.response=u,rr(this))},s.ga=function(){this.g&&rr(this)};function rr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,sr(u)}s.setRequestHeader=function(u,v){this.u.append(u,v)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=v.next();return u.join(`\r
`)};function sr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(jr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Bo(u){let v="";return Ae(u,function(_,w){v+=w,v+=":",v+=_,v+=`\r
`}),v}function Dt(u,v,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Bo(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):$e(u,v,_))}function Fe(u){ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Fe,ct);var ua=/^https?$/i,xi=["POST","PUT"];s=Fe.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,v,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zn.g(),this.v=this.o?Io(this.o):Io(Zn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch($){Mc(this,$);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)_.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())_.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),B=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(xi,v,void 0))||w||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ce]of _)this.g.setRequestHeader($,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bi(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Mc(this,$)}};function Mc(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,ha(u),ir(u)}function ha(u){u.A||(u.A=!0,Ge(u,"complete"),Ge(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ge(this,"complete"),Ge(this,"abort"),ir(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ir(this,!0)),Fe.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?da(this):this.bb())},s.bb=function(){da(this)};function da(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Sn(u)!=4||u.Z()!=2)){if(u.u&&Sn(u)==4)Gt(u.Ea,0,u);else if(Ge(u,"readystatechange"),Sn(u)==4){u.h=!1;try{const ce=u.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var w;if(w=ce===0){var B=String(u.D).match(mi)[1]||null;!B&&g.self&&g.self.location&&(B=g.self.location.protocol.slice(0,-1)),w=!ua.test(B?B.toLowerCase():"")}_=w}if(_)Ge(u,"complete"),Ge(u,"success");else{u.m=6;try{var $=2<Sn(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",ha(u)}}finally{ir(u)}}}}function ir(u,v){if(u.g){bi(u);const _=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||Ge(u,"ready");try{_.onreadystatechange=w}catch{}}}function bi(u){u.I&&(g.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Sn(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),na(v)}};function kc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function dd(u){const v={};u=(u.g&&2<=Sn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(ae(u[w]))continue;var _=M(u[w]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=v[B]||[];v[B]=$,$.push(_)}V(v,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(u,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||v}function fa(u){this.Aa=0,this.i=[],this.j=new En,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ei("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ei("baseRetryDelayMs",5e3,u),this.cb=Ei("retryDelaySeedMs",1e4,u),this.Wa=Ei("forwardChannelMaxRetries",2,u),this.wa=Ei("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Sr(u&&u.concurrentRequestLimit),this.Da=new _i,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=fa.prototype,s.la=8,s.G=1,s.connect=function(u,v,_,w){st(0),this.W=u,this.H=v||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Bc(this,null,this.W),ga(this)};function Ho(u){if(Vc(u),u.G==3){var v=u.U++,_=hn(u.I);if($e(_,"SID",u.K),$e(_,"RID",v),$e(_,"TYPE","terminate"),Ti(u,_),v=new Jt(u,u.j,v),v.L=2,v.v=pi(hn(_)),_=!1,g.navigator&&g.navigator.sendBeacon)try{_=g.navigator.sendBeacon(v.v.toString(),"")}catch{}!_&&g.Image&&(new Image().src=v.v,_=!0),_||(v.g=Hc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),di(v)}qc(u)}function ma(u){u.g&&(wi(u),u.g.cancel(),u.g=null)}function Vc(u){ma(u),u.u&&(g.clearTimeout(u.u),u.u=null),pa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function ga(u){if(!ia(u.h)&&!u.s){u.s=!0;var v=u.Ga;ie||O(),ue||(ie(),ue=!0),je.add(v,u),u.B=0}}function fd(u,v){return aa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pt(T(u.Ga,u,v),Go(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new Jt(this,this.j,u);let $=this.o;if(this.S&&($?($=I($),D($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(v+=w,4096<v){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=Pc(this,B,v),_=hn(this.I),$e(_,"RID",u),$e(_,"CVER",22),this.D&&$e(_,"X-HTTP-Session-Id",this.D),Ti(this,_),$&&(this.O?v="headers="+encodeURIComponent(String(Bo($)))+"&"+v:this.m&&Dt(_,this.m,$)),oa(this.h,B),this.Ua&&$e(_,"TYPE","init"),this.P?($e(_,"$req",v),$e(_,"SID","null"),B.T=!0,Pn(B,_,null)):Pn(B,_,v),this.G=2}}else this.G==3&&(u?Fo(this,u):this.i.length==0||ia(this.h)||Fo(this))};function Fo(u,v){var _;v?_=v.l:_=u.U++;const w=hn(u.I);$e(w,"SID",u.K),$e(w,"RID",_),$e(w,"AID",u.T),Ti(u,w),u.m&&u.o&&Dt(w,u.m,u.o),_=new Jt(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),v&&(u.i=v.D.concat(u.i)),v=Pc(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),oa(u.h,_),Pn(_,w,v)}function Ti(u,v){u.H&&Ae(u.H,function(_,w){$e(v,w,_)}),u.l&&Po({},function(_,w){$e(v,w,_)})}function Pc(u,v,_){_=Math.min(u.i.length,_);var w=u.l?T(u.l.Na,u.l,u):null;e:{var B=u.i;let $=-1;for(;;){const ce=["count="+_];$==-1?0<_?($=B[0].g,ce.push("ofs="+$)):$=0:ce.push("ofs="+$);let Le=!0;for(let St=0;St<_;St++){let Ue=B[St].g;const Ot=B[St].map;if(Ue-=$,0>Ue)$=Math.max(0,B[St].g-100),Le=!1;else try{nr(Ot,ce,"req"+Ue+"_")}catch{w&&w(Ot)}}if(Le){w=ce.join("&");break e}}}return u=u.i.splice(0,_),v.D=u,w}function Lc(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;ie||O(),ue||(ie(),ue=!0),je.add(v,u),u.v=0}}function Qo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pt(T(u.Fa,u),Go(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,Uc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pt(T(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),ma(this),Uc(this))};function wi(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function Uc(u){u.g=new Jt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=hn(u.qa);$e(v,"RID","rpc"),$e(v,"SID",u.K),$e(v,"AID",u.T),$e(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&$e(v,"TO",u.ja),$e(v,"TYPE","xmlhttp"),Ti(u,v),u.m&&u.o&&Dt(v,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=pi(hn(v)),_.m=null,_.P=!0,Ar(_,u)}s.Za=function(){this.C!=null&&(this.C=null,ma(this),Qo(this),st(19))};function pa(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function zc(u,v){var _=null;if(u.g==v){pa(u),wi(u),u.g=null;var w=2}else if(ko(u.h,v))_=v.D,en(u.h,v),w=1;else return;if(u.G!=0){if(v.o)if(w==1){_=v.m?v.m.length:0,v=Date.now()-v.F;var B=u.B;w=as(),Ge(w,new At(w,_)),ga(u)}else Lc(u);else if(B=v.s,B==3||B==0&&0<v.X||!(w==1&&fd(u,v)||w==2&&Qo(u)))switch(_&&0<_.length&&(v=u.h,v.i=v.i.concat(_)),B){case 1:Dr(u,5);break;case 4:Dr(u,10);break;case 3:Dr(u,6);break;default:Dr(u,2)}}}function Go(u,v){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*v}function Dr(u,v){if(u.j.info("Error code "+v),v==2){var _=T(u.fb,u),w=u.Xa;const B=!w;w=new yt(w||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||gi(w,"https"),pi(w),B?vi(w.toString(),_):Ln(w.toString(),_)}else st(2);u.G=0,u.l&&u.l.sa(v),qc(u),Vc(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function qc(u){if(u.G=0,u.ka=[],u.l){const v=Vo(u.h);(v.length!=0||u.i.length!=0)&&(L(u.ka,v),L(u.ka,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.ra()}}function Bc(u,v,_){var w=_ instanceof yt?hn(_):new yt(_);if(w.g!="")v&&(w.g=v+"."+w.g),hs(w,w.s);else{var B=g.location;w=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;var $=new yt(null);w&&gi($,w),v&&($.g=v),B&&hs($,B),_&&($.l=_),w=$}return _=u.D,v=u.ya,_&&v&&$e(w,_,v),$e(w,"VER",u.la),Ti(u,w),w}function Hc(u,v,_){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new Fe(new ds({eb:_})):new Fe(u.pa),v.Ha(u.J),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fc(){}s=Fc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ya(){}ya.prototype.g=function(u,v){return new tn(u,v)};function tn(u,v){ct.call(this),this.g=new fa(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!ae(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!ae(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new ar(this)}P(tn,ct),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Ho(this.g)},tn.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Vn(u),u=_);v.i.push(new jc(v.Ya++,u)),v.G==3&&ga(v)},tn.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,tn.aa.N.call(this)};function Qc(u){Tr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const _ in v){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}P(Qc,Tr);function Gc(){jo.call(this),this.status=1}P(Gc,jo);function ar(u){this.g=u}P(ar,Fc),ar.prototype.ua=function(){Ge(this.g,"a")},ar.prototype.ta=function(u){Ge(this.g,new Qc(u))},ar.prototype.sa=function(u){Ge(this.g,new Gc)},ar.prototype.ra=function(){Ge(this.g,"b")},ya.prototype.createWebChannel=ya.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,xb=function(){return new ya},_b=function(){return as()},vb=Wn,Vm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cs.NO_ERROR=0,cs.TIMEOUT=8,cs.HTTP_ERROR=6,ah=cs,wr.COMPLETE="complete",yb=wr,Co.EventType=Er,Er.OPEN="a",Er.CLOSE="b",Er.ERROR="c",Er.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Ll=Co,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,pb=Fe}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const o_="@firebase/firestore",l_="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new lg("@firebase/firestore");function Ga(){return Yi.logLevel}function de(s,...e){if(Yi.logLevel<=ke.DEBUG){const n=e.map(_g);Yi.debug(`Firestore (${_o}): ${s}`,...n)}}function es(s,...e){if(Yi.logLevel<=ke.ERROR){const n=e.map(_g);Yi.error(`Firestore (${_o}): ${s}`,...n)}}function so(s,...e){if(Yi.logLevel<=ke.WARN){const n=e.map(_g);Yi.warn(`Firestore (${_o}): ${s}`,...n)}}function _g(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,bb(s,i,n)}function bb(s,e,n){let i=`FIRESTORE (${_o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw es(i),new Error(i)}function Qe(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||bb(e,o,i)}function Ne(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ss{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class aR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oR{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let c=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Xr,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=c;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},g=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>g(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Xr)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new Eb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class lR{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cR{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new lR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const i=c=>{c.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};const o=c=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new c_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new c_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=hR(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%62))}return i}}function Ve(s,e){return s<e?-1:s>e?1:0}function Pm(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const o=s.charAt(i),c=e.charAt(i);if(o!==c)return xm(o)===xm(c)?Ve(o,c):xm(o)?1:-1}return Ve(s.length,e.length)}const dR=55296,fR=57343;function xm(s){const e=s.charCodeAt(0);return e>=dR&&e<=fR}function io(s,e,n){return s.length===e.length&&s.every((i,o)=>n(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="__name__";class fr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ee(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return fr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fr?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=fr.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ve(e.length,n.length)}static compareSegments(e,n){const i=fr.isNumericId(e),o=fr.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?fr.extractNumericId(e).compare(fr.extractNumericId(n)):Pm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fs.fromString(e.substring(4,e.length-2))}}class nt extends fr{construct(e,n,i){return new nt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new nt(n)}static emptyPath(){return new nt([])}}const mR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends fr{construct(e,n,i){return new Ft(e,n,i)}static isValidIdentifier(e){return mR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===u_}static keyField(){return new Ft([u_])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(i+=g,o++):(c(),o++)}if(c(),d)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(nt.fromString(e))}static fromName(e){return new ye(nt.fromString(e).popFirst(5))}static empty(){return new ye(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(s,e,n){if(!n)throw new he(ee.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function gR(s,e,n,i){if(e===!0&&i===!0)throw new he(ee.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function h_(s){if(!ye.isDocumentKey(s))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function d_(s){if(ye.isDocumentKey(s))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function wb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Uh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ee(12329,{type:typeof s})}function ts(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uh(s);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(s,e){const n={typeString:s};return e&&(n.value=e),n}function fc(s,e){if(!wb(s))throw new he(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(o&&typeof d!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new he(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=-62135596800,m_=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*m_);return new rt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<f_)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/m_}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fc(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-f_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:Et("string",rt._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new rt(0,0))}static max(){return new Se(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=-1;function pR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(i===1e9?new rt(n+1,0):new rt(n,i));return new Ks(o,ye.empty(),e)}function yR(s){return new Ks(s.readTime,s.key,Jl)}class Ks{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ks(Se.min(),ye.empty(),Jl)}static max(){return new Ks(Se.max(),ye.empty(),Jl)}}function vR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(s.documentKey,e.documentKey),n!==0?n:Ve(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(s){if(s.code!==ee.FAILED_PRECONDITION||s.message!==_R)throw s;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,i)=>{n(e)})}static reject(e){return new ne((n,i)=>{i(e)})}static waitFor(e){return new ne((n,i)=>{let o=0,c=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++c,d&&c===o&&n()},p=>i(p))}),d=!0,c===o&&n()})}static or(e){let n=ne.resolve(!1);for(const i of e)n=n.next(o=>o?ne.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,c)=>{i.push(n.call(this,o,c))}),this.waitFor(i)}static mapArray(e,n){return new ne((i,o)=>{const c=e.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(e[y]).next(b=>{d[y]=b,++g,g===c&&i(d)},b=>o(b))}})}static doWhile(e,n){return new ne((i,o)=>{const c=()=>{e()===!0?n().next(()=>{c()},o):i()};c()})}}function bR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=-1;function qh(s){return s==null}function bh(s){return s===0&&1/s==-1/0}function ER(s){return typeof s=="number"&&Number.isInteger(s)&&!bh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="";function TR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=g_(e)),e=wR(s.get(n),e);return g_(e)}function wR(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case Ab:n+="";break;default:n+=c}}return n}function g_(s){return s+Ab+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function ei(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Sb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xu(this.root,e,this.comparator,!0)}}class Xu{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,i,o,c){this.key=e,this.value=n,this.color=i??Ht.RED,this.left=o??Ht.EMPTY,this.right=c??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,c){return new Ht(e??this.key,n??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,i),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,i,o,c){return this}insert(e,n,i){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new y_(this.data.getIterator())}getIteratorFrom(e){return new y_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class y_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new _n([])}unionWith(e){let n=new Ct(Ft.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new _n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return io(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Nb("Invalid base64 string: "+c):c}}(e);return new Qt(n)}static fromUint8Array(e){const n=function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c}(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const AR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(s){if(Qe(!!s,39018),typeof s=="string"){let e=0;const n=AR.exec(s);if(Qe(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gt(s.seconds),nanos:gt(s.nanos)}}function gt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function $s(s){return typeof s=="string"?Qt.fromBase64String(s):Qt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="server_timestamp",Ib="__type__",Cb="__previous_value__",jb="__local_write_time__";function Eg(s){return(s?.mapValue?.fields||{})[Ib]?.stringValue===Rb}function Bh(s){const e=s.mapValue.fields[Cb];return Eg(e)?Bh(e):e}function ec(s){const e=Ys(s.mapValue.fields[jb].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n,i,o,c,d,g,p,y,b){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=b}}const Eh="(default)";class tc{constructor(e,n){this.projectId=e,this.database=n||Eh}static empty(){return new tc("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof tc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="__type__",NR="__max__",Wu={mapValue:{}},Ob="__vector__",Th="value";function Xs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Eg(s)?4:IR(s)?9007199254740991:RR(s)?10:11:Ee(28295,{value:s})}function xr(s,e){if(s===e)return!0;const n=Xs(s);if(n!==Xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ec(s).isEqual(ec(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Ys(o.timestampValue),g=Ys(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,c){return $s(o.bytesValue).isEqual($s(c.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,c){return gt(o.geoPointValue.latitude)===gt(c.geoPointValue.latitude)&&gt(o.geoPointValue.longitude)===gt(c.geoPointValue.longitude)}(s,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return gt(o.integerValue)===gt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=gt(o.doubleValue),g=gt(c.doubleValue);return d===g?bh(d)===bh(g):isNaN(d)&&isNaN(g)}return!1}(s,e);case 9:return io(s.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return function(o,c){const d=o.mapValue.fields||{},g=c.mapValue.fields||{};if(p_(d)!==p_(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!xr(d[p],g[p])))return!1;return!0}(s,e);default:return Ee(52216,{left:s})}}function nc(s,e){return(s.values||[]).find(n=>xr(n,e))!==void 0}function ao(s,e){if(s===e)return 0;const n=Xs(s),i=Xs(e);if(n!==i)return Ve(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(s.booleanValue,e.booleanValue);case 2:return function(c,d){const g=gt(c.integerValue||c.doubleValue),p=gt(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1}(s,e);case 3:return v_(s.timestampValue,e.timestampValue);case 4:return v_(ec(s),ec(e));case 5:return Pm(s.stringValue,e.stringValue);case 6:return function(c,d){const g=$s(c),p=$s(d);return g.compareTo(p)}(s.bytesValue,e.bytesValue);case 7:return function(c,d){const g=c.split("/"),p=d.split("/");for(let y=0;y<g.length&&y<p.length;y++){const b=Ve(g[y],p[y]);if(b!==0)return b}return Ve(g.length,p.length)}(s.referenceValue,e.referenceValue);case 8:return function(c,d){const g=Ve(gt(c.latitude),gt(d.latitude));return g!==0?g:Ve(gt(c.longitude),gt(d.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return __(s.arrayValue,e.arrayValue);case 10:return function(c,d){const g=c.fields||{},p=d.fields||{},y=g[Th]?.arrayValue,b=p[Th]?.arrayValue,A=Ve(y?.values?.length||0,b?.values?.length||0);return A!==0?A:__(y,b)}(s.mapValue,e.mapValue);case 11:return function(c,d){if(c===Wu.mapValue&&d===Wu.mapValue)return 0;if(c===Wu.mapValue)return 1;if(d===Wu.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=d.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let A=0;A<p.length&&A<b.length;++A){const T=Pm(p[A],b[A]);if(T!==0)return T;const U=ao(g[p[A]],y[b[A]]);if(U!==0)return U}return Ve(p.length,b.length)}(s.mapValue,e.mapValue);default:throw Ee(23264,{he:n})}}function v_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ve(s,e);const n=Ys(s),i=Ys(e),o=Ve(n.seconds,i.seconds);return o!==0?o:Ve(n.nanos,i.nanos)}function __(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const c=ao(n[o],i[o]);if(c)return c}return Ve(n.length,i.length)}function oo(s){return Lm(s)}function Lm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const i=Ys(n);return`time(${i.seconds},${i.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return $s(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return ye.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let i="[",o=!0;for(const c of n.values||[])o?o=!1:i+=",",i+=Lm(c);return i+"]"}(s.arrayValue):"mapValue"in s?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of i)c?c=!1:o+=",",o+=`${d}:${Lm(n.fields[d])}`;return o+"}"}(s.mapValue):Ee(61005,{value:s})}function oh(s){switch(Xs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bh(s);return e?16+oh(e):16;case 5:return 2*s.stringValue.length;case 6:return $s(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,c)=>o+oh(c),0)}(s.arrayValue);case 10:case 11:return function(i){let o=0;return ei(i.fields,(c,d)=>{o+=c.length+oh(d)}),o}(s.mapValue);default:throw Ee(13486,{value:s})}}function x_(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Um(s){return!!s&&"integerValue"in s}function Tg(s){return!!s&&"arrayValue"in s}function b_(s){return!!s&&"nullValue"in s}function E_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function lh(s){return!!s&&"mapValue"in s}function RR(s){return(s?.mapValue?.fields||{})[Db]?.stringValue===Ob}function Fl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ei(s.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Fl(i)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fl(s.arrayValue.values[n]);return e}return{...s}}function IR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===NR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fl(n)}setAll(e){let n=Ft.emptyPath(),i={},o=[];e.forEach((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,i,o),i={},o=[],n=g.popLast()}d?i[g.lastSegment()]=Fl(d):o.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,i,o)}delete(e){const n=this.field(e.popLast());lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){ei(n,(o,c)=>e[o]=c);for(const o of i)delete e[o]}clone(){return new ln(Fl(this.value))}}function Mb(s){const e=[];return ei(s.fields,(n,i)=>{const o=new Ft([n]);if(lh(i)){const c=Mb(i.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)}),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,i,o,c,d,g){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Wt(e,0,Se.min(),Se.min(),Se.min(),ln.empty(),0)}static newFoundDocument(e,n,i,o){return new Wt(e,1,n,Se.min(),i,o,0)}static newNoDocument(e,n){return new Wt(e,2,n,Se.min(),Se.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,Se.min(),Se.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n){this.position=e,this.inclusive=n}}function T_(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const c=e[o],d=s.position[o];if(c.field.isKeyField()?i=ye.comparator(ye.fromName(d.referenceValue),n.key):i=ao(d,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function w_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!xr(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n="asc"){this.field=e,this.dir=n}}function CR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{}class bt extends kb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new DR(e,n,i):n==="array-contains"?new kR(e,i):n==="in"?new VR(e,i):n==="not-in"?new PR(e,i):n==="array-contains-any"?new LR(e,i):new bt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new OR(e,i):new MR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ao(n,this.value)):n!==null&&Xs(this.value)===Xs(n)&&this.matchesComparison(ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends kb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Kn(e,n)}matches(e){return Vb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vb(s){return s.op==="and"}function Pb(s){return jR(s)&&Vb(s)}function jR(s){for(const e of s.filters)if(e instanceof Kn)return!1;return!0}function zm(s){if(s instanceof bt)return s.field.canonicalString()+s.op.toString()+oo(s.value);if(Pb(s))return s.filters.map(e=>zm(e)).join(",");{const e=s.filters.map(n=>zm(n)).join(",");return`${s.op}(${e})`}}function Lb(s,e){return s instanceof bt?function(i,o){return o instanceof bt&&i.op===o.op&&i.field.isEqual(o.field)&&xr(i.value,o.value)}(s,e):s instanceof Kn?function(i,o){return o instanceof Kn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((c,d,g)=>c&&Lb(d,o.filters[g]),!0):!1}(s,e):void Ee(19439)}function Ub(s){return s instanceof bt?function(n){return`${n.field.canonicalString()} ${n.op} ${oo(n.value)}`}(s):s instanceof Kn?function(n){return n.op.toString()+" {"+n.getFilters().map(Ub).join(" ,")+"}"}(s):"Filter"}class DR extends bt{constructor(e,n,i){super(e,n,i),this.key=ye.fromName(i.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class OR extends bt{constructor(e,n){super(e,"in",n),this.keys=zb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class MR extends bt{constructor(e,n){super(e,"not-in",n),this.keys=zb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zb(s,e){return(e.arrayValue?.values||[]).map(n=>ye.fromName(n.referenceValue))}class kR extends bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tg(n)&&nc(n.arrayValue,this.value)}}class VR extends bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nc(this.value.arrayValue,n)}}class PR extends bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nc(this.value.arrayValue,n)}}class LR extends bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>nc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n=null,i=[],o=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function A_(s,e=null,n=[],i=[],o=null,c=null,d=null){return new UR(s,e,n,i,o,c,d)}function wg(s){const e=Ne(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>zm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(c){return c.field.canonicalString()+c.dir}(i)).join(","),qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>oo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>oo(i)).join(",")),e.Te=n}return e.Te}function Ag(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!CR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Lb(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!w_(s.startAt,e.startAt)&&w_(s.endAt,e.endAt)}function qm(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n=null,i=[],o=[],c=null,d="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zR(s,e,n,i,o,c,d,g){return new mc(s,e,n,i,o,c,d,g)}function Sg(s){return new mc(s)}function S_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function qb(s){return s.collectionGroup!==null}function Ql(s){const e=Ne(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ct(Ft.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(g=g.add(y.field))})}),g})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Ah(c,i))}),n.has(Ft.keyField().canonicalString())||e.Ie.push(new Ah(Ft.keyField(),i))}return e.Ie}function pr(s){const e=Ne(s);return e.Ee||(e.Ee=qR(e,Ql(s))),e.Ee}function qR(s,e){if(s.limitType==="F")return A_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new Ah(o.field,c)});const n=s.endAt?new wh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new wh(s.startAt.position,s.startAt.inclusive):null;return A_(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Bm(s,e){const n=s.filters.concat([e]);return new mc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Hm(s,e,n){return new mc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Hh(s,e){return Ag(pr(s),pr(e))&&s.limitType===e.limitType}function Bb(s){return`${wg(pr(s))}|lt:${s.limitType}`}function Ka(s){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>Ub(o)).join(", ")}]`),qh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>oo(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>oo(o)).join(",")),`Target(${i})`}(pr(s))}; limitType=${s.limitType})`}function Fh(s,e){return e.isFoundDocument()&&function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):ye.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)}(s,e)&&function(i,o){for(const c of Ql(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(s,e)&&function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0}(s,e)&&function(i,o){return!(i.startAt&&!function(d,g,p){const y=T_(d,g,p);return d.inclusive?y<=0:y<0}(i.startAt,Ql(i),o)||i.endAt&&!function(d,g,p){const y=T_(d,g,p);return d.inclusive?y>=0:y>0}(i.endAt,Ql(i),o))}(s,e)}function BR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Hb(s){return(e,n)=>{let i=!1;for(const o of Ql(s)){const c=HR(o,e,n);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function HR(s,e,n){const i=s.field.isKeyField()?ye.comparator(e.key,n.key):function(c,d,g){const p=d.data.field(c),y=g.data.field(c);return p!==null&&y!==null?ao(p,y):Ee(42886)}(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ee(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ei(this.inner,(n,i)=>{for(const[o,c]of i)e(o,c)})}isEmpty(){return Sb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new lt(ye.comparator);function ns(){return FR}const Fb=new lt(ye.comparator);function Ul(...s){let e=Fb;for(const n of s)e=e.insert(n.key,n);return e}function Qb(s){let e=Fb;return s.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Bi(){return Gl()}function Gb(){return Gl()}function Gl(){return new Wi(s=>s.toString(),(s,e)=>s.isEqual(e))}const QR=new lt(ye.comparator),GR=new Ct(ye.comparator);function Pe(...s){let e=GR;for(const n of s)e=e.add(n);return e}const KR=new Ct(Ve);function YR(){return KR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bh(e)?"-0":e}}function Kb(s){return{integerValue:""+s}}function $R(s,e){return ER(e)?Kb(e):Ng(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(){this._=void 0}}function XR(s,e,n){return s instanceof rc?function(o,c){const d={fields:{[Ib]:{stringValue:Rb},[jb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Eg(c)&&(c=Bh(c)),c&&(d.fields[Cb]=c),{mapValue:d}}(n,e):s instanceof sc?$b(s,e):s instanceof ic?Xb(s,e):function(o,c){const d=Yb(o,c),g=N_(d)+N_(o.Ae);return Um(d)&&Um(o.Ae)?Kb(g):Ng(o.serializer,g)}(s,e)}function WR(s,e,n){return s instanceof sc?$b(s,e):s instanceof ic?Xb(s,e):n}function Yb(s,e){return s instanceof Sh?function(i){return Um(i)||function(c){return!!c&&"doubleValue"in c}(i)}(e)?e:{integerValue:0}:null}class rc extends Qh{}class sc extends Qh{constructor(e){super(),this.elements=e}}function $b(s,e){const n=Wb(e);for(const i of s.elements)n.some(o=>xr(o,i))||n.push(i);return{arrayValue:{values:n}}}class ic extends Qh{constructor(e){super(),this.elements=e}}function Xb(s,e){let n=Wb(e);for(const i of s.elements)n=n.filter(o=>!xr(o,i));return{arrayValue:{values:n}}}class Sh extends Qh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function N_(s){return gt(s.integerValue||s.doubleValue)}function Wb(s){return Tg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n){this.field=e,this.transform=n}}function JR(s,e){return s.field.isEqual(e.field)&&function(i,o){return i instanceof sc&&o instanceof sc||i instanceof ic&&o instanceof ic?io(i.elements,o.elements,xr):i instanceof Sh&&o instanceof Sh?xr(i.Ae,o.Ae):i instanceof rc&&o instanceof rc}(s.transform,e.transform)}class eI{constructor(e,n){this.version=e,this.transformResults=n}}class xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ch(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Gh{}function Zb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Rg(s.key,xn.none()):new gc(s.key,s.data,xn.none());{const n=s.data,i=ln.empty();let o=new Ct(Ft.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?i.delete(c):i.set(c,d),o=o.add(c)}return new ti(s.key,i,new _n(o.toArray()),xn.none())}}function tI(s,e,n){s instanceof gc?function(o,c,d){const g=o.value.clone(),p=I_(o.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(s,e,n):s instanceof ti?function(o,c,d){if(!ch(o.precondition,c))return void c.convertToUnknownDocument(d.version);const g=I_(o.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(Jb(o)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(s,e,n):function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function Kl(s,e,n,i){return s instanceof gc?function(c,d,g,p){if(!ch(c.precondition,d))return g;const y=c.value.clone(),b=C_(c.fieldTransforms,p,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null}(s,e,n,i):s instanceof ti?function(c,d,g,p){if(!ch(c.precondition,d))return g;const y=C_(c.fieldTransforms,p,d),b=d.data;return b.setAll(Jb(c)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(A=>A.field))}(s,e,n,i):function(c,d,g){return ch(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(s,e,n)}function nI(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),c=Yb(i.transform,o||null);c!=null&&(n===null&&(n=ln.empty()),n.set(i.field,c))}return n||null}function R_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&io(i,o,(c,d)=>JR(c,d))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class gc extends Gh{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ti extends Gh{constructor(e,n,i,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Jb(s){const e=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}}),e}function I_(s,e,n){const i=new Map;Qe(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const c=s[o],d=c.transform,g=e.data.field(c.field);i.set(c.field,WR(d,g,n[o]))}return i}function C_(s,e,n){const i=new Map;for(const o of s){const c=o.transform,d=n.data.field(o.field);i.set(o.field,XR(c,d,e))}return i}class Rg extends Gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rI extends Gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&tI(c,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Kl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Kl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Gb();return this.mutations.forEach(o=>{const c=e.get(o.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(o.key)?null:g;const p=Zb(d,g);p!==null&&i.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&io(this.mutations,e.mutations,(n,i)=>R_(n,i))&&io(this.baseMutations,e.baseMutations,(n,i)=>R_(n,i))}}class Ig{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=function(){return QR}();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,i[d].version);return new Ig(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,qe;function oI(s){switch(s){case ee.OK:return Ee(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ee(15467,{code:s})}}function eE(s){if(s===void 0)return es("GRPC error has no .code"),ee.UNKNOWN;switch(s){case xt.OK:return ee.OK;case xt.CANCELLED:return ee.CANCELLED;case xt.UNKNOWN:return ee.UNKNOWN;case xt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case xt.INTERNAL:return ee.INTERNAL;case xt.UNAVAILABLE:return ee.UNAVAILABLE;case xt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case xt.NOT_FOUND:return ee.NOT_FOUND;case xt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case xt.ABORTED:return ee.ABORTED;case xt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case xt.DATA_LOSS:return ee.DATA_LOSS;default:return Ee(39323,{code:s})}}(qe=xt||(xt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new Fs([4294967295,4294967295],0);function j_(s){const e=lI().encode(s),n=new gb;return n.update(e),new Uint8Array(n.digest())}function D_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Fs([n,i],0),new Fs([o,c],0)]}class Cg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new zl(`Invalid padding: ${n}`);if(i<0)throw new zl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new zl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Fs.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(Fs.fromNumber(i)));return o.compare(cI)===1&&(o=new Fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=j_(e),[i,o]=D_(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);if(!this.we(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Cg(c,o,n);return i.forEach(g=>d.insert(g)),d}insert(e){if(this.ge===0)return;const n=j_(e),[i,o]=D_(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n,i,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Kh(Se.min(),o,new lt(Ve),ns(),Pe())}}class pc{constructor(e,n,i,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new pc(i,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class tE{constructor(e,n){this.targetId=e,this.Ce=n}}class nE{constructor(e,n,i=Qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class O_{constructor(){this.ve=0,this.Fe=M_(),this.Me=Qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),i=Pe();return this.Fe.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ee(38017,{changeType:c})}}),new pc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=M_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ns(),this.Je=Zu(),this.He=Zu(),this.Ye=new lt(Ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(qm(c))if(i===0){const d=new ye(c.path);this.et(n,d,Wt.newNoDocument(d,Se.min()))}else Qe(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const g=this.ut(e),p=g?this.ct(g,e,d):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=n;let d,g;try{d=$s(i).toUint8Array()}catch(p){if(p instanceof Nb)return so("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Cg(d,o,c)}catch(p){return so(p instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach(c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((c,d)=>{const g=this.ot(d);if(g){if(c.current&&qm(g.target)){const p=new ye(g.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,Wt.newNoDocument(p,e))}c.Be&&(n.set(d,c.ke()),c.qe())}});let i=Pe();this.He.forEach((c,d)=>{let g=!0;d.forEachWhile(p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(i=i.add(c))}),this.je.forEach((c,d)=>d.setReadTime(e));const o=new Kh(e,n,this.Ye,this.je,i);return this.je=ns(),this.Je=Zu(),this.He=Zu(),this.Ye=new lt(Ve),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new O_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ct(Ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ct(Ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new O_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zu(){return new lt(ye.comparator)}function M_(){return new lt(ye.comparator)}const hI={asc:"ASCENDING",desc:"DESCENDING"},dI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fI={and:"AND",or:"OR"};class mI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fm(s,e){return s.useProto3Json||qh(e)?e:{value:e}}function Nh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function gI(s,e){return Nh(s,e.toTimestamp())}function yr(s){return Qe(!!s,49232),Se.fromTimestamp(function(n){const i=Ys(n);return new rt(i.seconds,i.nanos)}(s))}function jg(s,e){return Qm(s,e).canonicalString()}function Qm(s,e){const n=function(o){return new nt(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?n:n.child(e)}function sE(s){const e=nt.fromString(s);return Qe(cE(e),10190,{key:e.toString()}),e}function Gm(s,e){return jg(s.databaseId,e.path)}function bm(s,e){const n=sE(e);if(n.get(1)!==s.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new ye(aE(n))}function iE(s,e){return jg(s.databaseId,e)}function pI(s){const e=sE(s);return e.length===4?nt.emptyPath():aE(e)}function Km(s){return new nt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function aE(s){return Qe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function k_(s,e,n){return{name:Gm(s,e),fields:n.value.mapValue.fields}}function yI(s,e){let n;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ee(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(y,b){return y.useProto3Json?(Qe(b===void 0||typeof b=="string",58123),Qt.fromBase64String(b||"")):(Qe(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Qt.fromUint8Array(b||new Uint8Array))}(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(y){const b=y.code===void 0?ee.UNKNOWN:eE(y.code);return new he(b,y.message||"")}(d);n=new nE(i,o,c,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=bm(s,i.document.name),c=yr(i.document.updateTime),d=i.document.createTime?yr(i.document.createTime):Se.min(),g=new ln({mapValue:{fields:i.document.fields}}),p=Wt.newFoundDocument(o,c,d,g),y=i.targetIds||[],b=i.removedTargetIds||[];n=new uh(y,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=bm(s,i.document),c=i.readTime?yr(i.readTime):Se.min(),d=Wt.newNoDocument(o,c),g=i.removedTargetIds||[];n=new uh([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=bm(s,i.document),c=i.removedTargetIds||[];n=new uh([],c,o,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,d=new aI(o,c),g=i.targetId;n=new tE(g,d)}}return n}function vI(s,e){let n;if(e instanceof gc)n={update:k_(s,e.key,e.value)};else if(e instanceof Rg)n={delete:Gm(s,e.key)};else if(e instanceof ti)n={update:k_(s,e.key,e.data),updateMask:NI(e.fieldMask)};else{if(!(e instanceof rI))return Ee(16599,{Vt:e.type});n={verify:Gm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(c,d){const g=d.transform;if(g instanceof rc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof sc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ic)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Sh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Ee(20930,{transform:d.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:gI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ee(27497)}(s,e.precondition)),n}function _I(s,e){return s&&s.length>0?(Qe(e!==void 0,14353),s.map(n=>function(o,c){let d=o.updateTime?yr(o.updateTime):yr(c);return d.isEqual(Se.min())&&(d=yr(c)),new eI(d,o.transformResults||[])}(n,e))):[]}function xI(s,e){return{documents:[iE(s,e.path)]}}function bI(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=iE(s,o);const c=function(y){if(y.length!==0)return lE(Kn.create(y,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const d=function(y){if(y.length!==0)return y.map(b=>function(T){return{field:Ya(T.field),direction:wI(T.dir)}}(b))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=Fm(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ft:n,parent:o}}function EI(s){let e=pI(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Qe(i===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=function(A){const T=oE(A);return T instanceof Kn&&Pb(T)?T.getFilters():[T]}(n.where));let d=[];n.orderBy&&(d=function(A){return A.map(T=>function(P){return new Ah($a(P.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(T))}(n.orderBy));let g=null;n.limit&&(g=function(A){let T;return T=typeof A=="object"?A.value:A,qh(T)?null:T}(n.limit));let p=null;n.startAt&&(p=function(A){const T=!!A.before,U=A.values||[];return new wh(U,T)}(n.startAt));let y=null;return n.endAt&&(y=function(A){const T=!A.before,U=A.values||[];return new wh(U,T)}(n.endAt)),zR(e,o,d,c,g,"F",p,y)}function TI(s,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oE(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=$a(n.unaryFilter.field);return bt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=$a(n.unaryFilter.field);return bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=$a(n.unaryFilter.field);return bt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=$a(n.unaryFilter.field);return bt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}}(s):s.fieldFilter!==void 0?function(n){return bt.create($a(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return Kn.create(n.compositeFilter.filters.map(i=>oE(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}}(n.compositeFilter.op))}(s):Ee(30097,{filter:s})}function wI(s){return hI[s]}function AI(s){return dI[s]}function SI(s){return fI[s]}function Ya(s){return{fieldPath:s.canonicalString()}}function $a(s){return Ft.fromServerFormat(s.fieldPath)}function lE(s){return s instanceof bt?function(n){if(n.op==="=="){if(E_(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NAN"}};if(b_(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(E_(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NOT_NAN"}};if(b_(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(n.field),op:AI(n.op),value:n.value}}}(s):s instanceof Kn?function(n){const i=n.getFilters().map(o=>lE(o));return i.length===1?i[0]:{compositeFilter:{op:SI(n.op),filters:i}}}(s):Ee(54877,{filter:s})}function NI(s){const e=[];return s.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,i,o,c=Se.min(),d=Se.min(),g=Qt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.yt=e}}function II(s){const e=EI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Hm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.Cn=new jI}addToCollectionParentIndex(e,n){return this.Cn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Ks.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Ks.min())}updateCollectionGroup(e,n,i){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class jI{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Ct(nt.comparator),c=!o.has(i);return this.index[n]=o.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ct(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uE=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(uE,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new lo(0)}static cr(){return new lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="LruGarbageCollector",DI=1048576;function L_([s,e],[n,i]){const o=Ve(s,n);return o===0?Ve(e,i):o}class OI{constructor(e){this.Ir=e,this.buffer=new Ct(L_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();L_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MI{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(P_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bo(n)?de(P_,"Ignoring IndexedDB error during garbage collection: ",n):await xo(n)}await this.Vr(3e5)})}}class kI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(zh.ce);const i=new OI(n);return this.mr.forEachTarget(e,o=>i.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>i.Ar(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(V_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,c,d,g,p,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(i=A,g=Date.now(),this.removeTargets(e,i,n))).next(A=>(c=A,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(A=>(y=Date.now(),Ga()<=ke.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${A} documents in `+(y-p)+`ms
Total Duration: ${y-b}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A})))}}function VI(s,e){return new kI(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.changes=new Wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ne.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&Kl(i.mutation,o,_n.empty(),rt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Pe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Pe()){const o=Bi();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(c=>{let d=Ul();return c.forEach((g,p)=>{d=d.insert(g,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const i=Bi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Pe()))}populateOverlays(e,n,i){const o=[];return i.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((d,g)=>{n.set(d,g)})})}computeViews(e,n,i,o){let c=ns();const d=Gl(),g=function(){return Gl()}();return n.forEach((p,y)=>{const b=i.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof ti)?c=c.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),Kl(b.mutation,y,b.mutation.getFieldMask(),rt.now())):d.set(y.key,_n.empty())}),this.recalculateAndSaveOverlays(e,c).next(p=>(p.forEach((y,b)=>d.set(y,b)),n.forEach((y,b)=>g.set(y,new LI(b,d.get(y)??null))),g))}recalculateAndSaveOverlays(e,n){const i=Gl();let o=new lt((d,g)=>d-g),c=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const g of d)g.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let b=i.get(p)||_n.empty();b=g.applyToLocalView(y,b),i.set(p,b);const A=(o.get(g.batchId)||Pe()).add(p);o=o.insert(g.batchId,A)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,b=p.value,A=Gb();b.forEach(T=>{if(!c.has(T)){const U=Zb(n.get(T),i.get(T));U!==null&&A.set(T,U),c=c.add(T)}}),d.push(this.documentOverlayCache.saveOverlays(e,y,A))}return ne.waitFor(d)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(d){return ye.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-c.size):ne.resolve(Bi());let g=Jl,p=c;return d.next(y=>ne.forEach(y,(b,A)=>(g<A.largestBatchId&&(g=A.largestBatchId),c.get(b)?ne.resolve():this.remoteDocumentCache.getEntry(e,b).next(T=>{p=p.insert(b,T)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,p,y,Pe())).next(b=>({batchId:g,changes:Qb(b)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(i=>{let o=Ul();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const c=n.collectionGroup;let d=Ul();return this.indexManager.getCollectionParents(e,c).next(g=>ne.forEach(g,p=>{const y=function(A,T){return new mc(T,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(b=>{b.forEach((A,T)=>{d=d.insert(A,T)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,o))).next(d=>{c.forEach((p,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,Wt.newInvalidDocument(b)))});let g=Ul();return d.forEach((p,y)=>{const b=c.get(p);b!==void 0&&Kl(b.mutation,y,_n.empty(),rt.now()),Fh(n,y)&&(g=g.insert(p,y))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ne.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:yr(o.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:II(o.bundledQuery),readTime:yr(o.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.overlays=new lt(ye.comparator),this.qr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Bi();return ne.forEach(n,o=>this.getOverlay(e,o).next(c=>{c!==null&&i.set(o,c)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,c)=>{this.St(e,n,c)}),ne.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.qr.delete(i)),ne.resolve()}getOverlaysForCollection(e,n,i){const o=Bi(),c=n.length+1,d=new ye(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>i&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let c=new lt((y,b)=>y-b);const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let b=c.get(y.largestBatchId);b===null&&(b=Bi(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const g=Bi(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,b)=>g.set(y,b)),!(g.size()>=o)););return ne.resolve(g)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new iI(n,i));let c=this.qr.get(n);c===void 0&&(c=Pe(),this.qr.set(n,c)),this.qr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this.Qr=new Ct(Pt.$r),this.Ur=new Ct(Pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Pt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Pt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ye(new nt([])),i=new Pt(n,e),o=new Pt(n,e+1),c=[];return this.Ur.forEachInRange([i,o],d=>{this.Gr(d),c.push(d.key)}),c}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new nt([])),i=new Pt(n,e),o=new Pt(n,e+1);let c=Pe();return this.Ur.forEachInRange([i,o],d=>{c=c.add(d.key)}),c}containsKey(e){const n=new Pt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Ve(e.Yr,n.Yr)}static Kr(e,n){return Ve(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(Pt.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new sI(c,n,i,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new Pt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ne.resolve(d)}lookupMutationBatch(e,n){return ne.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),c=o<0?0:o;return ne.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?bg:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Pt(n,0),o=new Pt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],d=>{const g=this.Xr(d.Yr);c.push(g)}),ne.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ct(Ve);return n.forEach(o=>{const c=new Pt(o,0),d=new Pt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],g=>{i=i.add(g.Yr)})}),ne.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let c=i;ye.isDocumentKey(c)||(c=c.child(""));const d=new Pt(new ye(c),0);let g=new Ct(Ve);return this.Zr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Yr)),!0)},d),ne.resolve(this.ti(g))}ti(e){const n=[];return e.forEach(i=>{const o=this.Xr(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ne.forEach(n.mutations,o=>{const c=new Pt(o.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Pt(n,0),o=this.Zr.firstAfterOrEqual(i);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.ri=e,this.docs=function(){return new lt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ne.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let i=ns();return n.forEach(o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():Wt.newInvalidDocument(o))}),ne.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let c=ns();const d=n.path,g=new ye(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:b}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||vR(yR(b),i)<=0||(o.has(b.key)||Fh(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return ne.resolve(c)}getAllFromCollectionGroup(e,n,i,o){Ee(9500)}ii(e,n){return ne.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new QI(this)}getSize(e){return ne.resolve(this.size)}}class QI extends PI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)}),ne.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.persistence=e,this.si=new Wi(n=>wg(n),Ag),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Dg,this.targetCount=0,this.ai=lo.ur()}forEachTarget(e,n){return this.si.forEach((i,o)=>n(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),ne.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new lo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Pr(n),ne.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,i){let o=0;const c=[];return this.si.forEach((d,g)=>{g.sequenceNumber<=n&&i.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ne.waitFor(c).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return ne.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),ne.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(d=>{c.push(o.markPotentiallyOrphaned(e,d))}),ne.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return ne.resolve(i)}containsKey(e,n){return ne.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n){this.ui={},this.overlays={},this.ci=new zh(0),this.li=!1,this.li=!0,this.hi=new BI,this.referenceDelegate=e(this),this.Pi=new GI(this),this.indexManager=new CI,this.remoteDocumentCache=function(o){return new FI(o)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new RI(n),this.Ii=new zI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new HI(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){de("MemoryPersistence","Starting transaction:",e);const o=new KI(this.ci.next());return this.referenceDelegate.Ei(),i(o).next(c=>this.referenceDelegate.di(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ai(e,n){return ne.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class KI extends xR{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Ri=new Dg,this.Vi=null}static mi(e){return new Og(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),ne.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(c=>this.fi.add(c.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,i=>{const o=ye.fromPath(i);return this.gi(e,o).next(c=>{c||n.removeEntry(o,Se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ne.or([()=>ne.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rh{constructor(e,n){this.persistence=e,this.pi=new Wi(i=>TR(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=VI(this,n)}static mi(e,n){return new Rh(e,n)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return ne.forEach(this.pi,(i,o)=>this.br(e,i,o).next(c=>c?ne.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,d=>this.br(e,d,n).next(g=>{g||(i++,c.removeEntry(d,Se.min()))})).next(()=>c.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oh(e.data.value)),n}br(e,n,i){return ne.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ne.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=Pe(),o=Pe();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Mg(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Aw()?8:bR(Zt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const c={result:null};return this.ys(e,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.ws(e,n,o,i).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new YI;return this.Ss(e,n,d).next(g=>{if(c.result=g,this.Vs)return this.bs(e,n,d,g.size)})}).next(()=>c.result)}bs(e,n,i,o){return i.documentReadCount<this.fs?(Ga()<=ke.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Ga()<=ke.DEBUG&&de("QueryEngine","Query:",Ka(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Ga()<=ke.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(n))):ne.resolve())}ys(e,n){if(S_(n))return ne.resolve(null);let i=pr(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Hm(n,null,"F"),i=pr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(c=>{const d=Pe(...c);return this.ps.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.Ds(n,g);return this.Cs(n,y,d,p.readTime)?this.ys(e,Hm(n,null,"F")):this.vs(e,y,n,p)}))})))}ws(e,n,i,o){return S_(n)||o.isEqual(Se.min())?ne.resolve(null):this.ps.getDocuments(e,i).next(c=>{const d=this.Ds(n,c);return this.Cs(n,d,i,o)?ne.resolve(null):(Ga()<=ke.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ka(n)),this.vs(e,d,n,pR(o,Jl)).next(g=>g))})}Ds(e,n){let i=new Ct(Hb(e));return n.forEach((o,c)=>{Fh(e,c)&&(i=i.add(c))}),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,i){return Ga()<=ke.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Ka(n)),this.ps.getDocumentsMatchingQuery(e,n,Ks.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="LocalStore",XI=3e8;class WI{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new lt(Ve),this.xs=new Wi(c=>wg(c),Ag),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function ZI(s,e,n,i){return new WI(s,e,n,i)}async function dE(s,e){const n=Ne(s);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(c=>{const d=[],g=[];let p=Pe();for(const y of o){d.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of c){g.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(i,p).next(y=>({Ls:y,removedBatchIds:d,addedBatchIds:g}))})})}function JI(s,e){const n=Ne(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return function(g,p,y,b){const A=y.batch,T=A.keys();let U=ne.resolve();return T.forEach(P=>{U=U.next(()=>b.getEntry(p,P)).next(j=>{const L=y.docVersions.get(P);Qe(L!==null,48541),j.version.compareTo(L)<0&&(A.applyToRemoteDocument(j,y),j.isValidDocument()&&(j.setReadTime(y.commitVersion),b.addEntry(j)))})}),U.next(()=>g.mutationQueue.removeMutationBatch(p,A))}(n,i,e,c).next(()=>c.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(g){let p=Pe();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function fE(s){const e=Ne(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function eC(s,e){const n=Ne(s),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach((b,A)=>{const T=o.get(A);if(!T)return;g.push(n.Pi.removeMatchingKeys(c,b.removedDocuments,A).next(()=>n.Pi.addMatchingKeys(c,b.addedDocuments,A)));let U=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?U=U.withResumeToken(Qt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):b.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(b.resumeToken,i)),o=o.insert(A,U),function(j,L,Y){return j.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=XI?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(T,U,b)&&g.push(n.Pi.updateTargetData(c,U))});let p=ns(),y=Pe();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))}),g.push(tC(c,d,e.documentUpdates).next(b=>{p=b.ks,y=b.qs})),!i.isEqual(Se.min())){const b=n.Pi.getLastRemoteSnapshotVersion(c).next(A=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i));g.push(b)}return ne.waitFor(g).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,p,y)).next(()=>p)}).then(c=>(n.Ms=o,c))}function tC(s,e,n){let i=Pe(),o=Pe();return n.forEach(c=>i=i.add(c)),e.getEntries(s,i).next(c=>{let d=ns();return n.forEach((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(g,p.readTime),d=d.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(g,p)):de(kg,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)}),{ks:d,qs:o}})}function nC(s,e){const n=Ne(s);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=bg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function rC(s,e){const n=Ne(s);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Pi.getTargetData(i,e).next(c=>c?(o=c,ne.resolve(o)):n.Pi.allocateTargetId(i).next(d=>(o=new Us(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Ym(s,e,n){const i=Ne(s),o=i.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,d=>i.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!bo(d))throw d;de(kg,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function U_(s,e,n){const i=Ne(s);let o=Se.min(),c=Pe();return i.persistence.runTransaction("Execute query","readwrite",d=>function(p,y,b){const A=Ne(p),T=A.xs.get(b);return T!==void 0?ne.resolve(A.Ms.get(T)):A.Pi.getTargetData(y,b)}(i,d,pr(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,g.targetId).next(p=>{c=p})}).next(()=>i.Fs.getDocumentsMatchingQuery(d,e,n?o:Se.min(),n?c:Pe())).next(g=>(sC(i,BR(e),g),{documents:g,Qs:c})))}function sC(s,e,n){let i=s.Os.get(e)||Se.min();n.forEach((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)}),s.Os.set(e,i)}class z_{constructor(){this.activeTargetIds=YR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iC{constructor(){this.Mo=new z_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new z_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="ConnectivityMonitor";class B_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(q_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(q_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=null;function $m(){return Ju===null?Ju=function(){return 268435456+Math.round(2147483648*Math.random())}():Ju++,"0x"+Ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="RestConnection",oC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Eh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,c){const d=$m(),g=this.zo(e,n.toUriEncodedString());de(Em,`Sending RPC '${e}' ${d}:`,g,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:y}=new URL(g),b=go(y);return this.Jo(e,g,p,i,b).then(A=>(de(Em,`Received RPC '${e}' ${d}: `,A),A),A=>{throw so(Em,`RPC '${e}' ${d} failed with error: `,A,"url: ",g,"request:",i),A})}Ho(e,n,i,o,c,d){return this.Go(e,n,i,o,c)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_o}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,c)=>e[c]=o),i&&i.headers.forEach((o,c)=>e[c]=o)}zo(e,n){const i=oC[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class uC extends lC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,c){const d=$m();return new Promise((g,p)=>{const y=new pb;y.setWithCredentials(!0),y.listenOnce(yb.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case ah.NO_ERROR:const A=y.getResponseJson();de($t,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),g(A);break;case ah.TIMEOUT:de($t,`RPC '${e}' ${d} timed out`),p(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case ah.HTTP_ERROR:const T=y.getStatus();if(de($t,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let U=y.getResponseJson();Array.isArray(U)&&(U=U[0]);const P=U?.error;if(P&&P.status&&P.message){const j=function(Y){const ae=Y.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ae)>=0?ae:ee.UNKNOWN}(P.status);p(new he(j,P.message))}else p(new he(ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new he(ee.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{de($t,`RPC '${e}' ${d} completed.`)}});const b=JSON.stringify(o);de($t,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",b,i,15)})}T_(e,n,i){const o=$m(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=xb(),g=_b(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const b=c.join("");de($t,`Creating RPC '${e}' stream ${o}: ${b}`,p);const A=d.createWebChannel(b,p);this.I_(A);let T=!1,U=!1;const P=new cC({Yo:L=>{U?de($t,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(T||(de($t,`Opening RPC '${e}' stream ${o} transport.`),A.open(),T=!0),de($t,`RPC '${e}' stream ${o} sending:`,L),A.send(L))},Zo:()=>A.close()}),j=(L,Y,ae)=>{L.listen(Y,re=>{try{ae(re)}catch(ge){setTimeout(()=>{throw ge},0)}})};return j(A,Ll.EventType.OPEN,()=>{U||(de($t,`RPC '${e}' stream ${o} transport opened.`),P.o_())}),j(A,Ll.EventType.CLOSE,()=>{U||(U=!0,de($t,`RPC '${e}' stream ${o} transport closed`),P.a_(),this.E_(A))}),j(A,Ll.EventType.ERROR,L=>{U||(U=!0,so($t,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),P.a_(new he(ee.UNAVAILABLE,"The operation could not be completed")))}),j(A,Ll.EventType.MESSAGE,L=>{if(!U){const Y=L.data[0];Qe(!!Y,16349);const ae=Y,re=ae?.error||ae[0]?.error;if(re){de($t,`RPC '${e}' stream ${o} received error:`,re);const ge=re.status;let se=function(I){const R=xt[I];if(R!==void 0)return eE(R)}(ge),Ae=re.message;se===void 0&&(se=ee.INTERNAL,Ae="Unknown error status: "+ge+" with message "+re.message),U=!0,P.a_(new he(se,Ae)),A.close()}else de($t,`RPC '${e}' stream ${o} received:`,Y),P.u_(Y)}}),j(g,vb.STAT_EVENT,L=>{L.stat===Vm.PROXY?de($t,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===Vm.NOPROXY&&de($t,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{P.__()},0),P}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(s){return new mI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="PersistentStream";class gE{constructor(e,n,i,o,c,d,g,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new mE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(es(n.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.D_===n&&this.G_(i,o)},i=>{e(()=>{const o=new he(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{i(()=>this.z_(o))}),this.stream.onMessage(o=>{i(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return de(H_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(de(H_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hC extends gE{constructor(e,n,i,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=yI(this.serializer,e),i=function(c){if(!("targetChange"in c))return Se.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Se.min():d.readTime?yr(d.readTime):Se.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Km(this.serializer),n.addTarget=function(c,d){let g;const p=d.target;if(g=qm(p)?{documents:xI(c,p)}:{query:bI(c,p).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=rE(c,d.resumeToken);const y=Fm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(Se.min())>0){g.readTime=Nh(c,d.snapshotVersion.toTimestamp());const y=Fm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g}(this.serializer,e);const i=TI(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Km(this.serializer),n.removeTarget=e,this.q_(n)}}class dC extends gE{constructor(e,n,i,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=_I(e.writeResults,e.commitTime),i=yr(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Km(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>vI(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{}class mC extends fC{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Go(e,Qm(n,i),o,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ee.UNKNOWN,c.toString())})}Ho(e,n,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Ho(e,Qm(n,i),o,d,g,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he(ee.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class gC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(es(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="RemoteStore";class pC{constructor(e,n,i,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo(d=>{i.enqueueAndForget(async()=>{Zi(this)&&(de($i,"Restarting streams for network reachability change."),await async function(p){const y=Ne(p);y.Ea.add(4),await yc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await $h(y)}(this))})}),this.Ra=new gC(i,o)}}async function $h(s){if(Zi(s))for(const e of s.da)await e(!0)}async function yc(s){for(const e of s.da)await e(!1)}function pE(s,e){const n=Ne(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ug(n)?Lg(n):Eo(n).O_()&&Pg(n,e))}function Vg(s,e){const n=Ne(s),i=Eo(n);n.Ia.delete(e),i.O_()&&yE(n,e),n.Ia.size===0&&(i.O_()?i.L_():Zi(n)&&n.Ra.set("Unknown"))}function Pg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Eo(s).Y_(e)}function yE(s,e){s.Va.Ue(e),Eo(s).Z_(e)}function Lg(s){s.Va=new uI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Eo(s).start(),s.Ra.ua()}function Ug(s){return Zi(s)&&!Eo(s).x_()&&s.Ia.size>0}function Zi(s){return Ne(s).Ea.size===0}function vE(s){s.Va=void 0}async function yC(s){s.Ra.set("Online")}async function vC(s){s.Ia.forEach((e,n)=>{Pg(s,e)})}async function _C(s,e){vE(s),Ug(s)?(s.Ra.ha(e),Lg(s)):s.Ra.set("Unknown")}async function xC(s,e,n){if(s.Ra.set("Online"),e instanceof nE&&e.state===2&&e.cause)try{await async function(o,c){const d=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))}(s,e)}catch(i){de($i,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ih(s,i)}else if(e instanceof uh?s.Va.Ze(e):e instanceof tE?s.Va.st(e):s.Va.tt(e),!n.isEqual(Se.min()))try{const i=await fE(s.localStore);n.compareTo(i)>=0&&await function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(p.resumeToken,d))}}),g.targetMismatches.forEach((p,y)=>{const b=c.Ia.get(p);if(!b)return;c.Ia.set(p,b.withResumeToken(Qt.EMPTY_BYTE_STRING,b.snapshotVersion)),yE(c,p);const A=new Us(b.target,p,y,b.sequenceNumber);Pg(c,A)}),c.remoteSyncer.applyRemoteEvent(g)}(s,n)}catch(i){de($i,"Failed to raise snapshot:",i),await Ih(s,i)}}async function Ih(s,e,n){if(!bo(e))throw e;s.Ea.add(1),await yc(s),s.Ra.set("Offline"),n||(n=()=>fE(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{de($i,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await $h(s)})}function _E(s,e){return e().catch(n=>Ih(s,n,e))}async function Xh(s){const e=Ne(s),n=Ws(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bg;for(;bC(e);)try{const o=await nC(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,EC(e,o)}catch(o){await Ih(e,o)}xE(e)&&bE(e)}function bC(s){return Zi(s)&&s.Ta.length<10}function EC(s,e){s.Ta.push(e);const n=Ws(s);n.O_()&&n.X_&&n.ea(e.mutations)}function xE(s){return Zi(s)&&!Ws(s).x_()&&s.Ta.length>0}function bE(s){Ws(s).start()}async function TC(s){Ws(s).ra()}async function wC(s){const e=Ws(s);for(const n of s.Ta)e.ea(n.mutations)}async function AC(s,e,n){const i=s.Ta.shift(),o=Ig.from(i,e,n);await _E(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await Xh(s)}async function SC(s,e){e&&Ws(s).X_&&await async function(i,o){if(function(d){return oI(d)&&d!==ee.ABORTED}(o.code)){const c=i.Ta.shift();Ws(i).B_(),await _E(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o)),await Xh(i)}}(s,e),xE(s)&&bE(s)}async function F_(s,e){const n=Ne(s);n.asyncQueue.verifyOperationInProgress(),de($i,"RemoteStore received new credentials");const i=Zi(n);n.Ea.add(3),await yc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $h(n)}async function NC(s,e){const n=Ne(s);e?(n.Ea.delete(2),await $h(n)):e||(n.Ea.add(2),await yc(n),n.Ra.set("Unknown"))}function Eo(s){return s.ma||(s.ma=function(n,i,o){const c=Ne(n);return c.sa(),new hC(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{Xo:yC.bind(null,s),t_:vC.bind(null,s),r_:_C.bind(null,s),H_:xC.bind(null,s)}),s.da.push(async e=>{e?(s.ma.B_(),Ug(s)?Lg(s):s.Ra.set("Unknown")):(await s.ma.stop(),vE(s))})),s.ma}function Ws(s){return s.fa||(s.fa=function(n,i,o){const c=Ne(n);return c.sa(),new dC(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:TC.bind(null,s),r_:SC.bind(null,s),ta:wC.bind(null,s),na:AC.bind(null,s)}),s.da.push(async e=>{e?(s.fa.B_(),await Xh(s)):(await s.fa.stop(),s.Ta.length>0&&(de($i,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))})),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const d=Date.now()+i,g=new zg(e,n,d,o,c);return g.start(i),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qg(s,e){if(es("AsyncQueue",`${e}: ${s}`),bo(s))return new he(ee.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{static emptySet(e){return new eo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ye.comparator(n.key,i.key):(n,i)=>ye.comparator(n.key,i.key),this.keyedMap=Ul(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new eo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.ga=new lt(ye.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class co{constructor(e,n,i,o,c,d,g,p,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,o,c){const d=[];return n.forEach(g=>{d.push({type:0,doc:g})}),new co(e,n,eo.emptySet(n),d,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class IC{constructor(){this.queries=G_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Ne(n),c=o.queries;o.queries=G_(),c.forEach((d,g)=>{for(const p of g.Sa)p.onError(i)})})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function G_(){return new Wi(s=>Bb(s),Hh)}async function EE(s,e){const n=Ne(s);let i=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new RC,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=qg(d,`Initialization of query '${Ka(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Bg(n)}async function TE(s,e){const n=Ne(s),i=e.query;let o=3;const c=n.queries.get(i);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function CC(s,e){const n=Ne(s);let i=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const g of d.Sa)g.Fa(o)&&(i=!0);d.wa=o}}i&&Bg(n)}function jC(s,e,n){const i=Ne(s),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);i.queries.delete(e)}function Bg(s){s.Ca.forEach(e=>{e.next()})}var Xm,K_;(K_=Xm||(Xm={})).Ma="default",K_.Cache="cache";class wE{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new co(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.key=e}}class SE{constructor(e){this.key=e}}class DC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=Hb(e),this.tu=new eo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Q_,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,A)=>{const T=o.get(b),U=Fh(this.query,A)?A:null,P=!!T&&this.mutatedKeys.has(T.key),j=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let L=!1;T&&U?T.data.isEqual(U.data)?P!==j&&(i.track({type:3,doc:U}),L=!0):this.su(T,U)||(i.track({type:2,doc:U}),L=!0,(p&&this.eu(U,p)>0||y&&this.eu(U,y)<0)&&(g=!0)):!T&&U?(i.track({type:0,doc:U}),L=!0):T&&!U&&(i.track({type:1,doc:T}),L=!0,(p||y)&&(g=!0)),L&&(U?(d=d.add(U),c=j?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),i.track({type:1,doc:b})}return{tu:d,iu:i,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort((b,A)=>function(U,P){const j=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:L})}};return j(U)-j(P)}(b.type,A.type)||this.eu(b.doc,A.doc)),this.ou(i),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,d.length!==0||y?{snapshot:new co(this.query,e.tu,c,d,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Q_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new SE(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new AE(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hg="SyncEngine";class OC{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class MC{constructor(e){this.key=e,this.hu=!1}}class kC{constructor(e,n,i,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Wi(g=>Bb(g),Hh),this.Iu=new Map,this.Eu=new Set,this.du=new lt(ye.comparator),this.Au=new Map,this.Ru=new Dg,this.Vu={},this.mu=new Map,this.fu=lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VC(s,e,n=!0){const i=DE(s);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await NE(i,e,n,!0),o}async function PC(s,e){const n=DE(s);await NE(n,e,!0,!1)}async function NE(s,e,n,i){const o=await rC(s.localStore,pr(e)),c=o.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let g;return i&&(g=await LC(s,e,c,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&pE(s.remoteStore,o),g}async function LC(s,e,n,i,o){s.pu=(A,T,U)=>async function(j,L,Y,ae){let re=L.view.ru(Y);re.Cs&&(re=await U_(j.localStore,L.query,!1).then(({documents:V})=>L.view.ru(V,re)));const ge=ae&&ae.targetChanges.get(L.targetId),se=ae&&ae.targetMismatches.get(L.targetId)!=null,Ae=L.view.applyChanges(re,j.isPrimaryClient,ge,se);return $_(j,L.targetId,Ae.au),Ae.snapshot}(s,A,T,U);const c=await U_(s.localStore,e,!0),d=new DC(e,c.Qs),g=d.ru(c.documents),p=pc.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),y=d.applyChanges(g,s.isPrimaryClient,p);$_(s,n,y.au);const b=new OC(e,n,d);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function UC(s,e,n){const i=Ne(s),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter(d=>!Hh(d,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Ym(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Vg(i.remoteStore,o.targetId),Wm(i,o.targetId)}).catch(xo)):(Wm(i,o.targetId),await Ym(i.localStore,o.targetId,!0))}async function zC(s,e){const n=Ne(s),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Vg(n.remoteStore,i.targetId))}async function qC(s,e,n){const i=YC(s);try{const o=await function(d,g){const p=Ne(d),y=rt.now(),b=g.reduce((U,P)=>U.add(P.key),Pe());let A,T;return p.persistence.runTransaction("Locally write mutations","readwrite",U=>{let P=ns(),j=Pe();return p.Ns.getEntries(U,b).next(L=>{P=L,P.forEach((Y,ae)=>{ae.isValidDocument()||(j=j.add(Y))})}).next(()=>p.localDocuments.getOverlayedDocuments(U,P)).next(L=>{A=L;const Y=[];for(const ae of g){const re=nI(ae,A.get(ae.key).overlayedDocument);re!=null&&Y.push(new ti(ae.key,re,Mb(re.value.mapValue),xn.exists(!0)))}return p.mutationQueue.addMutationBatch(U,y,Y,g)}).next(L=>{T=L;const Y=L.applyToLocalDocumentSet(A,j);return p.documentOverlayCache.saveOverlays(U,L.batchId,Y)})}).then(()=>({batchId:T.batchId,changes:Qb(A)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(d,g,p){let y=d.Vu[d.currentUser.toKey()];y||(y=new lt(Ve)),y=y.insert(g,p),d.Vu[d.currentUser.toKey()]=y}(i,o.batchId,n),await vc(i,o.changes),await Xh(i.remoteStore)}catch(o){const c=qg(o,"Failed to persist write");n.reject(c)}}async function RE(s,e){const n=Ne(s);try{const i=await eC(n.localStore,e);e.targetChanges.forEach((o,c)=>{const d=n.Au.get(c);d&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Qe(d.hu,14607):o.removedDocuments.size>0&&(Qe(d.hu,42227),d.hu=!1))}),await vc(n,i,e)}catch(i){await xo(i)}}function Y_(s,e,n){const i=Ne(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach((c,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)}),function(d,g){const p=Ne(d);p.onlineState=g;let y=!1;p.queries.forEach((b,A)=>{for(const T of A.Sa)T.va(g)&&(y=!0)}),y&&Bg(p)}(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function BC(s,e,n){const i=Ne(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),c=o&&o.key;if(c){let d=new lt(ye.comparator);d=d.insert(c,Wt.newNoDocument(c,Se.min()));const g=Pe().add(c),p=new Kh(Se.min(),new Map,new lt(Ve),d,g);await RE(i,p),i.du=i.du.remove(c),i.Au.delete(e),Fg(i)}else await Ym(i.localStore,e,!1).then(()=>Wm(i,e,n)).catch(xo)}async function HC(s,e){const n=Ne(s),i=e.batch.batchId;try{const o=await JI(n.localStore,e);CE(n,i,null),IE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await vc(n,o)}catch(o){await xo(o)}}async function FC(s,e,n){const i=Ne(s);try{const o=await function(d,g){const p=Ne(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.mutationQueue.lookupMutationBatch(y,g).next(A=>(Qe(A!==null,37113),b=A.keys(),p.mutationQueue.removeMutationBatch(y,A))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,b,g)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b)).next(()=>p.localDocuments.getDocuments(y,b))})}(i.localStore,e);CE(i,e,n),IE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await vc(i,o)}catch(o){await xo(o)}}function IE(s,e){(s.mu.get(e)||[]).forEach(n=>{n.resolve()}),s.mu.delete(e)}function CE(s,e,n){const i=Ne(s);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Wm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach(i=>{s.Ru.containsKey(i)||jE(s,i)})}function jE(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Vg(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Fg(s))}function $_(s,e,n){for(const i of n)i instanceof AE?(s.Ru.addReference(i.key,e),QC(s,i)):i instanceof SE?(de(Hg,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||jE(s,i.key)):Ee(19791,{wu:i})}function QC(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(de(Hg,"New document in limbo: "+n),s.Eu.add(i),Fg(s))}function Fg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new ye(nt.fromString(e)),i=s.fu.next();s.Au.set(i,new MC(n)),s.du=s.du.insert(n,i),pE(s.remoteStore,new Us(pr(Sg(n.path)),i,"TargetPurposeLimboResolution",zh.ce))}}async function vc(s,e,n){const i=Ne(s),o=[],c=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach((g,p)=>{d.push(i.pu(p,e,n).then(y=>{if((y||n)&&i.isPrimaryClient){const b=y?!y.fromCache:n?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(y){o.push(y);const b=Mg.As(p.targetId,y);c.push(b)}}))}),await Promise.all(d),i.Pu.H_(o),await async function(p,y){const b=Ne(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ne.forEach(y,T=>ne.forEach(T.Es,U=>b.persistence.referenceDelegate.addReference(A,T.targetId,U)).next(()=>ne.forEach(T.ds,U=>b.persistence.referenceDelegate.removeReference(A,T.targetId,U)))))}catch(A){if(!bo(A))throw A;de(kg,"Failed to update sequence numbers: "+A)}for(const A of y){const T=A.targetId;if(!A.fromCache){const U=b.Ms.get(T),P=U.snapshotVersion,j=U.withLastLimboFreeSnapshotVersion(P);b.Ms=b.Ms.insert(T,j)}}}(i.localStore,c))}async function GC(s,e){const n=Ne(s);if(!n.currentUser.isEqual(e)){de(Hg,"User change. New user:",e.toKey());const i=await dE(n.localStore,e);n.currentUser=e,function(c,d){c.mu.forEach(g=>{g.forEach(p=>{p.reject(new he(ee.CANCELLED,d))})}),c.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await vc(n,i.Ls)}}function KC(s,e){const n=Ne(s),i=n.Au.get(e);if(i&&i.hu)return Pe().add(i.key);{let o=Pe();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const g=n.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function DE(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=RE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BC.bind(null,e),e.Pu.H_=CC.bind(null,e.eventManager),e.Pu.yu=jC.bind(null,e.eventManager),e}function YC(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FC.bind(null,e),e}class Ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ZI(this.persistence,new $I,e.initialUser,this.serializer)}Cu(e){return new hE(Og.mi,this.serializer)}Du(e){return new iC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ch.provider={build:()=>new Ch};class $C extends Ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof Rh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new MI(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new hE(i=>Rh.mi(i,n),this.serializer)}}class Zm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Y_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=GC.bind(null,this.syncEngine),await NC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IC}()}createDatastore(e){const n=Yh(e.databaseInfo.databaseId),i=function(c){return new uC(c)}(e.databaseInfo);return function(c,d,g,p){return new mC(c,d,g,p)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,c,d,g){return new pC(i,o,c,d,g)}(this.localStore,this.datastore,e.asyncQueue,n=>Y_(this.syncEngine,n,0),function(){return B_.v()?new B_:new aC}())}createSyncEngine(e,n){return function(o,c,d,g,p,y,b){const A=new kC(o,c,d,g,p,y);return b&&(A.gu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const i=Ne(n);de($i,"RemoteStore shutting down."),i.Ea.add(5),await yc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Zm.provider={build:()=>new Zm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="FirestoreClient";class XC{constructor(e,n,i,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=Xt.UNAUTHENTICATED,this.clientId=xg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,async d=>{de(Zs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(i,d=>(de(Zs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=qg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function wm(s,e){s.asyncQueue.verifyOperationInProgress(),de(Zs,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener(async o=>{i.isEqual(o)||(await dE(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function X_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await WC(s);de(Zs,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener(i=>F_(e.remoteStore,i)),s.setAppCheckTokenChangeListener((i,o)=>F_(e.remoteStore,o)),s._onlineComponents=e}async function WC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){de(Zs,"Using user provided OfflineComponentProvider");try{await wm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;so("Error using user provided cache. Falling back to memory cache: "+n),await wm(s,new Ch)}}else de(Zs,"Using default OfflineComponentProvider"),await wm(s,new $C(void 0));return s._offlineComponents}async function ME(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(de(Zs,"Using user provided OnlineComponentProvider"),await X_(s,s._uninitializedComponentsProvider._online)):(de(Zs,"Using default OnlineComponentProvider"),await X_(s,new Zm))),s._onlineComponents}function ZC(s){return ME(s).then(e=>e.syncEngine)}async function kE(s){const e=await ME(s),n=e.eventManager;return n.onListen=VC.bind(null,e.syncEngine),n.onUnlisten=UC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zC.bind(null,e.syncEngine),n}function JC(s,e,n={}){const i=new Xr;return s.asyncQueue.enqueueAndForget(async()=>function(c,d,g,p,y){const b=new OE({next:T=>{b.Nu(),d.enqueueAndForget(()=>TE(c,A));const U=T.docs.has(g);!U&&T.fromCache?y.reject(new he(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&T.fromCache&&p&&p.source==="server"?y.reject(new he(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),A=new wE(Sg(g.path),b,{includeMetadataChanges:!0,qa:!0});return EE(c,A)}(await kE(s),s.asyncQueue,e,n,i)),i.promise}function e4(s,e,n={}){const i=new Xr;return s.asyncQueue.enqueueAndForget(async()=>function(c,d,g,p,y){const b=new OE({next:T=>{b.Nu(),d.enqueueAndForget(()=>TE(c,A)),T.fromCache&&p.source==="server"?y.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),A=new wE(g,b,{includeMetadataChanges:!0,qa:!0});return EE(c,A)}(await kE(s),s.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="firestore.googleapis.com",Z_=!0;class J_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PE,this.ssl=Z_}else this.host=e.host,this.ssl=e.ssl??Z_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DI)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VE(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wh{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new iR;switch(i.type){case"firstParty":return new cR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=W_.get(n);i&&(de("ComponentProvider","Removing Datastore"),W_.delete(n),i.terminate())}(this),Promise.resolve()}}function t4(s,e,n,i={}){s=ts(s,Wh);const o=go(e),c=s._getSettings(),d={...c,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(Rx(`https://${g}`),Ix("Firestore",!0)),c.host!==PE&&c.host!==g&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:o,emulatorOptions:i};if(!Qi(p,d)&&(s._setSettings(p),i.mockUserToken)){let y,b;if(typeof i.mockUserToken=="string")y=i.mockUserToken,b=Xt.MOCK_USER;else{y=pw(i.mockUserToken,s._app?.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Xt(A)}s._authCredentials=new aR(new Eb(y,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new To(this.firestore,e,this._query)}}class Tt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}toJSON(){return{type:Tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(fc(n,Tt._jsonSchema))return new Tt(e,i||null,new ye(nt.fromString(n.referencePath)))}}Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:Et("string",Tt._jsonSchemaVersion),referencePath:Et("string")};class Qs extends To{constructor(e,n,i){super(e,n,Sg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new ye(e))}withConverter(e){return new Qs(this.firestore,e,this._path)}}function ni(s,e,...n){if(s=wt(s),Tb("collection","path",e),s instanceof Wh){const i=nt.fromString(e,...n);return d_(i),new Qs(s,null,i)}{if(!(s instanceof Tt||s instanceof Qs))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(nt.fromString(e,...n));return d_(i),new Qs(s.firestore,null,i)}}function _c(s,e,...n){if(s=wt(s),arguments.length===1&&(e=xg.newId()),Tb("doc","path",e),s instanceof Wh){const i=nt.fromString(e,...n);return h_(i),new Tt(s,null,new ye(i))}{if(!(s instanceof Tt||s instanceof Qs))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(nt.fromString(e,...n));return h_(i),new Tt(s.firestore,s instanceof Qs?s.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="AsyncQueue";class tx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mE(this,"async_queue_retry"),this._c=()=>{const i=Tm();i&&de(ex,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Tm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Xr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bo(e))throw e;de(ex,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,es("INTERNAL UNHANDLED ERROR: ",nx(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=zg.createAndSchedule(this,e,n,i,c=>this.hc(c));return this.tc.push(o),o}uc(){this.nc&&Ee(47125,{Pc:nx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function nx(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class wo extends Wh{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new tx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tx(e),this._firestoreClient=void 0,await e}}}function n4(s,e){const n=typeof s=="object"?s:Ox(),i=typeof s=="string"?s:Eh,o=ug(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=mw("firestore");c&&t4(o,...c)}return o}function Zh(s){if(s._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||r4(s),s._firestoreClient}function r4(s){const e=s._freezeSettings(),n=function(o,c,d,g){return new SR(o,c,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,VE(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new XC(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(Qt.fromBase64String(e))}catch(n){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kn(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fc(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:Et("string",kn._jsonSchemaVersion),bytes:Et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vr._jsonSchemaVersion}}static fromJSON(e){if(fc(e,vr._jsonSchema))return new vr(e.latitude,e.longitude)}}vr._jsonSchemaVersion="firestore/geoPoint/1.0",vr._jsonSchema={type:Et("string",vr._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fc(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new _r(e.vectorValues);throw new he(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:Et("string",_r._jsonSchemaVersion),vectorValues:Et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=/^__.*__$/;class i4{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new gc(e,this.data,n,this.fieldTransforms)}}class LE{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:s})}}class Qg{constructor(e,n,i,o,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(UE(this.Ac)&&s4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class a4{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Yh(e)}Cc(e,n,i,o=!1){return new Qg({Ac:e,methodName:n,Dc:i,path:Ft.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ed(s){const e=s._freezeSettings(),n=Yh(s._databaseId);return new a4(s._databaseId,!!e.ignoreUndefinedProperties,n)}function zE(s,e,n,i,o,c={}){const d=s.Cc(c.merge||c.mergeFields?2:0,e,n,o);Kg("Data must be an object, but it was:",d,i);const g=HE(i,d);let p,y;if(c.merge)p=new _n(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const A of c.mergeFields){const T=Jm(e,A,n);if(!d.contains(T))throw new he(ee.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);QE(b,T)||b.push(T)}p=new _n(b),y=d.fieldTransforms.filter(A=>p.covers(A.field))}else p=null,y=d.fieldTransforms;return new i4(new ln(g),p,y)}class td extends Jh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof td}}class Gg extends Jh{_toFieldTransform(e){return new ZR(e.path,new rc)}isEqual(e){return e instanceof Gg}}function qE(s,e,n,i){const o=s.Cc(1,e,n);Kg("Data must be an object, but it was:",o,i);const c=[],d=ln.empty();ei(i,(p,y)=>{const b=Yg(e,p,n);y=wt(y);const A=o.yc(b);if(y instanceof td)c.push(b);else{const T=bc(y,A);T!=null&&(c.push(b),d.set(b,T))}});const g=new _n(c);return new LE(d,g,o.fieldTransforms)}function BE(s,e,n,i,o,c){const d=s.Cc(1,e,n),g=[Jm(e,i,n)],p=[o];if(c.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)g.push(Jm(e,c[T])),p.push(c[T+1]);const y=[],b=ln.empty();for(let T=g.length-1;T>=0;--T)if(!QE(y,g[T])){const U=g[T];let P=p[T];P=wt(P);const j=d.yc(U);if(P instanceof td)y.push(U);else{const L=bc(P,j);L!=null&&(y.push(U),b.set(U,L))}}const A=new _n(y);return new LE(b,A,d.fieldTransforms)}function o4(s,e,n,i=!1){return bc(n,s.Cc(i?4:3,e))}function bc(s,e){if(FE(s=wt(s)))return Kg("Unsupported field value:",e,s),HE(s,e);if(s instanceof Jh)return function(i,o){if(!UE(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,o){const c=[];let d=0;for(const g of i){let p=bc(g,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}}(s,e)}return function(i,o){if((i=wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $R(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=rt.fromDate(i);return{timestampValue:Nh(o.serializer,c)}}if(i instanceof rt){const c=new rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Nh(o.serializer,c)}}if(i instanceof vr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof kn)return{bytesValue:rE(o.serializer,i._byteString)};if(i instanceof Tt){const c=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:jg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof _r)return function(d,g){return{mapValue:{fields:{[Db]:{stringValue:Ob},[Th]:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Ng(g.serializer,y)})}}}}}}(i,o);throw o.Sc(`Unsupported field value: ${Uh(i)}`)}(s,e)}function HE(s,e){const n={};return Sb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ei(s,(i,o)=>{const c=bc(o,e.mc(i));c!=null&&(n[i]=c)}),{mapValue:{fields:n}}}function FE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof rt||s instanceof vr||s instanceof kn||s instanceof Tt||s instanceof Jh||s instanceof _r)}function Kg(s,e,n){if(!FE(n)||!wb(n)){const i=Uh(n);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function Jm(s,e,n){if((e=wt(e))instanceof xc)return e._internalPath;if(typeof e=="string")return Yg(s,e);throw jh("Field path arguments must be of type string or ",s,!1,void 0,n)}const l4=new RegExp("[~\\*/\\[\\]]");function Yg(s,e,n){if(e.search(l4)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new xc(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function jh(s,e,n,i,o){const c=i&&!i.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${i}`),d&&(p+=` in document ${o}`),p+=")"),new he(ee.INVALID_ARGUMENT,g+s+p)}function QE(s,e){return s.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new c4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($g("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class c4 extends GE{data(){return super.data()}}function $g(s,e){return typeof e=="string"?Yg(s,e):e instanceof xc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xg{}class h4 extends Xg{}function Hi(s,e,...n){let i=[];e instanceof Xg&&i.push(e),i=i.concat(n),function(c){const d=c.filter(p=>p instanceof Wg).length,g=c.filter(p=>p instanceof nd).length;if(d>1||d>0&&g>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)s=o._apply(s);return s}class nd extends h4{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new nd(e,n,i)}_apply(e){const n=this._parse(e);return KE(e._query,n),new To(e.firestore,e.converter,Bm(e._query,n))}_parse(e){const n=ed(e.firestore);return function(c,d,g,p,y,b,A){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){sx(A,b);const P=[];for(const j of A)P.push(rx(p,c,j));T={arrayValue:{values:P}}}else T=rx(p,c,A)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||sx(A,b),T=o4(g,d,A,b==="in"||b==="not-in");return bt.create(y,b,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gs(s,e,n){const i=e,o=$g("where",s);return nd._create(o,i,n)}class Wg extends Xg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,c){let d=o;const g=c.getFlattenedFilters();for(const p of g)KE(d,p),d=Bm(d,p)}(e._query,n),new To(e.firestore,e.converter,Bm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rx(s,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qb(e)&&n.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(nt.fromString(n));if(!ye.isDocumentKey(i))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return x_(s,new ye(i))}if(n instanceof Tt)return x_(s,n._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uh(n)}.`)}function sx(s,e){if(!Array.isArray(s)||s.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KE(s,e){const n=function(o,c){for(const d of o)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class d4{convertValue(e,n="none"){switch(Xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ei(e,(o,c)=>{i[o]=this.convertValue(c,n)}),i}convertVectorValue(e){const n=e.fields?.[Th].arrayValue?.values?.map(i=>gt(i.doubleValue));return new _r(n)}convertGeoPoint(e){return new vr(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Bh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ec(e));default:return null}}convertTimestamp(e){const n=Ys(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=nt.fromString(e);Qe(cE(i),9688,{name:e});const o=new tc(i.get(1),i.get(3)),c=new ye(i.popFirst(5));return o.isEqual(n)||es(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class ql{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fi extends GE{constructor(e,n,i,o,c,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field($g("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Fi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Fi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fi._jsonSchema={type:Et("string",Fi._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};class hh extends Fi{data(e={}){return super.data(e)}}class to{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ql(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new hh(this._firestore,this._userDataWriter,i.key,i,new ql(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>{const p=new hh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ql(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>c||g.type!==3).map(g=>{const p=new hh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ql(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),b=d.indexOf(g.doc.key)),{type:f4(g.type),doc:p,oldIndex:y,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=to._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach(c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function f4(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(s){s=ts(s,Tt);const e=ts(s.firestore,wo);return JC(Zh(e),s._key).then(n=>g4(e,s,n))}to._jsonSchemaVersion="firestore/querySnapshot/1.0",to._jsonSchema={type:Et("string",to._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};class $E extends d4{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function Ec(s){s=ts(s,To);const e=ts(s.firestore,wo),n=Zh(e),i=new $E(e);return u4(s._query),e4(n,s._query).then(o=>new to(e,i,s,o))}function m4(s,e,n,...i){s=ts(s,Tt);const o=ts(s.firestore,wo),c=ed(o);let d;return d=typeof(e=wt(e))=="string"||e instanceof xc?BE(c,"updateDoc",s._key,e,n,i):qE(c,"updateDoc",s._key,e),Jg(o,[d.toMutation(s._key,xn.exists(!0))])}function Zg(s,e){const n=ts(s.firestore,wo),i=_c(s),o=YE(s.converter,e);return Jg(n,[zE(ed(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,xn.exists(!1))]).then(()=>i)}function Jg(s,e){return function(i,o){const c=new Xr;return i.asyncQueue.enqueueAndForget(async()=>qC(await ZC(i),o,c)),c.promise}(Zh(s),e)}function g4(s,e,n){const i=n.docs.get(e._key),o=new $E(s);return new Fi(s,o,e._key,i,new ql(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ed(e)}set(e,n,i){this._verifyNotCommitted();const o=Am(e,this._firestore),c=YE(o.converter,n,i),d=zE(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,i);return this._mutations.push(d.toMutation(o._key,xn.none())),this}update(e,n,i,...o){this._verifyNotCommitted();const c=Am(e,this._firestore);let d;return d=typeof(n=wt(n))=="string"||n instanceof xc?BE(this._dataReader,"WriteBatch.update",c._key,n,i,o):qE(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Am(e,this._firestore);return this._mutations=this._mutations.concat(new Rg(n._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Am(s,e){if((s=wt(s)).firestore!==e)throw new he(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function ep(){return new Gg("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(s){return Zh(s=ts(s,wo)),new p4(s,e=>Jg(s,e))}(function(e,n=!0){(function(o){_o=o})(po),no(new Gi("firestore",(i,{instanceIdentifier:o,options:c})=>{const d=i.getProvider("app").getImmediate(),g=new wo(new oR(i.getProvider("auth-internal")),new uR(d,i.getProvider("app-check-internal")),function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(y.options.projectId,b)}(d,o),d);return c={useFetchStreams:n,...c},g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),Bs(o_,l_,e),Bs(o_,l_,"esm2020")})();const v4={apiKey:"AIzaSyDU7Fh6jxX8iaNq_zLrc9WgePfPPzgSsyg",authDomain:"quiziti-platform.firebaseapp.com",projectId:"quiziti-platform",storageBucket:"quiziti-platform.firebasestorage.app",messagingSenderId:"21585904441",appId:"1:21585904441:web:947eda90057758d9b81ee8"},XE=Dx(v4),tp=tR(XE),cn=n4(XE),np=async s=>{try{const e=await rd(_c(cn,"users",s));return e.exists()?{success:!0,data:{id:e.id,...e.data()}}:{success:!1,error:"User not found"}}catch(e){return console.error("Error getting user:",e),{success:!1,error:e.message}}},WE=async s=>{try{return{success:!0,id:(await Zg(ni(cn,"questions"),{...s,createdAt:ep()})).id}}catch(e){return console.error("Error creating question:",e),{success:!1,error:e.message}}},ix=async(s={})=>{try{let e=ni(cn,"questions");s.subject&&(e=Hi(e,Gs("subject","==",s.subject))),s.chapter&&(e=Hi(e,Gs("chapter","==",s.chapter))),s.authorId&&(e=Hi(e,Gs("authorId","==",s.authorId)));const n=await Ec(e),i=[];return n.forEach(o=>{i.push({id:o.id,...o.data()})}),{success:!0,data:i}}catch(e){return console.error("Error getting questions:",e),{success:!1,error:e.message}}},_4=async s=>{try{const e=[];for(const n of s){const i=await rd(_c(cn,"questions",n));i.exists()&&e.push({id:i.id,...i.data()})}return{success:!0,data:e}}catch(e){return console.error("Error getting questions by IDs:",e),{success:!1,error:e.message}}},x4=async s=>{try{return{success:!0,id:(await Zg(ni(cn,"quizzes"),{...s,isActive:!0,createdAt:ep()})).id}}catch(e){return console.error("Error creating quiz:",e),{success:!1,error:e.message}}},ZE=async(s=null)=>{try{let n=ni(cn,"quizzes");s&&(n=Hi(n,Gs("createdBy","==",s)));const i=await Ec(n),o=[];return i.forEach(c=>{try{const d=c.data();console.log("Quiz data for",c.id,":",{title:d.title,questions:d.questions?d.questions.length:"No questions field",questionsArray:Array.isArray(d.questions),hasQuestions:!!d.questions}),o.push({id:c.id,...d})}catch(d){console.error("Error processing quiz document:",c.id,d)}}),{success:!0,data:o}}catch(e){return console.error("Error getting quizzes:",e),{success:!1,error:e.message}}},JE=async s=>{try{const e=await rd(_c(cn,"quizzes",s));return e.exists()?{success:!0,data:{id:e.id,...e.data()}}:{success:!1,error:"Quiz not found"}}catch(e){return console.error("Error getting quiz:",e),{success:!1,error:e.message}}},b4=async s=>{try{return{success:!0,id:(await Zg(ni(cn,"quizAttempts"),{...s,dateTaken:ep()})).id}}catch(e){return console.error("Error creating quiz attempt:",e),{success:!1,error:e.message}}},e1=async(s,e)=>{try{const n=Hi(ni(cn,"quizAttempts"),Gs("studentId","==",s),Gs("quizId","==",e));return{success:!0,hasAttempted:!(await Ec(n)).empty}}catch(n){return console.error("Error checking quiz attempt:",n),{success:!1,error:n.message,hasAttempted:!1}}},rp=async(s={})=>{try{let n=ni(cn,"quizAttempts");s.studentId&&(n=Hi(n,Gs("studentId","==",s.studentId))),s.quizId&&(n=Hi(n,Gs("quizId","==",s.quizId)));const i=await Ec(n),o=[];return i.forEach(c=>{try{const d=c.data();let g=d.score||0,p=d.percentage;d.totalQuestions>0&&(!p||d.score>d.totalQuestions?(p=d.score,g=Math.round(d.score/100*d.totalQuestions),console.log(`Legacy data detected for attempt ${c.id}:`,{oldScore:d.score,newScore:g,percentage:p,totalQuestions:d.totalQuestions})):p==null&&(p=Math.round(d.score/d.totalQuestions*100)));const y={id:c.id,...d,score:g,percentage:p||0,dateTaken:d.dateTaken||new Date,completedAt:d.dateTaken||d.completedAt||new Date};o.push(y)}catch(d){console.error("Error processing document:",c.id,d)}}),o.sort((c,d)=>{try{const g=c.dateTaken?.toDate?c.dateTaken.toDate():new Date(c.dateTaken);return(d.dateTaken?.toDate?d.dateTaken.toDate():new Date(d.dateTaken))-g}catch(g){return console.error("Error sorting attempts:",g),0}}),{success:!0,data:o}}catch(e){return console.error("Error in getQuizAttempts:",e),{success:!1,error:e.message}}},E4=async(s,e)=>{try{const n=_c(cn,"quizzes",s);return await m4(n,{isActive:e}),{success:!0}}catch(n){return console.error("Error updating quiz status:",n),{success:!1,error:n.message}}},T4=async()=>{try{const s=ni(cn,"quizAttempts"),e=await Ec(s);let n=0;const i=y4(cn);for(const o of e.docs){const c=o.data();let d=!1;const g={};if((c.percentage>100||c.percentage===0)&&c.score&&c.totalQuestions&&c.totalQuestions>0&&(c.score<=c.totalQuestions?(g.percentage=Math.round(c.score/c.totalQuestions*100),d=!0):c.score<=100&&(g.percentage=c.score,g.score=Math.round(c.score/100*c.totalQuestions),d=!0)),!c.totalQuestions&&c.quizId)try{const p=await rd(o(cn,"quizzes",c.quizId));if(p.exists()){const y=p.data();y.questions&&y.questions.length>0&&(g.totalQuestions=y.questions.length,d=!0,c.score&&!g.percentage&&(g.percentage=Math.round(c.score/g.totalQuestions*100)))}}catch(p){console.error("Error fetching quiz for attempt:",o.id,p)}d&&(i.update(o.ref,g),n++,console.log(`Fixing attempt ${o.id}:`,g))}return n>0?(await i.commit(),{success:!0,message:`Fixed ${n} quiz attempt records`}):{success:!0,message:"No data issues found - all records are correct"}}catch(s){return console.error("Error cleaning up score data:",s),{success:!1,error:s.message}}},w4=async(s,e)=>{try{const i=(await zS(tp,s,e)).user,o=await np(i.uid);return o.success?{success:!0,user:{uid:i.uid,email:i.email,...o.data}}:{success:!1,error:o.error}}catch(n){return console.error("Error signing in:",n),{success:!1,error:n.message}}},A4=async()=>{try{return await FS(tp),{success:!0}}catch(s){return console.error("Error signing out:",s),{success:!1,error:s.message}}},S4=s=>HS(tp,s),t1=q.createContext(),Ji=()=>{const s=q.useContext(t1);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},N4=({children:s})=>{const[e,n]=q.useState(null),[i,o]=q.useState(!0),[c,d]=q.useState(null);q.useEffect(()=>S4(async A=>{if(A)try{const T=await np(A.uid);T.success?n({uid:A.uid,email:A.email,...T.data}):(console.error("Error fetching user data:",T.error),n({uid:A.uid,email:A.email}))}catch(T){console.error("Error in auth state change:",T),n({uid:A.uid,email:A.email})}else n(null);o(!1)}),[]);const y={currentUser:e,login:async(b,A)=>{try{d(null);const T=await w4(b,A);return T.success?{success:!0}:(d(T.error),{success:!1,error:T.error})}catch(T){return d(T.message),{success:!1,error:T.message}}},logout:async()=>{try{d(null);const b=await A4();return b.success?(n(null),{success:!0}):(d(b.error),{success:!1,error:b.error})}catch(b){return d(b.message),{success:!1,error:b.message}}},loading:i,error:c,setError:d};return f.jsx(t1.Provider,{value:y,children:!i&&s})},zi=({children:s,requiredRole:e=null})=>{const{currentUser:n}=Ji();return n?e&&n.role!==e?f.jsx($l,{to:"/unauthorized",replace:!0}):s:f.jsx($l,{to:"/login",replace:!0})},R4=()=>{const[s,e]=q.useState(""),[n,i]=q.useState(""),[o,c]=q.useState(!1),{currentUser:d,login:g,error:p,setError:y}=Ji();if(d)return f.jsx($l,{to:d.role==="lecturer"?"/lecturer-dashboard":"/student-dashboard",replace:!0});const b=async A=>{A.preventDefault(),c(!0),y(null),(await g(s,n)).success||c(!1)};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsx("div",{className:"max-w-md w-full space-y-8",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"mx-auto h-16 w-16 bg-indigo-600 rounded-full flex items-center justify-center mb-4",children:f.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),f.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Welcome to QuizITI"}),f.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to your account to continue"})]}),f.jsxs("form",{className:"space-y-6",onSubmit:b,children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 placeholder-gray-500",placeholder:"Enter your email",value:s,onChange:A=>e(A.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 placeholder-gray-500",placeholder:"Enter your password",value:n,onChange:A=>i(A.target.value)})]})]}),p&&f.jsx("div",{className:"rounded-lg bg-red-50 border border-red-200 p-4",children:f.jsxs("div",{className:"flex",children:[f.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),f.jsx("div",{className:"ml-3",children:f.jsx("p",{className:"text-sm font-medium text-red-800",children:p})})]})}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:o?f.jsxs("div",{className:"flex items-center",children:[f.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"})}),f.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[f.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Demo Accounts:"}),f.jsxs("div",{className:"space-y-1 text-xs text-blue-700",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Lecturer:"})," lecturer@quiziti.com / password123"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Student:"})," student1@quiziti.com / password123"]})]})]})]})]})})})},I4=({children:s,activeTab:e,setActiveTab:n,userRole:i})=>{const{currentUser:o,logout:c}=Ji(),[d,g]=q.useState(!1),b=i==="lecturer"?[{id:"overview",label:"Overview",icon:""},{id:"quizzes",label:"Quiz Management",icon:""},{id:"analytics",label:"Analytics",icon:""},{id:"students",label:"Students",icon:""},{id:"question-bank",label:"Question Bank",icon:""}]:[{id:"dashboard",label:"Dashboard",icon:""},{id:"quizzes",label:"Take Quiz",icon:""},{id:"results",label:"My Results",icon:""}],A=async()=>{try{await c()}catch(T){console.error("Logout error:",T)}};return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:f.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"QuizITI"}),f.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:i==="lecturer"?"Lecturer Portal":"Student Portal"})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>g(!d),className:"flex items-center space-x-3 text-sm bg-white border border-gray-200 rounded-lg px-3 py-2 hover:bg-gray-50 transition-colors",children:[f.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:f.jsx("span",{className:"text-indigo-600 font-medium",children:(o?.name||o?.email||"U").charAt(0).toUpperCase()})}),f.jsxs("div",{className:"text-left",children:[f.jsx("div",{className:"font-medium text-gray-900",children:o?.name||"User"}),f.jsx("div",{className:"text-xs text-gray-500",children:o?.email})]}),f.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&f.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[f.jsx("button",{onClick:()=>g(!1),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Profile Settings"}),f.jsx("button",{onClick:()=>g(!1),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Preferences"}),f.jsx("hr",{className:"my-1"}),f.jsx("button",{onClick:A,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Sign Out"})]})]})]})}),f.jsxs("div",{className:"flex",children:[f.jsx("aside",{className:"w-64 bg-white border-r border-gray-200 shadow-sm min-h-screen",children:f.jsx("nav",{className:"p-4 space-y-2",children:b.map(T=>f.jsxs("button",{onClick:()=>n(T.id),className:`w-full flex items-center space-x-3 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${e===T.id?"bg-indigo-50 text-indigo-700 border-r-2 border-indigo-500":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[f.jsx("span",{className:"text-lg",children:T.icon}),f.jsx("span",{children:T.label})]},T.id))})}),f.jsx("main",{className:"flex-1 p-6",children:f.jsx("div",{className:"max-w-7xl mx-auto",children:s})})]}),d&&f.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>g(!1)})]})},C4=()=>{const{currentUser:s,logout:e}=Ji(),[n,i]=q.useState([]),[o,c]=q.useState([]),[d,g]=q.useState(new Set),[p,y]=q.useState(!0),[b,A]=q.useState(null),[T,U]=q.useState("dashboard");q.useEffect(()=>{const j=async()=>{try{if(y(!0),A(null),!s||!s.uid){A("User not authenticated");return}try{console.log("Fetching quizzes for student...");const L=await ZE();if(console.log("Raw quiz result:",L),L.success){console.log("All quizzes from database:",L.data),console.log("Total quiz count:",L.data.length),L.data.forEach(re=>{console.log(`Quiz "${re.title}": isActive = ${re.isActive}`)});const Y=L.data.filter(re=>re.isActive!==!1);console.log("Filtered active quizzes:",Y),console.log("Active quiz count:",Y.length),i(Y);const ae=new Set;for(const re of Y)try{const ge=await e1(s.uid,re.id);ge.success&&ge.hasAttempted&&ae.add(re.id)}catch(ge){console.error("Error checking attempt for quiz:",re.id,ge)}g(ae)}else console.error("Failed to load quizzes:",L.error),A("Failed to load quizzes: "+L.error)}catch(L){console.error("Error fetching quizzes:",L),A("Error fetching quizzes: "+L.message)}try{const L=await rp({studentId:s.uid});if(L.success)if(L.data.length>0){const Y=[];for(const ae of L.data){const re={...ae,quizTitle:ae.quizTitle||"Unknown Quiz",quizChapter:ae.quizChapter||"Unknown Chapter"};Y.push(re)}c(Y)}else c([]);else c([])}catch(L){console.error("Error fetching attempts:",L),c([])}}catch(L){console.error("Error in fetchData:",L),A("Failed to load dashboard data: "+L.message)}finally{y(!1)}};s&&s.uid?j():(y(!1),A("Please log in to view dashboard"))},[s]);const P=j=>j?new Date(j.seconds*1e3).toLocaleDateString():"N/A";return p?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),f.jsx("p",{className:"mt-4 text-text",children:"Loading dashboard..."})]})}):f.jsxs(I4,{activeTab:T,setActiveTab:U,userRole:"student",children:[b&&f.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:b}),T==="dashboard"&&f.jsx("div",{children:f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center",children:f.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:(s.name||s.email||"S").charAt(0).toUpperCase()})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s.name||"Student"}),f.jsx("p",{className:"text-gray-600",children:s.email})]})]}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:o.length}),f.jsx("div",{className:"text-sm text-gray-600",children:"Total Attempts"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[o.length>0?Math.round(o.reduce((j,L)=>j+(L.percentage||0),0)/o.length):0,"%"]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Average Score"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[o.length>0?Math.max(...o.map(j=>j.percentage||0)):0,"%"]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Best Score"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o.filter(j=>(j.percentage||0)>=70).length}),f.jsx("div",{className:"text-sm text-gray-600",children:"Passed Quizzes"})]})]}),f.jsxs("div",{className:"mt-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Performance Progress"}),o.length===0?f.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[f.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-gray-200 rounded-full flex items-center justify-center",children:f.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),f.jsx("h4",{className:"text-md font-medium text-gray-700 mb-2",children:"No Progress Data Yet"}),f.jsx("p",{className:"text-sm text-gray-500",children:"Take your first quiz to see your progress chart!"})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-100",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Performance"}),f.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[Math.round(o.reduce((j,L)=>j+(L.percentage||0),0)/o.length),"%"]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:f.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-3 rounded-full transition-all duration-1000",style:{width:`${Math.round(o.reduce((j,L)=>j+(L.percentage||0),0)/o.length)}%`}})})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[f.jsx("div",{className:"text-xs text-green-600 font-medium",children:" Excellent (90%+)"}),f.jsx("div",{className:"text-lg font-bold text-green-700",children:o.filter(j=>(j.percentage||0)>=90).length}),f.jsx("div",{className:"w-full bg-green-200 rounded-full h-1 mt-1",children:f.jsx("div",{className:"bg-green-500 h-1 rounded-full",style:{width:`${o.length>0?o.filter(j=>(j.percentage||0)>=90).length/o.length*100:0}%`}})})]}),f.jsxs("div",{className:"bg-red-50 rounded-lg p-3 border border-red-200",children:[f.jsx("div",{className:"text-xs text-red-600 font-medium",children:" Need Improvement"}),f.jsx("div",{className:"text-lg font-bold text-red-700",children:o.filter(j=>(j.percentage||0)<50).length}),f.jsx("div",{className:"w-full bg-red-200 rounded-full h-1 mt-1",children:f.jsx("div",{className:"bg-red-500 h-1 rounded-full",style:{width:`${o.length>0?o.filter(j=>(j.percentage||0)<50).length/o.length*100:0}%`}})})]})]})]})]})]})}),T==="take-quiz"&&f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[f.jsxs("div",{className:"flex items-center mb-6",children:[f.jsx("div",{className:"h-8 w-8 bg-indigo-100 rounded-lg flex items-center justify-center mr-3",children:f.jsx("svg",{className:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),f.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Available Quizzes"})]}),f.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:f.jsxs("p",{className:"text-sm text-yellow-800",children:["Debug: Loaded ",n.length," quizzes | Loading: ",p?"Yes":"No",b&&f.jsxs("span",{className:"text-red-600",children:[" | Error: ",b]})]})}),n.length===0?f.jsxs("div",{className:"text-center py-8",children:[f.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),f.jsx("p",{className:"text-gray-500 mt-2",children:"No quizzes available at the moment."})]}):f.jsx("div",{className:"max-h-96 overflow-y-auto pr-2",children:f.jsx("div",{className:"space-y-4",children:n.map(j=>{const L=d.has(j.id);return f.jsx("div",{className:`border rounded-lg p-5 transition-all duration-200 ${L?"border-gray-300 bg-gray-50":"border-gray-200 hover:border-indigo-300 hover:shadow-md"}`,children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("h3",{className:`font-semibold text-lg ${L?"text-gray-600":"text-gray-900"}`,children:j.title}),L&&f.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium",children:" Completed"})]}),f.jsxs("div",{className:"mt-2 space-y-1",children:[f.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[f.jsx("span",{className:"font-medium text-gray-700",children:"Chapter:"}),f.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:j.chapter})]}),f.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[f.jsx("svg",{className:"h-4 w-4 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),j.timeLimitMinutes," minutes"]}),f.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[f.jsx("svg",{className:"h-4 w-4 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),j.questions?j.questions.length:j.questionIds?j.questionIds.length:0," questions"]})]})]}),L?f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"bg-gray-500 text-white px-6 py-3 rounded-lg text-sm font-semibold cursor-not-allowed border border-gray-600",children:"Already Attempted"}),f.jsx("p",{className:"text-xs text-gray-700 mt-1 font-medium",children:"One attempt only"})]}):f.jsx(Mn,{to:`/take-quiz/${j.id}`,onClick:()=>console.log("Starting quiz:",j.id,j.title),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg text-sm font-semibold transition-colors duration-200 shadow-sm hover:shadow-md border border-indigo-700",children:"Start Quiz"})]})},j.id)})})})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[f.jsxs("div",{className:"flex items-center mb-6",children:[f.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:f.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),f.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Past Results"})]}),o.length===0?f.jsxs("div",{className:"text-center py-8",children:[f.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),f.jsx("p",{className:"text-gray-500 mt-2",children:"No quiz attempts yet."}),f.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Take your first quiz to see results here!"})]}):f.jsx("div",{className:"max-h-96 overflow-y-auto pr-2",children:f.jsx("div",{className:"space-y-4",children:o.map(j=>f.jsx("div",{className:"border border-gray-200 rounded-lg p-5 hover:shadow-md transition-shadow duration-200",children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:j.quizTitle}),f.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Chapter: ",j.quizChapter]}),f.jsxs("div",{className:"mt-2 space-y-2",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Score:"}),f.jsxs("span",{className:`text-2xl font-bold ${(j.percentage||0)>=70?"text-green-600":(j.percentage||0)>=50?"text-yellow-600":"text-red-600"}`,children:[j.percentage||0,"%"]})]}),f.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[f.jsx("svg",{className:"h-4 w-4 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),j.timeTakenMinutes," minutes"]}),f.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[f.jsx("svg",{className:"h-4 w-4 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a4 4 0 118 0v4m-4 8a2 2 0 100-4 2 2 0 000 4zm6 2a2 2 0 11-4 0 2 2 0 014 0z"})}),P(j.dateTaken)]})]})]}),f.jsx("div",{className:"text-right ml-4",children:f.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${(j.percentage||0)>=70?"bg-green-100 text-green-800 border border-green-200":(j.percentage||0)>=50?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-red-100 text-red-800 border border-red-200"}`,children:(j.percentage||0)>=70?" Excellent":(j.percentage||0)>=50?" Good":" Needs Work"})})]})},j.id))})})]})]}),T==="results"&&f.jsx("div",{children:f.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[f.jsxs("div",{className:"flex items-center mb-6",children:[f.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:f.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),f.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"My Quiz Results"})]}),o.length===0?f.jsxs("div",{className:"text-center py-12",children:[f.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),f.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No Results Yet"}),f.jsx("p",{className:"mt-2 text-gray-500",children:"You haven't completed any quizzes yet. Take your first quiz to see your results here!"})]}):f.jsx("div",{className:"space-y-4",children:o.map((j,L)=>f.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2",children:j.quizTitle}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Score:"}),f.jsxs("span",{className:"ml-2 font-medium",children:[j.score,"/",j.totalQuestions]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Percentage:"}),f.jsxs("span",{className:"ml-2 font-medium",children:[j.percentage||0,"%"]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Time:"}),f.jsx("span",{className:"ml-2 font-medium",children:j.timeTaken||"N/A"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Date:"}),f.jsx("span",{className:"ml-2 font-medium",children:j.completedAt?.toDate?j.completedAt.toDate().toLocaleDateString():"Recently"})]})]})]}),f.jsx("div",{className:"text-right ml-4",children:f.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${(j.percentage||0)>=70?"bg-green-100 text-green-800 border border-green-200":(j.percentage||0)>=50?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-red-100 text-red-800 border border-red-200"}`,children:(j.percentage||0)>=70?" Excellent":(j.percentage||0)>=50?" Good":" Needs Work"})})]})},L))})]})})]})},j4=({student:s,attempts:e,quizzes:n,isOpen:i,onClose:o})=>{if(!i||!s)return null;const c=e.filter(T=>T.studentId===s.id),d=c.length,g=d>0?Math.round(c.reduce((T,U)=>T+(U.percentage||0),0)/d):0,p=d>0?Math.max(...c.map(T=>T.percentage||0)):0,y=c.sort((T,U)=>{const P=T.dateTaken?.toDate?T.dateTaken.toDate():new Date(T.dateTaken);return(U.dateTaken?.toDate?U.dateTaken.toDate():new Date(U.dateTaken))-P}).slice(0,5),b=T=>{if(!T)return"N/A";const U=T.toDate?T.toDate():new Date(T);return U.toLocaleDateString()+" "+U.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},A=T=>T>=90?"bg-green-100 text-green-800":T>=70?"bg-blue-100 text-blue-800":T>=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"h-12 w-12 rounded-full bg-indigo-100 flex items-center justify-center mr-4",children:f.jsx("span",{className:"text-lg font-bold text-indigo-600",children:(s.name||s.email||"Unknown").charAt(0).toUpperCase()})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.name||"Unknown Student"}),f.jsx("p",{className:"text-gray-600",children:s.email})]})]}),f.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:f.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[f.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[f.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d}),f.jsx("div",{className:"text-sm text-blue-700",children:"Total Attempts"})]}),f.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[f.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[g,"%"]}),f.jsx("div",{className:"text-sm text-green-700",children:"Average Score"})]}),f.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[f.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[p,"%"]}),f.jsx("div",{className:"text-sm text-purple-700",children:"Best Score"})]}),f.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[f.jsx("div",{className:"text-2xl font-bold text-orange-600",children:c.filter(T=>(T.percentage||0)>=70).length}),f.jsx("div",{className:"text-sm text-orange-700",children:"Passed Quizzes"})]})]}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Progress"}),f.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:f.jsx("div",{className:"flex items-center justify-center h-32",children:f.jsxs("div",{className:"text-center",children:[f.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),f.jsx("p",{className:"text-gray-500",children:"Progress Chart"}),f.jsx("p",{className:"text-sm text-gray-400",children:"Visual progress tracking coming soon"})]})})})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Quiz Attempts"}),y.length===0?f.jsx("div",{className:"text-center py-8",children:f.jsx("p",{className:"text-gray-500",children:"No quiz attempts found"})}):f.jsx("div",{className:"space-y-3",children:y.map((T,U)=>f.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:"font-medium text-gray-900",children:T.quizTitle||"Unknown Quiz"}),f.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Attempted on ",b(T.dateTaken)]}),f.jsxs("p",{className:"text-sm text-gray-500",children:["Time taken: ",T.timeTakenMinutes||Math.round((T.timeSpent||0)/60)," minutes"]})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${A(T.percentage||0)}`,children:[T.percentage||0,"%"]}),f.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[T.score||0,"/",T.totalQuestions||0," correct"]})]})]})},T.id||U))})]})]}),f.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:f.jsx("button",{onClick:o,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Close"})})]})})},D4=()=>{const{currentUser:s,logout:e}=Ji(),[n,i]=q.useState("overview"),[o,c]=q.useState([]),[d,g]=q.useState([]),[p,y]=q.useState([]),[b,A]=q.useState(!0),[T,U]=q.useState(null),[P,j]=q.useState({totalQuizzes:0,activeQuizzes:0,totalAttempts:0,uniqueStudents:0,averageScore:0,performanceDistribution:{excellent:0,good:0,average:0,needsImprovement:0}}),[L,Y]=q.useState(null),[ae,re]=q.useState(!1);q.useEffect(()=>{s?.uid&&(ge(),window.fixScoreData=Ae)},[s?.uid]);const ge=async()=>{try{A(!0),U(null);const S=await ZE(s.uid);if(S.success)console.log("Fetched quizzes in dashboard:",S.data),c(S.data);else throw new Error(S.error);const N=await rp(s.uid);if(N.success)g(N.data);else throw new Error(N.error);se(S.data,N.data)}catch(S){console.error("Error fetching data:",S),U(S.message)}finally{A(!1)}},se=(S,N)=>{const Ce=S.length,oe=S.filter(X=>X.isActive!==!1).length,H=N.length,ue=[...new Set(N.map(X=>X.studentId))].length,je=N.reduce((X,fe)=>X+(fe.percentage||0),0),O=H>0?Math.round(je/H):0,Z={excellent:N.filter(X=>(X.percentage||0)>=90).length,good:N.filter(X=>(X.percentage||0)>=70&&(X.percentage||0)<90).length,average:N.filter(X=>(X.percentage||0)>=50&&(X.percentage||0)<70).length,needsImprovement:N.filter(X=>(X.percentage||0)<50).length};j({totalQuizzes:Ce,activeQuizzes:oe,totalAttempts:H,uniqueStudents:ue,averageScore:O,performanceDistribution:Z});const le=new Map;N.forEach(X=>{le.has(X.studentId)||le.set(X.studentId,{id:X.studentId,name:X.studentName||X.studentEmail||"Unknown",email:X.studentEmail||"",attempts:[],totalAttempts:0,averageScore:0,bestScore:0,passedQuizzes:0});const fe=le.get(X.studentId);fe.attempts.push(X),fe.totalAttempts++;const Te=X.percentage||0;Te>fe.bestScore&&(fe.bestScore=Te),Te>=50&&fe.passedQuizzes++}),le.forEach(X=>{const fe=X.attempts.reduce((Te,ve)=>Te+(ve.percentage||0),0);X.averageScore=X.attempts.length>0?Math.round(fe/X.attempts.length):0}),y(Array.from(le.values()))},Ae=async()=>{try{const S=await T4();S.success?(alert(`Success! ${S.message}`),ge()):alert(`Error: ${S.message}`)}catch(S){console.error("Error during cleanup:",S),alert("Failed to cleanup score data. Check console for details.")}},V=async(S,N)=>{try{const Ce=await E4(S,!N);Ce.success?c(o.map(oe=>oe.id===S?{...oe,isActive:!N}:oe)):alert("Failed to update quiz status: "+Ce.error)}catch(Ce){console.error("Error toggling quiz status:",Ce),alert("Failed to update quiz status")}},I=S=>{Y(S),re(!0)},R=()=>{Y(null),re(!1)},D=S=>S>=90?"text-green-600":S>=70?"text-blue-600":S>=50?"text-yellow-600":"text-red-600",M=async()=>{try{await e()}catch(S){console.error("Logout error:",S)}};return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:f.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"QuizITI"}),f.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:"Lecturer Portal"})]}),f.jsxs("div",{className:"flex items-center space-x-3 text-sm bg-white border border-gray-200 rounded-lg px-3 py-2",children:[f.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:f.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),f.jsxs("div",{className:"hidden md:block",children:[f.jsx("p",{className:"font-medium text-gray-900",children:s.name||"Lecturer"}),f.jsx("p",{className:"text-xs text-gray-500",children:s.email})]}),f.jsxs("button",{onClick:M,className:"ml-3 bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors flex items-center space-x-1",children:[f.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),f.jsx("span",{children:"Logout"})]})]})]})}),f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b&&f.jsxs("div",{className:"flex items-center justify-center py-12",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),f.jsx("span",{className:"ml-2 text-gray-600",children:"Loading dashboard..."})]}),T&&f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:f.jsxs("div",{className:"flex",children:[f.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),f.jsx("p",{className:"mt-1 text-sm text-red-700",children:T})]})]})}),!b&&!T&&f.jsxs("div",{children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[f.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"p-3 rounded-full bg-indigo-100",children:f.jsx("svg",{className:"h-6 w-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),f.jsxs("div",{className:"ml-4",children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Quizzes"}),f.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.totalQuizzes||0})]})]})}),f.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"p-3 rounded-full bg-green-100",children:f.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsxs("div",{className:"ml-4",children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Quizzes"}),f.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.activeQuizzes||0})]})]})}),f.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:f.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),f.jsxs("div",{className:"ml-4",children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),f.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.uniqueStudents||0})]})]})}),f.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"p-3 rounded-full bg-yellow-100",children:f.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),f.jsxs("div",{className:"ml-4",children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Score"}),f.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[P.averageScore||0,"%"]})]})]})})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-8",children:[f.jsx("div",{className:"border-b border-gray-200",children:f.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",name:"Overview",icon:""},{id:"quizzes",name:"Quiz Management",icon:""},{id:"analytics",name:"Performance Analytics",icon:""},{id:"students",name:"Student Performance",icon:""}].map(S=>f.jsxs("button",{onClick:()=>i(S.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${n===S.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx("span",{className:"mr-2",children:S.icon}),S.name]},S.id))})}),f.jsxs("div",{className:"p-6",children:[n==="overview"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dashboard Overview"}),f.jsx(Mn,{to:"/create-quiz",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Create New Quiz"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-lg p-6 border border-indigo-200",children:[f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx("div",{className:"p-2 bg-indigo-600 rounded-lg",children:f.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),f.jsx("h4",{className:"ml-3 text-lg font-semibold text-indigo-900",children:"Create Quiz"})]}),f.jsx("p",{className:"text-indigo-700 mb-4",children:"Start building a new quiz for your students"}),f.jsxs(Mn,{to:"/create-quiz",className:"inline-flex items-center text-indigo-600 hover:text-indigo-800 font-medium",children:["Get Started",f.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),f.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6 border border-green-200",children:[f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx("div",{className:"p-2 bg-green-600 rounded-lg",children:f.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),f.jsx("h4",{className:"ml-3 text-lg font-semibold text-green-900",children:"Analytics"})]}),f.jsx("p",{className:"text-green-700 mb-4",children:"View detailed performance analytics"}),f.jsxs("button",{onClick:()=>i("analytics"),className:"inline-flex items-center text-green-600 hover:text-green-800 font-medium",children:["View Analytics",f.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),f.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 border border-blue-200",children:[f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:f.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),f.jsx("h4",{className:"ml-3 text-lg font-semibold text-blue-900",children:"Students"})]}),f.jsx("p",{className:"text-blue-700 mb-4",children:"Monitor individual student progress"}),f.jsxs("button",{onClick:()=>i("students"),className:"inline-flex items-center text-blue-600 hover:text-blue-800 font-medium",children:["View Students",f.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Recent Quizzes"}),f.jsx("button",{onClick:()=>i("quizzes"),className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"View All"})]}),o.length===0?f.jsxs("div",{className:"text-center py-8",children:[f.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),f.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No quizzes yet"}),f.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first quiz."}),f.jsx("div",{className:"mt-6",children:f.jsx(Mn,{to:"/create-quiz",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Create Quiz"})})]}):f.jsx("div",{className:"max-h-64 overflow-y-auto space-y-3",children:o.slice(0,5).map(S=>{const N=d.filter(oe=>oe.quizId===S.id),Ce=S.questions?.length||0;return f.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h5",{className:"font-medium text-gray-900",children:S.title}),f.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[f.jsxs("span",{children:[Ce," questions"]}),f.jsx("span",{children:""}),f.jsx("span",{className:S.isActive!==!1?"text-green-600":"text-gray-500",children:S.isActive!==!1?" Active":" Inactive"}),f.jsx("span",{children:""}),f.jsxs("span",{children:[N.length," attempts"]})]}),S.description&&f.jsx("p",{className:"text-xs text-gray-400 mt-1 truncate",children:S.description})]}),f.jsx("div",{className:"flex items-center space-x-2",children:f.jsx(Mn,{to:`/view-results/${S.id}`,className:"bg-indigo-100 text-indigo-700 hover:bg-indigo-200 px-3 py-1 rounded text-sm font-medium transition-colors",children:"View Results"})})]},S.id)})})]}),d.some(S=>(S.percentage||0)>100)&&f.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h4",{className:"text-lg font-medium text-yellow-800",children:"Data Issue Detected"}),f.jsx("p",{className:"text-sm text-yellow-700 mt-1 mb-4",children:"Some quiz scores appear to be calculated incorrectly (over 100%). Click below to fix this automatically."}),f.jsx("button",{onClick:Ae,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Fix Score Data"})]})]})})]}),n==="quizzes"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quiz Management"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Manage all your quizzes in one place"})]}),f.jsx("div",{className:"flex gap-3",children:f.jsxs(Mn,{to:"/create-quiz",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors inline-flex items-center",children:[f.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Quiz"]})})]}),o.length>0&&f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:f.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Quizzes"}),f.jsx("p",{className:"text-xl font-bold text-blue-900",children:o.length})]})]})}),f.jsx("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"p-2 bg-green-600 rounded-lg",children:f.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("p",{className:"text-sm font-medium text-green-600",children:"Active Quizzes"}),f.jsx("p",{className:"text-xl font-bold text-green-900",children:o.filter(S=>S.isActive!==!1).length})]})]})}),f.jsx("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"p-2 bg-purple-600 rounded-lg",children:f.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Total Attempts"}),f.jsx("p",{className:"text-xl font-bold text-purple-900",children:d.length})]})]})})]}),o.length===0?f.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[f.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),f.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No quizzes created yet"}),f.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Get started by creating your first quiz for students."}),f.jsx("div",{className:"mt-6",children:f.jsxs(Mn,{to:"/create-quiz",className:"inline-flex items-center px-6 py-3 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:[f.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Your First Quiz"]})})]}):f.jsx("div",{className:"space-y-4",children:o.map(S=>{const N=d.filter(oe=>oe.quizId===S.id),Ce=N.length>0?Math.round(N.reduce((oe,H)=>oe+(H.percentage||0),0)/N.length):0;return f.jsx("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:f.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:S.title}),f.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S.isActive!==!1?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.isActive!==!1?" Active":" Inactive"})]}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600 mb-3",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Questions:"})," ",S.questions?.length||0]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Attempts:"})," ",N.length]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Avg Score:"})," ",Ce,"%"]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Created:"})," ",S.createdAt?.toDate?S.createdAt.toDate().toLocaleDateString():"Recently"]})]}),S.description&&f.jsx("p",{className:"text-sm text-gray-500 mb-3",children:S.description})]}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("button",{onClick:()=>V(S.id,S.isActive!==!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${S.isActive!==!1?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:S.isActive!==!1?" Deactivate":" Activate"}),f.jsx(Mn,{to:`/view-results/${S.id}`,className:"bg-blue-100 text-blue-700 hover:bg-blue-200 px-4 py-2 rounded-lg text-sm font-medium transition-colors inline-flex items-center",children:" View Results"}),f.jsx(Mn,{to:"/create-quiz",className:"bg-gray-100 text-gray-700 hover:bg-gray-200 px-4 py-2 rounded-lg text-sm font-medium transition-colors inline-flex items-center",title:"Create a new quiz (Edit functionality coming soon)",children:" Edit"})]})]})},S.id)})})]}),n==="analytics"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Analytics"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive insights into student performance and quiz effectiveness"})]}),d.length===0?f.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[f.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),f.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No analytics data yet"}),f.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Analytics will appear here once students start taking your quizzes."})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[f.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:" Class Performance Distribution"}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[f.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[f.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:P.performanceDistribution.excellent}),f.jsx("div",{className:"text-sm font-medium text-green-800",children:" Excellent"}),f.jsx("div",{className:"text-xs text-green-600",children:"(90% - 100%)"}),f.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[d.length>0?Math.round(P.performanceDistribution.excellent/d.length*100):0,"% of attempts"]})]}),f.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[f.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:P.performanceDistribution.good}),f.jsx("div",{className:"text-sm font-medium text-blue-800",children:" Good"}),f.jsx("div",{className:"text-xs text-blue-600",children:"(70% - 89%)"}),f.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[d.length>0?Math.round(P.performanceDistribution.good/d.length*100):0,"% of attempts"]})]}),f.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[f.jsx("div",{className:"text-3xl font-bold text-yellow-600 mb-2",children:P.performanceDistribution.average}),f.jsx("div",{className:"text-sm font-medium text-yellow-800",children:" Average"}),f.jsx("div",{className:"text-xs text-yellow-600",children:"(50% - 69%)"}),f.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[d.length>0?Math.round(P.performanceDistribution.average/d.length*100):0,"% of attempts"]})]}),f.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg border border-red-200",children:[f.jsx("div",{className:"text-3xl font-bold text-red-600 mb-2",children:P.performanceDistribution.needsImprovement}),f.jsx("div",{className:"text-sm font-medium text-red-800",children:" Needs Help"}),f.jsx("div",{className:"text-xs text-red-600",children:"(< 50%)"}),f.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[d.length>0?Math.round(P.performanceDistribution.needsImprovement/d.length*100):0,"% of attempts"]})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[f.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:" Quiz Performance Breakdown"}),f.jsx("div",{className:"max-h-80 overflow-y-auto space-y-4",children:o.map(S=>{const N=d.filter(H=>H.quizId===S.id),Ce=N.length>0?Math.round(N.reduce((H,ie)=>H+(ie.percentage||0),0)/N.length):0,oe=N.length>0?Math.round(N.filter(H=>(H.percentage||0)>=50).length/N.length*100):0;return f.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h5",{className:"font-medium text-gray-900",children:S.title}),f.jsxs("p",{className:"text-sm text-gray-500",children:[N.length," attempts"]})]}),f.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"font-semibold text-gray-900",children:[Ce,"%"]}),f.jsx("div",{className:"text-gray-500",children:"Avg Score"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"font-semibold text-gray-900",children:[oe,"%"]}),f.jsx("div",{className:"text-gray-500",children:"Pass Rate"})]}),f.jsx(Mn,{to:`/view-results/${S.id}`,className:"bg-indigo-100 text-indigo-700 hover:bg-indigo-200 px-3 py-1 rounded text-sm font-medium transition-colors",children:"View Details"})]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:f.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${Ce>=90?"bg-green-500":Ce>=70?"bg-blue-500":Ce>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(Ce,100)}%`}})})]},S.id)})})]}),f.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[f.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:" Visual Progress Tracking"}),d.length===0?f.jsxs("div",{className:"text-center py-8",children:[f.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:f.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),f.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Progress Data Yet"}),f.jsx("p",{className:"text-gray-500",children:"Progress charts will appear once students start taking your quizzes."})]}):f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"p-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg border border-indigo-100",children:[f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Class Performance"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Average score across all quiz attempts"})]}),f.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:[P.averageScore,"%"]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-2",children:f.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-4 rounded-full transition-all duration-1000 ease-out",style:{width:`${Math.min(P.averageScore||0,100)}%`}})}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[f.jsx("span",{children:"0%"}),f.jsx("span",{children:"50%"}),f.jsx("span",{children:"100%"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("div",{className:"text-xs text-green-600 font-medium",children:" Excellent"}),f.jsx("div",{className:"text-lg font-bold text-green-700",children:P.performanceDistribution.excellent})]}),f.jsx("div",{className:"text-xs text-green-600 mb-2",children:"90% - 100%"}),f.jsx("div",{className:"w-full bg-green-200 rounded-full h-2",children:f.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-700",style:{width:`${d.length>0?P.performanceDistribution.excellent/d.length*100:0}%`}})}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[d.length>0?Math.round(P.performanceDistribution.excellent/d.length*100):0,"% of attempts"]})]}),f.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("div",{className:"text-xs text-blue-600 font-medium",children:" Good"}),f.jsx("div",{className:"text-lg font-bold text-blue-700",children:P.performanceDistribution.good})]}),f.jsx("div",{className:"text-xs text-blue-600 mb-2",children:"70% - 89%"}),f.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:f.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-700",style:{width:`${d.length>0?P.performanceDistribution.good/d.length*100:0}%`}})}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[d.length>0?Math.round(P.performanceDistribution.good/d.length*100):0,"% of attempts"]})]}),f.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:" Average"}),f.jsx("div",{className:"text-lg font-bold text-yellow-700",children:P.performanceDistribution.average})]}),f.jsx("div",{className:"text-xs text-yellow-600 mb-2",children:"50% - 69%"}),f.jsx("div",{className:"w-full bg-yellow-200 rounded-full h-2",children:f.jsx("div",{className:"bg-yellow-500 h-2 rounded-full transition-all duration-700",style:{width:`${d.length>0?P.performanceDistribution.average/d.length*100:0}%`}})}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[d.length>0?Math.round(P.performanceDistribution.average/d.length*100):0,"% of attempts"]})]}),f.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("div",{className:"text-xs text-red-600 font-medium",children:" Need Support"}),f.jsx("div",{className:"text-lg font-bold text-red-700",children:P.performanceDistribution.needsImprovement})]}),f.jsx("div",{className:"text-xs text-red-600 mb-2",children:"Below 50%"}),f.jsx("div",{className:"w-full bg-red-200 rounded-full h-2",children:f.jsx("div",{className:"bg-red-500 h-2 rounded-full transition-all duration-700",style:{width:`${d.length>0?P.performanceDistribution.needsImprovement/d.length*100:0}%`}})}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[d.length>0?Math.round(P.performanceDistribution.needsImprovement/d.length*100):0,"% of attempts"]})]})]}),f.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[f.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:" Class Progress Summary"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:d.length}),f.jsx("div",{className:"text-gray-600",children:"Total Attempts"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[d.length>0?Math.round(d.filter(S=>(S.percentage||0)>=70).length/d.length*100):0,"%"]}),f.jsx("div",{className:"text-gray-600",children:"Pass Rate"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[P.averageScore,"%"]}),f.jsx("div",{className:"text-gray-600",children:"Class Average"})]})]})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[f.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:" Recent Quiz Attempts"}),f.jsx("div",{className:"max-h-64 overflow-y-auto space-y-3",children:d.slice(0,10).map((S,N)=>{const Ce=o.find(ie=>ie.id===S.quizId),oe=S.percentage>=90?"text-green-600":S.percentage>=70?"text-blue-600":S.percentage>=50?"text-yellow-600":"text-red-600",H=S.percentage>=90?"bg-green-100":S.percentage>=70?"bg-blue-100":S.percentage>=50?"bg-yellow-100":"bg-red-100";return f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-gray-900",children:S.studentName||S.studentEmail}),f.jsx("div",{className:"text-sm text-gray-500",children:Ce?.title||"Unknown Quiz"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-semibold ${oe} ${H}`,children:[Math.round(S.percentage||0),"%"]}),f.jsx("div",{className:"text-xs text-gray-500",children:S.completedAt?.toDate?S.completedAt.toDate().toLocaleDateString():"Recently"})]})]},N)})})]})]})]}),n==="students"&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Student Performance"}),p.length===0?f.jsxs("div",{className:"text-center py-12",children:[f.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),f.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No student data"}),f.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Student performance data will appear here once students start taking quizzes."})]}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(S=>f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>I(S),children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("h4",{className:"font-medium text-gray-900 truncate",children:S.name}),f.jsxs("span",{className:"text-xs text-gray-500",children:[S.totalAttempts," attempts"]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Average Score:"}),f.jsxs("span",{className:`font-semibold ${D(S.averageScore)}`,children:[S.averageScore,"%"]})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Best Score:"}),f.jsxs("span",{className:`font-semibold ${D(S.bestScore)}`,children:[S.bestScore,"%"]})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Passed Quizzes:"}),f.jsxs("span",{className:"font-semibold text-gray-900",children:[S.passedQuizzes,"/",S.totalAttempts]})]})]})]},S.id))})]})]})]})]}),f.jsx(j4,{student:L,attempts:d,quizzes:o,isOpen:ae,onClose:R})]})]})},O4=(s,e)=>{let n=0;const i=[];s.forEach((c,d)=>{const g=e[d],p=c.selectedOptionIndex===g.correctOptionIndex;p&&n++,i.push({questionId:g.id,selectedOptionIndex:c.selectedOptionIndex,isCorrect:p})});const o=Math.round(n/e.length*100);return{score:n,percentage:o,correctAnswers:n,totalQuestions:e.length,answers:i}},M4=async s=>{try{const e=await JE(s);if(!e.success)return e;const n=e.data,i=await _4(n.questionIds);return i.success?{success:!0,data:{...n,questions:i.data}}:i}catch(e){return console.error("Error getting quiz with questions:",e),{success:!1,error:e.message}}},k4=s=>{const e=[];return(!s.title||s.title.trim().length===0)&&e.push("Quiz title is required"),(!s.chapter||s.chapter.trim().length===0)&&e.push("Chapter is required"),(!s.timeLimitMinutes||s.timeLimitMinutes<=0)&&e.push("Time limit must be greater than 0"),(!s.questionIds||s.questionIds.length===0)&&e.push("At least one question is required"),{isValid:e.length===0,errors:e}},V4=()=>{const s=[],e={"Basic Electronics":["Semiconductors","Diodes","Transistors","Amplifiers","Power Supplies","Circuit Analysis","Electronic Components","Measurement Techniques"],"Digital Electronics":["Logic Gates","Boolean Algebra","Flip Flops","Counters","Registers","Multiplexers","Decoders","Memory Systems"],"Analog Electronics":["Op-Amps","Oscillators","Filters","Power Amplifiers","Signal Processing","Feedback Systems","Modulation","Communication Systems"],Microprocessors:["8085 Architecture","Instruction Set","Programming","Interfacing","Memory Systems","I/O Operations","Interrupts","Applications"],"Control Systems":["System Modeling","Transfer Functions","Stability Analysis","Root Locus","Frequency Response","PID Controllers","State Space","Digital Control"],"Power Electronics":["Power Diodes","Thyristors","Power MOSFETs","Inverters","Converters","Motor Drives","Power Quality","Renewable Energy"]},n={Diodes:[{questionText:"Half-wave rectifier utilizes what percentage of input AC cycle?",options:["25%","50%","75%","100%"],correctOptionIndex:1,explanation:"Half-wave rectifier uses only one half (50%) of AC input cycle."},{questionText:"Full-wave rectifier efficiency is approximately:",options:["40.6%","60.8%","81.2%","100%"],correctOptionIndex:2,explanation:"Full-wave rectifier has maximum efficiency of 81.2%."},{questionText:"Bridge rectifier uses how many diodes?",options:["1","2","3","4"],correctOptionIndex:3,explanation:"Bridge rectifier uses 4 diodes in bridge configuration."},{questionText:"Center-tap rectifier requires:",options:["1 diode","2 diodes","3 diodes","4 diodes"],correctOptionIndex:1,explanation:"Center-tap full-wave rectifier uses 2 diodes."},{questionText:"PIV for bridge rectifier diode is:",options:["Vm","2Vm","Vm/2","2Vm"],correctOptionIndex:0,explanation:"Each diode in bridge rectifier has PIV = Vm."},{questionText:"Ripple factor of half-wave rectifier:",options:["0.48","1.21","0.81","2.42"],correctOptionIndex:1,explanation:"Half-wave rectifier has ripple factor of 1.21."},{questionText:"Filter capacitor is connected:",options:["In series with load","In parallel with load","In series with diode","Across input"],correctOptionIndex:1,explanation:"Filter capacitor is connected in parallel with load."},{questionText:"Transformer utilization factor is highest for:",options:["Half-wave","Center-tap","Bridge","All equal"],correctOptionIndex:2,explanation:"Bridge rectifier has highest transformer utilization factor."},{questionText:"Rectifier converts:",options:["AC to DC","DC to AC","AC to AC","DC to DC"],correctOptionIndex:0,explanation:"Rectifier converts alternating current to direct current."},{questionText:"Form factor of half-wave rectified output:",options:["1.11","1.57","2.22","3.14"],correctOptionIndex:1,explanation:"Form factor of half-wave rectified sine wave is /2 = 1.57."}],"Zener Diodes":[{questionText:"Zener diode is used in:",options:["Forward bias","Reverse bias","Both bias","Zero bias"],correctOptionIndex:1,explanation:"Zener diode operates in reverse bias for voltage regulation."},{questionText:"Zener breakdown occurs due to:",options:["Thermal effect","Avalanche effect","Electric field effect","All of above"],correctOptionIndex:2,explanation:"Zener breakdown occurs due to strong electric field in depletion region."},{questionText:"Zener voltage remains:",options:["Variable","Constant","Increasing","Decreasing"],correctOptionIndex:1,explanation:"Zener voltage remains approximately constant in breakdown region."},{questionText:"Temperature coefficient of Zener voltage below 5V is:",options:["Positive","Negative","Zero","Infinite"],correctOptionIndex:1,explanation:"Zener diodes below 5V have negative temperature coefficient."},{questionText:"Zener diode symbol has:",options:["Straight line","Curved line","Bent line","Dotted line"],correctOptionIndex:2,explanation:"Zener diode symbol has bent line at cathode end."},{questionText:"Minimum current to maintain Zener action:",options:["Holding current","Knee current","Zener current","Breakdown current"],correctOptionIndex:1,explanation:"Knee current is minimum current to maintain Zener breakdown."},{questionText:"Zener diode acts as:",options:["Amplifier","Oscillator","Voltage regulator","Current regulator"],correctOptionIndex:2,explanation:"Zener diode primarily acts as voltage regulator."},{questionText:"Series resistance with Zener diode:",options:["Increases regulation","Decreases regulation","Limits current","Increases voltage"],correctOptionIndex:2,explanation:"Series resistance limits current through Zener diode."},{questionText:"Zener impedance is:",options:["Very high","Very low","Medium","Infinite"],correctOptionIndex:1,explanation:"Zener diode has very low dynamic impedance in breakdown."},{questionText:"Power rating of Zener diode depends on:",options:["Voltage only","Current only","Both V and I","Temperature only"],correctOptionIndex:2,explanation:"Power rating P = VZ  IZ depends on both voltage and current."}],Semiconductors:[{questionText:"Pure silicon at room temperature acts as:",options:["Conductor","Insulator","Semiconductor","Superconductor"],correctOptionIndex:1,explanation:"Pure silicon at room temperature has very few free electrons, acting as an insulator."},{questionText:"Doping silicon with phosphorus creates:",options:["P-type","N-type","Intrinsic","Compound"],correctOptionIndex:1,explanation:"Phosphorus has 5 valence electrons, providing extra electrons (N-type)."},{questionText:"Energy gap of silicon is approximately:",options:["0.7 eV","1.1 eV","1.4 eV","3.2 eV"],correctOptionIndex:1,explanation:"Silicon has an energy gap of approximately 1.1 eV."},{questionText:"Majority carriers in P-type semiconductor:",options:["Electrons","Holes","Protons","Neutrons"],correctOptionIndex:1,explanation:"In P-type semiconductor, holes are majority carriers."},{questionText:"Fermi level in N-type semiconductor is:",options:["Near valence band","Near conduction band","At center","Outside bands"],correctOptionIndex:1,explanation:"In N-type, Fermi level is closer to conduction band."}],"Logic Gates":[{questionText:"AND gate output is HIGH when:",options:["Any input is HIGH","All inputs are HIGH","No input is HIGH","One input is LOW"],correctOptionIndex:1,explanation:"AND gate output is HIGH only when all inputs are HIGH."},{questionText:"OR gate with inputs A=0, B=1 gives output:",options:["0","1","X","Z"],correctOptionIndex:1,explanation:"OR gate output is HIGH when any input is HIGH."},{questionText:"NOT gate is also called:",options:["Buffer","Inverter","Amplifier","Isolator"],correctOptionIndex:1,explanation:"NOT gate inverts the input, hence called inverter."},{questionText:"NAND gate is equivalent to:",options:["AND + OR","AND + NOT","OR + NOT","XOR + NOT"],correctOptionIndex:1,explanation:"NAND gate is AND gate followed by NOT gate."},{questionText:"Universal gates are:",options:["AND, OR","NAND, NOR","XOR, XNOR","NOT, BUFFER"],correctOptionIndex:1,explanation:"NAND and NOR gates can implement any Boolean function."}],"Op-Amps":[{questionText:"Ideal op-amp has input impedance:",options:["Zero","Finite","Infinite","Unity"],correctOptionIndex:2,explanation:"Ideal op-amp has infinite input impedance."},{questionText:"Op-amp in open loop has gain:",options:["Unity","Zero","Very high","Negative"],correctOptionIndex:2,explanation:"Open loop gain of op-amp is typically 10^5 to 10^6."},{questionText:"Virtual short concept means:",options:["Inputs are shorted","V+ = V-","Infinite current","Zero voltage"],correctOptionIndex:1,explanation:"In virtual short, both inputs are at same potential."},{questionText:"Inverting amplifier has gain:",options:["Positive","Negative","Zero","Infinite"],correctOptionIndex:1,explanation:"Inverting amplifier produces 180 phase shift (negative gain)."},{questionText:"Slew rate is measured in:",options:["V/s","V/s","A/s","Hz"],correctOptionIndex:1,explanation:"Slew rate is maximum rate of change of output voltage (V/s)."}],Transistors:[{questionText:"BJT stands for:",options:["Binary Junction Transistor","Bipolar Junction Transistor","Bi-directional Junction Transistor","Base Junction Transistor"],correctOptionIndex:1,explanation:"BJT stands for Bipolar Junction Transistor."},{questionText:"BJT has how many terminals?",options:["2","3","4","5"],correctOptionIndex:1,explanation:"BJT has three terminals: Base, Collector, and Emitter."},{questionText:"BJT is a:",options:["Voltage controlled device","Current controlled device","Power controlled device","Temperature controlled device"],correctOptionIndex:1,explanation:"BJT is a current controlled device where base current controls collector current."},{questionText:"BJT has how many P-N junctions?",options:["1","2","3","4"],correctOptionIndex:1,explanation:"BJT has two P-N junctions: Base-Emitter and Base-Collector."},{questionText:"In active region, BE junction is:",options:["Forward biased","Reverse biased","Zero biased","Unbiased"],correctOptionIndex:0,explanation:"In active region, BE junction is forward biased."},{questionText:"In active region, BC junction is:",options:["Forward biased","Reverse biased","Zero biased","Unbiased"],correctOptionIndex:1,explanation:"In active region, BC junction is reverse biased."},{questionText:"Most lightly doped region in BJT:",options:["Emitter","Base","Collector","All equal"],correctOptionIndex:1,explanation:"Base is most lightly doped region in BJT."},{questionText:"Largest region in BJT:",options:["Emitter","Base","Collector","All equal"],correctOptionIndex:2,explanation:"Collector is the largest region in BJT."},{questionText:"BJT amplifies:",options:["Voltage only","Current only","Power only","All three"],correctOptionIndex:3,explanation:"BJT can amplify voltage, current, and power."},{questionText:"Common configurations of BJT:",options:["2","3","4","5"],correctOptionIndex:1,explanation:"BJT has 3 configurations: CE, CB, and CC."}],"Boolean Algebra":[{questionText:"A + A' equals:",options:["0","1","A","A'"],correctOptionIndex:1,explanation:"A + A' = 1 (Complement law)"},{questionText:"A . A equals:",options:["0","1","A","A'"],correctOptionIndex:2,explanation:"A . A = A (Idempotent law)"},{questionText:"De Morgan's law states:",options:["(A+B)' = A'.B'","(A.B)' = A'+B'","Both","Neither"],correctOptionIndex:2,explanation:"De Morgan's laws: (A+B)' = A'.B' and (A.B)' = A'+B'"},{questionText:"A + 0 equals:",options:["0","1","A","A'"],correctOptionIndex:2,explanation:"A + 0 = A (Identity law for OR)"},{questionText:"Duality principle exchanges:",options:["0 and 1","+ and .","Both","Variables"],correctOptionIndex:2,explanation:"Duality exchanges 01 and +."}],Amplifiers:[{questionText:"Common emitter amplifier provides:",options:["Voltage gain only","Current gain only","Both gains","No gain"],correctOptionIndex:2,explanation:"CE amplifier provides both voltage and current gain."},{questionText:"Input impedance of CE amplifier is:",options:["Very high","Very low","Medium","Infinite"],correctOptionIndex:2,explanation:"CE amplifier has medium input impedance."},{questionText:"Phase shift in CE amplifier is:",options:["0","90","180","270"],correctOptionIndex:2,explanation:"CE amplifier provides 180 phase shift."},{questionText:"Emitter follower has gain:",options:[">>1","<<1","1","=0"],correctOptionIndex:2,explanation:"Emitter follower (CC) has voltage gain  1."},{questionText:"Bandwidth of amplifier is:",options:["f1 - f2","f2 - f1","f1 + f2","f1  f2"],correctOptionIndex:1,explanation:"Bandwidth = f2 - f1 (upper - lower cutoff frequency)"}],"8085 Architecture":[{questionText:"8085 is a:",options:["4-bit processor","8-bit processor","16-bit processor","32-bit processor"],correctOptionIndex:1,explanation:"8085 is an 8-bit microprocessor."},{questionText:"8085 has how many address lines?",options:["8","16","20","24"],correctOptionIndex:1,explanation:"8085 has 16 address lines (A0-A15)."},{questionText:"8085 can address maximum memory of:",options:["64KB","1MB","16MB","4GB"],correctOptionIndex:0,explanation:"With 16 address lines, 8085 can address 2^16 = 64KB."},{questionText:"8085 operates at clock frequency:",options:["1 MHz","3 MHz","5 MHz","8 MHz"],correctOptionIndex:1,explanation:"8085 typically operates at 3 MHz."},{questionText:"Program counter in 8085 is:",options:["8-bit","16-bit","20-bit","32-bit"],correctOptionIndex:1,explanation:"Program counter is 16-bit to address 64KB memory."}],default:[{questionText:"What is the primary function of this chapter's concepts?",options:["Processing","Storage","Control","All of the above"],correctOptionIndex:3,explanation:"Most electronic concepts involve processing, storage, and control functions."},{questionText:"Which parameter is most critical in this domain?",options:["Voltage","Current","Power","Frequency"],correctOptionIndex:0,explanation:"Voltage is often the most fundamental parameter in electronics."},{questionText:"What is the typical application of these concepts?",options:["Communication","Control","Processing","All fields"],correctOptionIndex:3,explanation:"Electronic concepts find applications across all fields."},{questionText:"Which factor affects performance most?",options:["Temperature","Frequency","Design","All factors"],correctOptionIndex:3,explanation:"Performance is affected by multiple factors including temperature, frequency, and design."},{questionText:"What is the main advantage of modern implementations?",options:["Speed","Efficiency","Reliability","All advantages"],correctOptionIndex:3,explanation:"Modern implementations typically offer improvements in speed, efficiency, and reliability."}]};return Object.entries(e).forEach(([i,o])=>{o.forEach(c=>{const d=n[c];if(d)d.forEach(g=>{s.push({...g,subject:i,chapter:c,authorId:"lecturer-001"})});else{n.default.forEach(p=>{let y=p.questionText.replace("this chapter's concepts",`${c} concepts`);y=y.replace("this domain",`${c}`),y=y.replace("these concepts",`${c} concepts`);let b=p.explanation.replace("Electronic concepts",`${c} concepts`);b=b.replace("Most electronic concepts",`Most ${c} concepts`),s.push({questionText:y,options:p.options,correctOptionIndex:p.correctOptionIndex,explanation:b,subject:i,chapter:c,authorId:"lecturer-001"})});for(let p=6;p<=10;p++)s.push({questionText:`${c} - Advanced Question ${p-5}: What is an important aspect of ${c}?`,options:[`Primary characteristic of ${c}`,`Secondary feature of ${c}`,`Advanced concept in ${c}`,"All of the above"],correctOptionIndex:3,explanation:`This question covers advanced concepts of ${c} in ${i}.`,subject:i,chapter:c,authorId:"lecturer-001"})}})}),s},P4=async()=>{try{const s=[],e=V4();let n=0;for(const o of e)try{const c=await WE(o);s.push(c),c.success&&n++}catch(c){console.error("Error adding question:",c),s.push({success:!1,error:c.message})}return{success:!0,message:`Added ${s.filter(o=>o.success).length} questions to the database (10 questions per topic)`,details:s}}catch(s){return console.error("Error populating sample questions:",s),{success:!1,error:s.message}}},ax=()=>{const s=mo(),{currentUser:e}=Ji(),[n,i]=q.useState({title:"",subject:"Basic Electronics",chapter:"",numberOfQuestions:10,timeLimitMinutes:30}),[o,c]=q.useState([]),[d,g]=q.useState([]),[p,y]=q.useState([]),[b,A]=q.useState(!1),[T,U]=q.useState(null),[P,j]=q.useState(!1),[L,Y]=q.useState(null),[ae,re]=q.useState(!1),[ge,se]=q.useState(!1),Ae=["Basic Electronics","Digital Electronics","Analog Electronics"],V={"Basic Electronics":["Semiconductors","Diodes","Transistors","Amplifiers"],"Digital Electronics":["Logic Gates","Boolean Algebra","Flip Flops","Counters"],"Analog Electronics":["Op-Amps","Oscillators","Filters","Power Amplifiers"]};q.useEffect(()=>{n.subject&&n.chapter&&I()},[n.subject,n.chapter]);const I=async()=>{try{const oe=await ix({subject:n.subject,chapter:n.chapter});oe.success?c(oe.data):c([])}catch(oe){console.error("Error fetching questions:",oe),c([])}},R=oe=>{const{name:H,value:ie}=oe.target;i(ue=>({...ue,[H]:ie})),H==="subject"&&i(ue=>({...ue,chapter:""}))},D=async()=>{try{Y(null),console.log("Generating questions with criteria:",{subject:n.subject,chapter:n.chapter,numberOfQuestions:parseInt(n.numberOfQuestions)});const oe=await ix({subject:n.subject,chapter:n.chapter});if(!oe.success){Y(oe.error);return}const H=oe.data;if(console.log(`Found ${H.length} questions for ${n.subject} > ${n.chapter}`),H.length<parseInt(n.numberOfQuestions)){Y(`Not enough questions available. Found ${H.length}, need ${n.numberOfQuestions}. Please add more questions or reduce the number.`);return}const ue=H.sort(()=>.5-Math.random()).slice(0,parseInt(n.numberOfQuestions));g(ue.map(je=>je.id)),y(ue),console.log("Selected questions:",ue)}catch(oe){console.error("Error generating questions:",oe),Y("Failed to generate questions: "+oe.message)}},M=async()=>{try{se(!0),Y(null);const oe=await P4();oe.success?(n.subject&&n.chapter&&await I(),alert(` 480+ Sample questions added successfully! (10 questions per chapter)
You can now build quizzes for any chapter.`)):Y(oe.error)}catch(oe){console.error("Error populating sample questions:",oe),Y("Failed to populate sample questions: "+oe.message)}finally{se(!1)}},S=(oe,H)=>{U({...oe,index:H})},N=oe=>{const H=[...p];H[oe.index]=oe,y(H),U(null)},Ce=async oe=>{oe.preventDefault(),j(!0),Y(null);try{const H=[];for(let O=0;O<p.length;O++){const Z=p[O],le=d[O],X=o.find(Te=>Te.id===le);if(!X||Z.questionText!==X.questionText||JSON.stringify(Z.options)!==JSON.stringify(X.options)||Z.correctOptionIndex!==X.correctOptionIndex||Z.explanation!==X.explanation){const Te={questionText:Z.questionText,options:Z.options,correctOptionIndex:Z.correctOptionIndex,explanation:Z.explanation||"",subject:Z.subject||n.subject,chapter:Z.chapter||n.chapter,authorId:e.uid},ve=await WE(Te);if(ve.success)H.push(ve.id);else throw new Error(`Failed to save edited question: ${ve.error}`)}else H.push(le)}const ie={title:n.title,subject:n.subject,chapter:n.chapter,timeLimitMinutes:parseInt(n.timeLimitMinutes),questionIds:H,creatorId:e.uid},ue=k4(ie);if(!ue.isValid){Y(ue.errors.join(", ")),j(!1);return}const je=await x4(ie);je.success?(re(!0),setTimeout(()=>{s("/lecturer-dashboard")},2e3)):Y(je.error)}catch(H){console.error("Error creating quiz:",H),Y("Failed to create quiz: "+H.message)}finally{j(!1)}};return ae?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),f.jsx("h2",{className:"text-2xl font-bold text-text mb-2",children:"Quiz Created Successfully!"}),f.jsx("p",{className:"text-gray-600",children:"Redirecting to dashboard..."})]})}):f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx("div",{className:"mb-6",children:f.jsxs("button",{onClick:()=>s("/lecturer-dashboard"),className:"inline-flex items-center text-indigo-600 hover:text-indigo-700 font-medium bg-white px-4 py-2 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200",children:[f.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]})}),f.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[f.jsxs("div",{className:"flex items-center mb-6",children:[f.jsx("div",{className:"h-10 w-10 bg-indigo-100 rounded-lg flex items-center justify-center mr-4",children:f.jsx("svg",{className:"h-6 w-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),f.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Quiz"})]}),L&&f.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex",children:[f.jsx("svg",{className:"h-5 w-5 text-red-400 mr-3 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),f.jsx("p",{className:"text-sm text-red-700 mt-1",children:L})]})]})}),f.jsxs("form",{onSubmit:Ce,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"title",className:"block text-sm font-semibold text-gray-800 mb-2",children:"Quiz Title *"}),f.jsx("input",{type:"text",id:"title",name:"title",required:!0,value:n.title,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 placeholder-gray-500",placeholder:"e.g., Chapter 5 Practice Test"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"subject",className:"block text-sm font-semibold text-gray-800 mb-2",children:"Subject *"}),f.jsx("select",{id:"subject",name:"subject",required:!0,value:n.subject,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 bg-white",children:Ae.map(oe=>f.jsx("option",{value:oe,children:oe},oe))})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"chapter",className:"block text-sm font-semibold text-gray-800 mb-2",children:"Chapter *"}),f.jsxs("select",{id:"chapter",name:"chapter",required:!0,value:n.chapter,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 bg-white",children:[f.jsx("option",{value:"",children:"Select Chapter"}),V[n.subject]?.map(oe=>f.jsx("option",{value:oe,children:oe},oe))]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"numberOfQuestions",className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Questions *"}),f.jsx("input",{type:"number",id:"numberOfQuestions",name:"numberOfQuestions",required:!0,min:"1",max:"50",value:n.numberOfQuestions,onChange:R,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary"}),f.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Available questions: ",o.length]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"timeLimitMinutes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Limit (minutes) *"}),f.jsx("input",{type:"number",id:"timeLimitMinutes",name:"timeLimitMinutes",required:!0,min:"5",max:"180",value:n.timeLimitMinutes,onChange:R,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary"})]}),n.chapter&&f.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Step 2: Select Questions"}),f.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Click to randomly select ",n.numberOfQuestions," questions from ",n.chapter]})]}),f.jsxs("button",{type:"button",onClick:D,className:"bg-teal-600 hover:bg-teal-700 text-white px-6 py-3 rounded-lg font-medium transition-colors duration-200 shadow-sm",children:["Select Questions (",n.numberOfQuestions,")"]})]}),p.length>0&&f.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("p",{className:"text-sm text-green-800 flex items-center",children:[f.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})," ",p.length," questions selected successfully!"]}),f.jsx("button",{type:"button",onClick:()=>A(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",children:"Preview Questions"})]})}),o.length>0?f.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Available questions in this chapter: ",o.length]}):f.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[f.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:" No questions found for this chapter. Add comprehensive question bank!"}),f.jsx("div",{className:"flex space-x-2",children:f.jsx("button",{type:"button",onClick:M,disabled:ge,className:"bg-yellow-600 hover:bg-yellow-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",children:ge?"Adding Sample Questions...":"Add Sample Questions"})})]})]}),f.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[f.jsx("button",{type:"button",onClick:()=>s("/lecturer-dashboard"),className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors duration-200 shadow-sm",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:P||d.length===0,className:"bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-colors duration-200 shadow-sm",children:P?f.jsxs("div",{className:"flex items-center",children:[f.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Build Quiz"})]})]})]})]}),b&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[f.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Quiz Preview: ",n.title]}),f.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:f.jsx("div",{className:"space-y-6",children:p.map((oe,H)=>f.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("h4",{className:"font-medium text-gray-900",children:["Question ",H+1,": ",oe.questionText]}),f.jsx("button",{onClick:()=>S(oe,H),className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"Edit"})]}),f.jsx("div",{className:"space-y-2",children:oe.options.map((ie,ue)=>f.jsxs("div",{className:`flex items-center p-2 rounded ${ue===oe.correctOptionIndex?"bg-green-50 border border-green-200":"bg-gray-50"}`,children:[f.jsx("span",{className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-sm font-medium mr-3",children:String.fromCharCode(65+ue)}),f.jsx("span",{className:ue===oe.correctOptionIndex?"text-green-800 font-medium":"text-gray-700",children:ie}),ue===oe.correctOptionIndex&&f.jsx("span",{className:"ml-2 text-green-600 text-sm",children:" Correct"})]},ue))}),oe.explanation&&f.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded",children:f.jsxs("p",{className:"text-sm text-blue-800",children:[f.jsx("strong",{children:"Explanation:"})," ",oe.explanation]})})]},H))})}),f.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t border-gray-200 bg-gray-50",children:[f.jsx("button",{onClick:()=>A(!1),className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200",children:"Close Preview"}),f.jsx("button",{onClick:()=>{A(!1),document.querySelector("form").scrollIntoView({behavior:"smooth",block:"end"})},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200",children:"Looks Good - Build Quiz"})]})]})}),T&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[f.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Edit Question"}),f.jsx("button",{onClick:()=>U(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text"}),f.jsx("textarea",{value:T.questionText,onChange:oe=>U({...T,questionText:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",rows:3})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options"}),f.jsx("div",{className:"space-y-3",children:T.options.map((oe,H)=>f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("input",{type:"radio",name:"correctOption",checked:T.correctOptionIndex===H,onChange:()=>U({...T,correctOptionIndex:H}),className:"h-4 w-4 text-indigo-600"}),f.jsx("span",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+H)}),f.jsx("input",{type:"text",value:oe,onChange:ie=>{const ue=[...T.options];ue[H]=ie.target.value,U({...T,options:ue})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]},H))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Explanation (Optional)"}),f.jsx("textarea",{value:T.explanation||"",onChange:oe=>U({...T,explanation:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",rows:2,placeholder:"Provide an explanation for the correct answer..."})]})]})}),f.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t border-gray-200 bg-gray-50",children:[f.jsx("button",{onClick:()=>U(null),className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),f.jsx("button",{onClick:()=>N(T),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200",children:"Save Changes"})]})]})})]})},L4=()=>{const{quizId:s}=mx(),e=mo(),{currentUser:n}=Ji(),[i,o]=q.useState(null),[c,d]=q.useState(0),[g,p]=q.useState([]),[y,b]=q.useState(0),[A,T]=q.useState(!0),[U,P]=q.useState(null),[j,L]=q.useState(!1),[Y]=q.useState(Date.now());q.useEffect(()=>{(async()=>{try{const D=await e1(n.uid,s);if(D.success&&D.hasAttempted){P("You have already attempted this quiz. Each quiz can only be taken once."),T(!1);return}const M=await M4(s);M.success?(o(M.data),b(M.data.timeLimitMinutes*60),p(new Array(M.data.questions.length).fill({selectedOptionIndex:null}))):P(M.error)}catch(D){console.error("Error fetching quiz:",D),P("Failed to load quiz")}finally{T(!1)}})()},[s,n.uid]),q.useEffect(()=>{if(y>0&&!j){const R=setTimeout(()=>{b(y-1)},1e3);return()=>clearTimeout(R)}else y===0&&i&&Ae()},[y,j,i]);const ae=R=>{const D=Math.floor(R/60),M=R%60;return`${D}:${M.toString().padStart(2,"0")}`},re=R=>{const D=[...g];D[c]={selectedOptionIndex:R},p(D)},ge=()=>{c<i.questions.length-1&&d(c+1)},se=()=>{c>0&&d(c-1)},Ae=async()=>{if(!j){L(!0);try{const R=Date.now(),D=Math.round((R-Y)/(1e3*60)),M=O4(g,i.questions),S={quizId:i.id,studentId:n.uid,studentName:n.name||n.email||"Unknown Student",studentEmail:n.email,score:M.score,totalQuestions:i.questions.length,percentage:M.percentage,timeTakenMinutes:D,timeSpent:Math.round(D*60),answers:M.answers,quizTitle:i.title,correctAnswers:M.correctAnswers},N=await b4(S);N.success?e(`/quiz-results/${N.id}`,{state:{score:M.percentage,correctAnswers:M.correctAnswers,totalQuestions:M.totalQuestions,timeTaken:D,quizTitle:i.title}}):(P("Failed to submit quiz"),L(!1))}catch(R){console.error("Error submitting quiz:",R),P("Failed to submit quiz"),L(!1)}}};if(A)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),f.jsx("p",{className:"mt-4 text-text",children:"Loading quiz..."})]})});if(U)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-red-600 mb-4",children:U}),f.jsx("button",{onClick:()=>e("/student-dashboard"),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md",children:"Back to Dashboard"})]})});if(!i||!i.questions)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsx("p",{className:"text-text",children:"Quiz not found"})});const V=i.questions[c],I=c===i.questions.length-1;return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx("header",{className:"bg-white shadow-lg border-b border-gray-200 sticky top-0 z-10",children:f.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between items-center py-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.title}),f.jsx("div",{className:"flex items-center mt-2",children:f.jsxs("div",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium",children:["Question ",c+1," of ",i.questions.length]})})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:`text-3xl font-bold ${y<300?"text-red-600":"text-indigo-600"}`,children:ae(y)}),f.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Time Remaining"}),y<300&&f.jsx("p",{className:"text-xs text-red-500 mt-1",children:" Hurry up!"})]})]})})}),f.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:f.jsx("h2",{className:"text-xl font-semibold text-gray-900 leading-relaxed",children:V.questionText})}),f.jsx("div",{className:"space-y-4",children:V.options.map((R,D)=>f.jsxs("label",{className:`flex items-center p-5 border-2 rounded-xl cursor-pointer transition-all duration-200 ${g[c]?.selectedOptionIndex===D?"border-indigo-500 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:[f.jsx("input",{type:"radio",name:"answer",value:D,checked:g[c]?.selectedOptionIndex===D,onChange:()=>re(D),className:"sr-only"}),f.jsx("div",{className:`w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-colors ${g[c]?.selectedOptionIndex===D?"border-indigo-500 bg-indigo-500":"border-gray-300"}`,children:g[c]?.selectedOptionIndex===D&&f.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium mr-3 ${g[c]?.selectedOptionIndex===D?"bg-indigo-500 text-white":"bg-gray-200 text-gray-600"}`,children:String.fromCharCode(65+D)}),f.jsx("span",{className:"text-gray-900 text-lg",children:R})]})]},D))})]}),f.jsxs("div",{className:"flex justify-between items-center bg-gray-50 rounded-lg p-4",children:[f.jsx("button",{onClick:se,disabled:c===0,className:"bg-gray-500 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-colors duration-200 shadow-sm",children:" Previous"}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-sm font-medium text-gray-700",children:["Progress: ",g.filter(R=>R.selectedOptionIndex!==null).length," of ",i.questions.length," answered"]}),f.jsx("div",{className:"w-48 bg-gray-200 rounded-full h-2 mt-2",children:f.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${g.filter(R=>R.selectedOptionIndex!==null).length/i.questions.length*100}%`}})})]}),I?f.jsx("button",{onClick:Ae,disabled:j,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-colors duration-200 shadow-sm",children:j?f.jsxs("div",{className:"flex items-center",children:[f.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):"Submit Quiz "}):f.jsx("button",{onClick:ge,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-medium transition-colors duration-200 shadow-sm",children:"Next "})]})]})})]})},U4=()=>{const s=rs(),e=mo(),{score:n,correctAnswers:i,totalQuestions:o,timeTaken:c,quizTitle:d}=s.state||{};if(!s.state)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-text mb-4",children:"No quiz results found"}),f.jsx("button",{onClick:()=>e("/student-dashboard"),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md",children:"Back to Dashboard"})]})});const g=y=>y>=70?"text-green-600":y>=50?"text-yellow-600":"text-red-600",p=y=>y>=90?"Outstanding! ":y>=80?"Excellent work! ":y>=70?"Good job! ":y>=50?"Keep practicing! ":"Need more study time! ";return f.jsx("div",{className:"min-h-screen bg-background",children:f.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-lg border p-8 text-center",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-text mb-2",children:"Quiz Complete!"}),f.jsx("p",{className:"text-gray-600",children:d})]}),f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:`text-6xl font-bold mb-4 ${g(n)}`,children:[i,"/",o]}),f.jsxs("div",{className:"text-2xl font-medium text-text mb-2",children:[p(n)," (",n,"%)"]}),f.jsxs("p",{className:"text-gray-600",children:["You got ",i," out of ",o," questions correct"]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[f.jsx("div",{className:"text-2xl font-bold text-primary",children:i}),f.jsx("div",{className:"text-sm text-gray-600",children:"Correct Answers"})]}),f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[f.jsx("div",{className:"text-2xl font-bold text-primary",children:o-i}),f.jsx("div",{className:"text-sm text-gray-600",children:"Incorrect Answers"})]}),f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[f.jsx("div",{className:"text-2xl font-bold text-primary",children:c}),f.jsx("div",{className:"text-sm text-gray-600",children:"Minutes Taken"})]})]}),f.jsx("div",{className:"mb-8",children:f.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium ${n>=70?"bg-green-100 text-green-800":n>=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:n>=90?" Outstanding Performance":n>=80?" Excellent Performance":n>=70?" Good Performance":n>=50?" Average Performance":" Needs Improvement"})}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("button",{onClick:()=>e("/student-dashboard"),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-md font-medium transition-colors",children:"Back to Dashboard"}),n<70&&f.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:f.jsxs("p",{className:"text-blue-800 text-sm",children:[" ",f.jsx("strong",{children:"Tip:"})," Review the topics covered in this quiz and try again to improve your score!"]})})]})]})})})},z4=()=>{const{quizId:s}=mx(),e=mo(),[n,i]=q.useState(null),[o,c]=q.useState([]),[d,g]=q.useState(!0),[p,y]=q.useState(null);q.useEffect(()=>{(async()=>{try{g(!0);const L=await JE(s);if(!L.success){y("Quiz not found");return}i(L.data);const Y=await rp({quizId:s});if(Y.success){const ae=await Promise.all(Y.data.map(async re=>{const ge=await np(re.studentId);let se={...re,studentName:ge.success?ge.data.name||ge.data.email:"Unknown Student"};return!se.totalQuestions&&L.data.questions&&(se.totalQuestions=L.data.questions.length),se.percentage===0&&se.score>0&&se.totalQuestions>0&&(se.percentage=Math.round(se.score/se.totalQuestions*100)),se.percentage===0&&se.score>0&&se.score<=100&&(se.percentage=se.score,se.score=Math.round(se.percentage/100*se.totalQuestions)),se.score=se.score||0,se.percentage=se.percentage||0,se.totalQuestions=se.totalQuestions||0,se.timeTakenMinutes=se.timeTakenMinutes||0,console.log("Fixed attempt data:",se),se}));c(ae)}else c([])}catch(L){console.error("Error fetching results:",L),y("Failed to load results")}finally{g(!1)}})()},[s]);const b=j=>j?new Date(j.seconds*1e3).toLocaleString():"N/A",A=j=>j>=70?"text-green-600":j>=50?"text-yellow-600":"text-red-600",T=j=>j>=70?"bg-green-100 text-green-800":j>=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",P=(()=>{if(o.length===0)return null;const j=o.map(se=>se.percentage||0),L=j.reduce((se,Ae)=>se+Ae,0)/j.length,Y=Math.max(...j),ae=Math.min(...j),ge=j.filter(se=>se>=70).length/j.length*100;return{totalAttempts:o.length,averageScore:Math.round(L),highestScore:Y,lowestScore:ae,passRate:Math.round(ge)}})();return d?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),f.jsx("p",{className:"mt-4 text-text",children:"Loading results..."})]})}):p?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-red-600 mb-4",children:p}),f.jsx("button",{onClick:()=>e("/lecturer-dashboard"),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md",children:"Back to Dashboard"})]})}):f.jsx("div",{className:"min-h-screen bg-background",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx("div",{className:"mb-6",children:f.jsx("button",{onClick:()=>e("/lecturer-dashboard"),className:"text-primary hover:text-indigo-700 font-medium",children:" Back to Dashboard"})}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8 mb-8",children:[f.jsx("h1",{className:"text-2xl font-bold text-text mb-2",children:n?.title}),f.jsx("p",{className:"text-gray-600 mb-4",children:"Quiz Results Overview"}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[f.jsx("div",{className:"text-2xl font-bold text-primary",children:n?.questionIds?.length||0}),f.jsx("div",{className:"text-sm text-gray-600",children:"Questions"})]}),f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[f.jsx("div",{className:"text-2xl font-bold text-primary",children:n?.timeLimitMinutes}),f.jsx("div",{className:"text-sm text-gray-600",children:"Minutes"})]}),f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[f.jsx("div",{className:"text-2xl font-bold text-primary",children:o.length}),f.jsx("div",{className:"text-sm text-gray-600",children:"Attempts"})]}),f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[f.jsx("div",{className:"text-2xl font-bold text-primary",children:n?.topic}),f.jsx("div",{className:"text-sm text-gray-600",children:"Topic"})]})]})]}),P&&f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8 mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold text-text mb-6",children:"Statistics"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-3xl font-bold text-primary",children:P.totalAttempts}),f.jsx("div",{className:"text-sm text-gray-600",children:"Total Attempts"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-3xl font-bold text-primary",children:[P.averageScore,"%"]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Average Score"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[P.highestScore,"%"]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Highest Score"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-3xl font-bold text-red-600",children:[P.lowestScore,"%"]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Lowest Score"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-3xl font-bold text-accent",children:[P.passRate,"%"]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Pass Rate (70%)"})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[f.jsx("h2",{className:"text-xl font-semibold text-text mb-6",children:"Individual Results"}),o.length===0?f.jsxs("div",{className:"text-center py-8",children:[f.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),f.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No attempts yet"}),f.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Students haven't taken this quiz yet."})]}):f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Details"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time & Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(j=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:f.jsx("span",{className:"text-indigo-600 font-medium text-sm",children:j.studentName.charAt(0).toUpperCase()})}),f.jsxs("div",{className:"ml-4",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.studentName}),f.jsxs("div",{className:"text-sm text-gray-500",children:["Student ID: ",j.studentId.substring(0,8),"..."]})]})]})}),f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"flex items-center",children:[f.jsxs("div",{className:`text-2xl font-bold ${A(j.percentage||0)} mr-3`,children:[j.percentage||0,"%"]}),f.jsxs("div",{className:"text-sm text-gray-500",children:[f.jsxs("div",{children:[j.score||0," correct"]}),f.jsxs("div",{children:["out of ",j.totalQuestions||0]})]})]})}),f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"text-sm text-gray-900",children:[f.jsxs("div",{className:"flex items-center mb-1",children:[f.jsx("svg",{className:"h-4 w-4 text-gray-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),j.timeTakenMinutes," min"]}),f.jsxs("div",{className:"flex items-center text-gray-500",children:[f.jsx("svg",{className:"h-4 w-4 text-gray-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a4 4 0 118 0v4m-4 8a2 2 0 100-4 2 2 0 000 4zm6 2a2 2 0 11-4 0 2 2 0 014 0z"})}),b(j.dateTaken)]})]})}),f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"flex flex-col items-start space-y-2",children:[f.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${T(j.percentage||0)}`,children:(j.percentage||0)>=70?" Pass":" Fail"}),f.jsx("div",{className:`text-xs ${A(j.percentage||0)}`,children:(j.percentage||0)>=90?"Excellent":(j.percentage||0)>=80?"Very Good":(j.percentage||0)>=70?"Good":(j.percentage||0)>=50?"Average":"Poor"})]})})]},j.id))})]})})]})]})})};class q4 extends C2.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("App Error:",e,n)}render(){return this.state.hasError?f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:f.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[f.jsx("div",{className:"text-red-500 mb-4",children:f.jsx("svg",{className:"mx-auto h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),f.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Application Error"}),f.jsx("p",{className:"text-gray-600 mb-4",children:this.state.error?.message||"Something went wrong"}),f.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Reload Page"})]})}):this.props.children}}function B4(){return f.jsx(q4,{children:f.jsx(N4,{children:f.jsx(XT,{children:f.jsx("div",{className:"min-h-screen bg-gray-50",children:f.jsxs(NT,{children:[f.jsx(Bn,{path:"/login",element:f.jsx(R4,{})}),f.jsx(Bn,{path:"/",element:f.jsx($l,{to:"/login",replace:!0})}),f.jsx(Bn,{path:"/student-dashboard",element:f.jsx(zi,{requiredRole:"student",children:f.jsx(C4,{})})}),f.jsx(Bn,{path:"/take-quiz/:quizId",element:f.jsx(zi,{requiredRole:"student",children:f.jsx(L4,{})})}),f.jsx(Bn,{path:"/quiz-results/:attemptId",element:f.jsx(zi,{requiredRole:"student",children:f.jsx(U4,{})})}),f.jsx(Bn,{path:"/lecturer-dashboard",element:f.jsx(zi,{requiredRole:"lecturer",children:f.jsx(D4,{})})}),f.jsx(Bn,{path:"/create-quiz",element:f.jsx(zi,{requiredRole:"lecturer",children:f.jsx(ax,{})})}),f.jsx(Bn,{path:"/view-results/:quizId",element:f.jsx(zi,{requiredRole:"lecturer",children:f.jsx(z4,{})})}),f.jsx(Bn,{path:"/edit-quiz/:quizId",element:f.jsx(zi,{requiredRole:"lecturer",children:f.jsx(ax,{})})}),f.jsx(Bn,{path:"*",element:f.jsx($l,{to:"/login",replace:!0})})]})})})})})}P2.createRoot(document.getElementById("root")).render(f.jsx(q.StrictMode,{children:f.jsx(B4,{})}));
